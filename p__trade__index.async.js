"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[939],{54163:function(ma,We,f){f.r(We),f.d(We,{default:function(){return Wr},getPositionQuery:function(){return Gr},getPositions:function(){return Br}});var de=f(861),Ue=f.n(de),Xe=f(27424),M=f.n(Xe),Ee=f(34713),Ke=f(9279),y=f(62435),ke=f(59734),Se=f(38416),I=f.n(Se),be=f(42122),se=f.n(be),pa=f(74704),va=f.n(pa),ya=f(94184),H=f.n(ya),fa=f(33290),Fe=f(17158),wt=f(92583),ga=Object.defineProperty,jt=Object.getOwnPropertySymbols,ha=Object.prototype.hasOwnProperty,ba=Object.prototype.propertyIsEnumerable,Mt=(r,e,t)=>e in r?ga(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,xa=(r,e)=>{for(var t in e||(e={}))ha.call(e,t)&&Mt(r,t,e[t]);if(jt)for(var t of jt(e))ba.call(e,t)&&Mt(r,t,e[t]);return r};const Pa=r=>y.createElement("svg",xa({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),y.createElement("g",{filter:"url(#more_svg__b)",clipPath:"url(#more_svg__a)"},y.createElement("path",{d:"m16.8 9-4.837 7.2L7.2 9h9.6Z",fill:"#fff"})),y.createElement("defs",null,y.createElement("clipPath",{id:"more_svg__a"},y.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})),y.createElement("filter",{id:"more_svg__b",x:3.199,y:9,width:17.6,height:15.2,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},y.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),y.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),y.createElement("feOffset",{dy:4}),y.createElement("feGaussianBlur",{stdDeviation:2}),y.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),y.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),y.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_313_1951"}),y.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_313_1951",result:"shape"}))));var ri="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsdGVyPSJ1cmwoI2IpIiBjbGlwLXBhdGg9InVybCgjYSkiPjxwYXRoIGQ9Im0xNi44IDktNC44MzcgNy4yTDcuMiA5aDkuNloiIGZpbGw9IiNmZmYiLz48L2c+PGRlZnM+PGNsaXBQYXRoIGlkPSJhIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAwaDI0djI0SDB6Ii8+PC9jbGlwUGF0aD48ZmlsdGVyIGlkPSJiIiB4PSIzLjE5OSIgeT0iOSIgd2lkdGg9IjE3LjYiIGhlaWdodD0iMTUuMiIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiPjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+PGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPjxmZU9mZnNldCBkeT0iNCIvPjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjIiLz48ZmVDb21wb3NpdGUgaW4yPSJoYXJkQWxwaGEiIG9wZXJhdG9yPSJvdXQiLz48ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAuMjUgMCIvPjxmZUJsZW5kIGluMj0iQmFja2dyb3VuZEltYWdlRml4IiByZXN1bHQ9ImVmZmVjdDFfZHJvcFNoYWRvd18zMTNfMTk1MSIvPjxmZUJsZW5kIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDFfZHJvcFNoYWRvd18zMTNfMTk1MSIgcmVzdWx0PSJzaGFwZSIvPjwvZmlsdGVyPjwvZGVmcz48L3N2Zz4=",Ze={btn:"btn___r1nTS",targetSelect:"targetSelect___WQeay",menu:"menu___rnv_7",menus:"menus___KY35b",menuItem:"menuItem___wEjP0",activeItem:"activeItem___kB1Rj"},a=f(86074),_a=function(e){var t=e.options,n=e.onChange,i=e.value;return(0,a.jsx)("div",{className:Ze.menu,children:(0,a.jsxs)(Fe.v,{children:[(0,a.jsxs)(Fe.v.Button,{className:Ze.btn,children:[(0,a.jsx)(wt.r,{}),(0,a.jsx)("div",{className:Ze.targetSelect,children:i==null?void 0:i.name}),(0,a.jsx)(Pa,{})]}),(0,a.jsx)(Fe.v.Items,{as:"div",className:Ze.menus,children:(t||[]).map(function(l,d){return(0,a.jsx)(Fe.v.Item,{children:function(s){var o=s.active;return(0,a.jsx)("div",{className:H()(Ze.menuItem,I()({},Ze.activeItem,o)),onClick:function(){n(l)},children:(0,a.jsx)("span",{style:{marginLeft:5},children:l.name})})}},d)})})]})})},Ta=_a,pe={tab:"tab___AIepu",periodTab:"periodTab___AU1Sf",tabItem:"tabItem___K48RO",active:"active___yzxjn",statsLabel:"statsLabel___h81vX",statsValue:"statsValue___haDDX"},Ia=function(e){var t=e.options,n=e.stats,i=e.value,l=e.className,d=e.onChange;return(0,a.jsxs)("div",{className:H()(pe.tab,l),children:[(0,a.jsx)("ul",{className:pe.periodTab,children:t.map(function(c){return(0,a.jsx)("li",{onClick:function(){return d(c.value)},className:H()(pe.tabItem,I()({},pe.active,c.value===i)),children:c.label},c.value)})}),(0,a.jsxs)("div",{className:H()(pe.stats,n==null?void 0:n.className),children:[(0,a.jsx)("span",{className:pe.statsLabel,children:"O"}),(0,a.jsx)("span",{className:pe.statsValue,children:n==null?void 0:n.O}),(0,a.jsx)("span",{className:pe.statsLabel,children:"H"}),(0,a.jsx)("span",{className:pe.statsValue,children:n==null?void 0:n.H}),(0,a.jsx)("span",{className:pe.statsLabel,children:"L"}),(0,a.jsx)("span",{className:pe.statsValue,children:n==null?void 0:n.L}),(0,a.jsx)("span",{className:pe.statsLabel,children:"C"}),(0,a.jsx)("span",{className:pe.statsValue,children:n==null?void 0:n.C})]})]})},Sa=Ia,we=f(3410),Ct={priceBox:"priceBox___3w9Sl",title:"title___jhIju"},Na=function(e){var t=e.title,n=e.children;return(0,a.jsxs)("div",{className:Ct.priceBox,children:[(0,a.jsx)("div",{className:Ct.title,children:(0,a.jsx)(we._H,{id:t})}),n]})},dt=Na,qe=f(47981),ut=f(37432),wa=f(72167);function ja(r){return(0,wa.Z)(r*1e3,"dd MMM yyyy, h:mm a")}var k=f(39265),Lt=f(13907);function Ma(r,e,t){var n=(0,Lt.Z)(e,{}),i=M()(n,2),l=i[0],d=i[1],c=(0,y.useCallback)(function(o){d(function(u){typeof o=="function"&&(o=o((u==null?void 0:u[r])||t));var p=se()(se()({},u),{},I()({},r,o));return p})},[r,d,t]),s;return l&&r in l?s=l[r]:s=t,[s,c]}function kt(r,e,t){var n=JSON.stringify(r);return(0,Lt.Z)(n,e,t)}var F=f(24069),Ca=f(17061),P=f.n(Ca),La=f(17156),B=f.n(La),ka=f(17283),Fa=f(2593),Oa=f(9138),Oe=f(13805),Ye,Be=(Ye={},I()(Ye,Oe.PO,{stats:"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-stats",referrals:"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-arbitrum-referrals",nissohVault:"https://api.thegraph.com/subgraphs/name/nissoh/gmx-vault"}),I()(Ye,Oe.Qz,{stats:"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-avalanche-stats",referrals:"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-avalanche-referrals"}),I()(Ye,"common",{chainLink:"https://api.thegraph.com/subgraphs/name/deividask/chainlink"}),Ye),Da=f(88610),Aa=f(46495);function Ge(r){return new Da.f({uri:r,cache:new Aa.h})}var Ea=Ge(Be.common.chainLink),Ra=Ge(Be[Oe.PO].stats),ii=Ge(Be[Oe.PO].referrals),si=Ge(Be[Oe.PO].nissohVault),za=Ge(Be[Oe.Qz].stats),li=Ge(Be[Oe.Qz].referrals);function oi(r){if(r===ARBITRUM)return Ra;if(r===AVALANCHE)return za;if(r===ARBITRUM_TESTNET)return null;throw new Error("Unsupported chain ".concat(r))}var Za=f(36493),Ba=Fa.O$,ct=-new Date().getTimezoneOffset()*60,Ga={BTC_USD:"0xae74faa92cb67a95ebcab07358bc222e33a34da7",ETH_USD:"0x37bc7498f4ff12c19678ee8fe19d713b87f6a9e6",BNB_USD:"0xc45ebd0f901ba6b2b8c7e70b717778f055ef5e6d",LINK_USD:"0xdfd03bfc3465107ce570a0397b247f546a42d0fa",UNI_USD:"0x68577f915131087199fe48913d8b416b3984fd38",SUSHI_USD:"0x7213536a36094cd8a768a5e45203ec286cba2d74",AVAX_USD:"0x0fc3657899693648bba4dbd2d8b33b82e875105d",AAVE_USD:"0xe3f0dede4b499c07e12475087ab1a084b5f93bc0",YFI_USD:"0x8a4d74003870064d41d4f84940550911fbfccf04",SPELL_USD:"0x8640b23468815902e011948f3ab173e1e83f9879"};function Va(r,e){if(r.length<2)return r;for(var t=[r[0]],n=r[0].time,i=1;i<r.length;i++){var l=r[i],d=l.time,c=l.open;if(n)for(var s=(d-n)/e-1;s>0;)t.push({time:d-s*e,open:c,close:c,high:c*1.0003,low:c*.9996}),s--;n=d,t.push(r[i])}return t}function Ha(r,e){var t=k.pQ[e];if(r.length<2)return[];for(var n=[],i=r[0],l=Math.floor(i[0]/t)*t,d=i[1],c=d,s=d,o=d,u=d,p=1;p<r.length;p++){var _=M()(r[p],2),g=_[0],j=_[1],v=Math.floor(g/t)*t;l!==v&&(n.push({t:l+ct,o:c,h:s,l:o,c:u}),c=u,s=Math.max(c,u),o=Math.min(c,u)),u=j,s=Math.max(s,j),o=Math.min(o,j),l=v}return n.map(function(h){var b=h.t,w=h.o,L=h.c,m=h.h,C=h.l;return{time:b,open:w,close:L,high:m,low:C}})}function Wa(r,e){["WBTC","WETH","WAVAX"].includes(r)&&(r=r.substr(1));var t=r+"_USD",n=Ga[t];if(!n)throw new Error("undefined marketName ".concat(t));for(var i=1e3,l=6,d=[],c=0;c<l;c++){var s=(0,ka.Ps)(`{
      rounds(
        first: `.concat(i,`,
        skip: `).concat(c*i,`,
        orderBy: unixTimestamp,
        orderDirection: desc,
        where: {feed: "`).concat(n,`"}
      ) {
        unixTimestamp,
        value
      }
    }`));d.push(Ea.query({query:s}))}return Promise.all(d).then(function(o){var u=[],p=new Set;return o.forEach(function(_){_.data.rounds.forEach(function(g){p.has(g.unixTimestamp)||(p.add(g.unixTimestamp),u.push([g.unixTimestamp,Number(g.value)/1e8]))})}),u.sort(function(_,g){var j=M()(_,1),v=j[0],h=M()(g,1),b=h[0];return v-b}),u=Ha(u,e),u}).catch(function(o){console.error(o)})}function Ua(r){for(var e=k.pQ[r],t=Math.floor(Date.now()/1e3/e)*e,n=[],i=100;i>0;i--)n.push({time:t-i*e,open:1,close:1,high:1,low:1});return n}function Ya(r,e,t){return mt.apply(this,arguments)}function mt(){return mt=B()(P()().mark(function r(e,t,n){var i,l,d,c,s,o,u,p,_,g;return P()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return["WBTC","WETH","WAVAX"].includes(t)?t=t.substr(1):t==="BTC.b"&&(t="BTC"),i=k.pQ[n]*3e3,l=Math.floor(Date.now()/1e3-i),d="".concat(Oa.PN,"/candles/").concat(t,"?preferableChainId=").concat(e,"&period=").concat(n,"&from=").concat(l,"&preferableSource=fast"),c=5e3,v.next=7,new Promise(function(){var h=B()(P()().mark(function b(w,L){var m,C,A,J;return P()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:m=!1,setTimeout(function(){m=!0,L(new Error("request timeout ".concat(d)))},c),A=0;case 3:if(!(A<3)){T.next=22;break}if(!m){T.next=6;break}return T.abrupt("return");case 6:return T.prev=6,T.next=9,fetch(d);case 9:return J=T.sent,w(J),T.abrupt("return");case 14:return T.prev=14,T.t0=T.catch(6),T.next=18,(0,Za._v)(300);case 18:C=T.t0;case 19:A++,T.next=3;break;case 22:L(C);case 23:case"end":return T.stop()}},b,null,[[6,14]])}));return function(b,w){return h.apply(this,arguments)}}());case 7:if(s=v.sent,s.ok){v.next=10;break}throw new Error("request failed ".concat(s.status," ").concat(s.statusText));case 10:return v.next=12,s.json();case 12:if(o=v.sent,u=o==null?void 0:o.prices,!(!u||u.length<10)){v.next=16;break}throw new Error("not enough prices data: ".concat((p=u)===null||p===void 0?void 0:p.length));case 16:if(_=Date.now()/1e3-60*30,g=(o==null?void 0:o.updatedAt)||0,!(g<_)){v.next=20;break}throw new Error("chart data is obsolete, last price record at "+new Date(g*1e3).toISOString()+" now: "+new Date().toISOString());case 20:return u=u.map(function(h){var b=h.t,w=h.o,L=h.c,m=h.h,C=h.l;return{time:b+ct,open:w,close:L,high:m,low:C}}),v.abrupt("return",u);case 22:case"end":return v.stop()}},r)})),mt.apply(this,arguments)}function Qa(r,e,t){var n=k.pQ[t],i=Math.floor(Date.now()/1e3/n)*n+ct,l=r[r.length-1],d=parseFloat((0,F.dN)(e,k.$3,2));if(i===l.time)return l.close=d,l.high=Math.max(l.high,d),l.low=Math.max(l.low,d),r;var c={time:i,open:l.close,close:d,high:d,low:d};return[].concat(Ue()(r),[c])}function Ja(r,e,t,n,i){var l=!t&&e?["getChartCandles",r,e,n]:null,d=(0,ke.ZP)(l,{fetcher:function(){var p=B()(P()().mark(function g(){return P()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.prev=0,v.next=3,Ya(r,e,n);case 3:return v.abrupt("return",v.sent);case 6:return v.prev=6,v.t0=v.catch(0),console.warn(v.t0),console.warn("Switching to graph chainlink data"),v.prev=10,v.next=13,Wa(e,n);case 13:return v.abrupt("return",v.sent);case 16:return v.prev=16,v.t1=v.catch(10),console.warn("getChainlinkChartPricesFromGraph failed"),console.warn(v.t1),v.abrupt("return",[]);case 21:case"end":return v.stop()}},g,null,[[0,6],[10,16]])}));function _(){return p.apply(this,arguments)}return _}(),dedupingInterval:6e4,focusThrottleInterval:6e4*10}),c=d.data,s=d.mutate,o=i&&i.toString(),u=(0,y.useMemo)(function(){if(t)return Ua(n);if(!c)return[];var p=Ue()(c);return o&&c.length&&(p=Qa(p,Ba.from(o),n)),Va(p,k.pQ[n])},[c,t,o,n]);return[u,s]}var ue={main:"main___baTli",chart:"chart___CLGMg",kchart:"kchart___QYDyz",periodTab:"periodTab___cinp7",negative:"negative___R8NaS",positive:"positive___XgCl2",currentPrice:"currentPrice___wEDGk",header:"header___AT8K5",cutOff:"cutOff___sNyqI",price:"price___e2U86",percentage:"percentage___S6CTj"},pt=-new Date().getTimezoneOffset()*60,$a=function(){return{lineColor:"#5472cc",topColor:"rgba(49, 69, 131, 0.4)",bottomColor:"rgba(42, 64, 103, 0.0)",lineWidth:2,priceLineColor:"#3a3e5e",downColor:"#fa3c58",wickDownColor:"#fa3c58",upColor:"#0ecc83",wickUpColor:"#0ecc83",borderVisible:!1}},Xa=Object.keys(k.pQ).map(function(r){return{label:r,value:r}}),Ka=function(e,t){return{width:e,height:t,layout:{backgroundColor:"rgba(255, 255, 255, 0)",textColor:"#ccc",fontFamily:"Relative"},localization:{timeFormatter:function(i){return ja(i-pt)}},grid:{vertLines:{visible:!0,color:"rgba(35, 38, 59, 1)",style:2},horzLines:{visible:!0,color:"rgba(35, 38, 59, 1)",style:2}},timeScale:{rightOffset:5,borderVisible:!1,barSpacing:5,timeVisible:!0,fixLeftEdge:!0},priceScale:{borderVisible:!1},crosshair:{horzLine:{color:"#aaa"},vertLine:{color:"#aaa"},mode:0}}};function di(r,e,t,n){if(!(!e||!t))return r!==SWAP?t:e.isUsdg&&t.isUsdg?getTokens(n).find(function(i){return i.isStable}):e.isUsdg?t:t.isUsdg?e:e.isStable&&t.isStable||e.isStable?t:t.isStable?e:t}var Ft="4h",qa=function(e){var t,n=e.onChangeMarketSelection,i=e.markets,l=e.marketSelection,d=(0,y.useRef)(),c=(0,y.useState)(),s=M()(c,2),o=s[0],u=s[1],p=(0,y.useState)(!1),_=M()(p,2),g=_[0],j=_[1],v=(0,y.useState)(),h=M()(v,2),b=h[0],w=h[1],L=(0,y.useState)(),m=M()(L,2),C=m[0],A=m[1],J=(0,Ee.Ge)(),K=J.library,T=(0,ut.x)(),ce=T.chainId,ae=(0,y.useState)({maxPrice:void 0,minPrice:void 0}),ie=M()(ae,2),X=ie[0],ye=ie[1],Pe=kt([ce,"Chart-period"],Ft),$=M()(Pe,2),re=$[0],Ne=$[1];re in k.pQ||(re=Ft);var O=X.maxPrice&&X.minPrice?X.maxPrice.add(X.minPrice).div(2):null,q=Ja(ce,X.symbol,X.isStable,re,O),D=M()(q,2),N=D[0],Ae=D[1];(0,y.useEffect)(function(){var z=setInterval(function(){Ae(void 0,!0)},6e4);return function(){return clearInterval(z)}},[Ae]);var ee=(0,y.useCallback)(function(z){if(!z.time){u(null);return}var V=va()(z.seriesPrices.values()),je;try{var Me=function(){var st=je.value;return u(function(He){return He&&He.time===z.time?He:se()({time:z.time},st)}),"break"};for(V.s();!(je=V.n()).done;){var rt=Me();if(rt==="break")break}}catch(it){V.e(it)}finally{V.f()}},[u]),Le=(0,y.useCallback)(function(){if(b&&re){var z=Date.now()/1e3-168*k.pQ[re]/2+pt,V=Date.now()/1e3+pt;b.timeScale().setVisibleRange({from:z,to:V})}},[b,re]);(0,y.useEffect)(function(){var z,V;if(!(!N||!N.length||b)){var je=(0,fa.C2)(d.current,Ka((z=d.current)===null||z===void 0?void 0:z.offsetWidth,(V=d.current)===null||V===void 0?void 0:V.offsetHeight));je.subscribeCrosshairMove(ee);var Me=je.addCandlestickSeries($a());w(je),A(Me)}},[N]),(0,y.useEffect)(function(){if(b){var z=function(){d.current&&b.resize(d.current.offsetWidth,d.current.offsetHeight)};return window.addEventListener("resize",z),function(){return window.removeEventListener("resize",z)}}},[b]),(0,y.useEffect)(function(){C&&N&&N.length&&(C.setData(N),g||(Le(),j(!0)))},[N,C,g,Le]);var _e=(0,y.useMemo)(function(){var z;if(!N)return null;var V=o||N[N.length-1];if(!V)return null;var je=H()((z={},I()(z,ue.positive,V.open<=V.close),I()(z,ue.negative,V.open>V.close),z)),Me=2;return{className:je,O:V.open.toFixed(Me),H:V.high.toFixed(Me),L:V.low.toFixed(Me),C:V.close.toFixed(Me)}},[o,N]),fe=function(V){n(V)},oe,ge,Re,Ve,Te=0,he,R=Date.now()/1e3,G=R-24*60*60;if(N)for(var Y=N.length-1;Y>0;Y--){var te=N[Y];if(te.time<G)break;ge||(ge=te.low),oe||(oe=te.high),te.high>oe&&(oe=te.high),te.low<ge&&(ge=te.low),Re=te.open}if(Re&&O){var Ie=parseFloat((0,F.dN)(O,k.$3,2));Ve=Ie-Re,Te=Ve*100/Ie,Te>0?he="+".concat(Te.toFixed(2),"%"):he="".concat(Te.toFixed(2),"%"),Te===0&&(he="0.00")}return X?(0,a.jsxs)("div",{className:ue.main,children:[(0,a.jsxs)("div",{className:ue.header,children:[(0,a.jsx)(Ta,{options:i||[],value:l,onChange:fe,chainId:ce}),(0,a.jsxs)("div",{className:ue.currentPrice,children:["$",X.minPrice&&(0,F.dN)(X.minPrice,k.$3,2,!0)]}),(0,a.jsx)("div",{className:ue.cutOff}),(0,a.jsx)(dt,{title:"24h Change",children:(0,a.jsxs)("div",{className:H()(ue.percentage,(t={},I()(t,ue.positive,Te>0),I()(t,ue.negative,Te<0),t)),children:[!he&&"-",he&&he]})}),(0,a.jsx)(dt,{title:"24h High",children:(0,a.jsxs)("div",{className:ue.price,children:[!oe&&"-",oe&&(0,F.x6)(oe.toFixed(2))]})}),(0,a.jsx)(dt,{title:"24h Low",children:(0,a.jsxs)("div",{className:ue.price,children:[!ge&&"-",ge&&(0,F.x6)(ge.toFixed(2))]})})]}),(0,a.jsxs)("div",{className:ue.kchart,children:[(0,a.jsx)(Sa,{stats:_e,className:ue.periodTab,value:re,onChange:Ne,options:Xa}),(0,a.jsx)("div",{className:ue.chart,ref:d})]})]}):null},en=qa,tn=f(56690),vt=f.n(tn),an=f(89728),yt=f.n(an),nn=f(61655),ft=f.n(nn),rn=f(26389),gt=f.n(rn),sn=JSON.parse('{"Mt":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"market","type":"address"},{"indexed":false,"internalType":"address","name":"marketValid","type":"address"},{"indexed":false,"internalType":"address","name":"orderBookLong","type":"address"},{"indexed":false,"internalType":"address","name":"orderBookShort","type":"address"}],"name":"Create","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"allMarketsLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"string","name":"_name","type":"string"},{"internalType":"address","name":"_marketAddress","type":"address"},{"internalType":"address","name":"_marketValid","type":"address"},{"internalType":"address","name":"_marketRouter","type":"address"},{"internalType":"address","name":"_orderBookLong","type":"address"},{"internalType":"address","name":"_orderBookShort","type":"address"},{"internalType":"address","name":"_indexToken","type":"address"},{"internalType":"address","name":"_feeRouter","type":"address"},{"internalType":"address","name":"_feeVault","type":"address"},{"internalType":"address","name":"_positionBook","type":"address"},{"internalType":"address","name":"_openStoreLong","type":"address"},{"internalType":"address","name":"_closeStoreLong","type":"address"},{"internalType":"address","name":"_openStoreShort","type":"address"},{"internalType":"address","name":"_closeStoreShort","type":"address"},{"internalType":"address","name":"_addressProvider","type":"address"},{"internalType":"uint256","name":"_minSlippage","type":"uint256"},{"internalType":"uint256","name":"_maxSlippage","type":"uint256"},{"internalType":"uint256","name":"_minLeverage","type":"uint256"},{"internalType":"uint256","name":"_maxLeverage","type":"uint256"},{"internalType":"uint256","name":"_maxTradeAmount","type":"uint256"},{"internalType":"uint256","name":"_minPay","type":"uint256"},{"internalType":"uint256","name":"_minCollateral","type":"uint256"},{"internalType":"bool","name":"_allowOpen","type":"bool"},{"internalType":"bool","name":"_allowClose","type":"bool"},{"internalType":"uint256","name":"_tokenDigits","type":"uint256"},{"internalType":"address","name":"_vault","type":"address"},{"internalType":"address","name":"_vaultRouter","type":"address"},{"internalType":"address","name":"_collateralToken","type":"address"}],"internalType":"struct MarketFactory.CreateInputs","name":"_inputs","type":"tuple"}],"name":"create","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getMarkets","outputs":[{"components":[{"internalType":"string","name":"name","type":"string"},{"internalType":"address","name":"addr","type":"address"}],"internalType":"struct IMarketFactory.Props[]","name":"_markets","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"markets","outputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"address","name":"addr","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"}]}'),ht=f(58072),ln=function(r){ft()(t,r);var e=gt()(t);function t(n,i){return vt()(this,t),e.call(this,n,i,sn.Mt)}return yt()(t,[{key:"getMarkets",value:function(){var n=B()(P()().mark(function l(){var d;return P()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.call("getMarkets");case 2:return d=s.sent,console.log("[getContract] getMarkets",d),s.abrupt("return",d);case 5:case"end":return s.stop()}},l,this)}));function i(){return n.apply(this,arguments)}return i}()}]),t}(ht.k),et=f(49524),Ot={name:"ETH/USDC",address:"0xbEcC4Cd3bC7E912bCeA6EFE3F8379a7018455F99"},on=function(){var r=B()(P()().mark(function e(t,n){var i,l,d;return P()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return i=(0,et.u)(t,"MarketFactory"),l=new ln(i,n),s.next=4,l.getMarkets();case 4:if(s.t0=s.sent.map(function(o){return se()(se()({},o),{},{address:o.addr})}),s.t0){s.next=7;break}s.t0=[];case 7:return d=s.t0,d.length==0&&(console.warn("failed to get markets"),d.push(Ot)),s.abrupt("return",d);case 10:case"end":return s.stop()}},e)}));return function(t,n){return r.apply(this,arguments)}}(),S=f(61895),dn=JSON.parse('{"Mt":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_market","type":"address"},{"internalType":"address","name":"_account","type":"address"}],"name":"availableLiquidity","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"address","name":"_market","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"getFundingFee","outputs":[{"internalType":"int256","name":"","type":"int256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_market","type":"address"}],"name":"getFundingRate","outputs":[{"internalType":"int256","name":"","type":"int256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_marketAddr","type":"address"}],"name":"getMarket","outputs":[{"components":[{"internalType":"uint256","name":"minSlippage","type":"uint256"},{"internalType":"uint256","name":"maxSlippage","type":"uint256"},{"internalType":"uint256","name":"slippageDigits","type":"uint256"},{"internalType":"uint256","name":"minLev","type":"uint256"},{"internalType":"uint256","name":"maxLev","type":"uint256"},{"internalType":"uint256","name":"minCollateral","type":"uint256"},{"internalType":"uint256","name":"maxTradeAmount","type":"uint256"},{"internalType":"bool","name":"allowOpen","type":"bool"},{"internalType":"bool","name":"allowClose","type":"bool"}],"internalType":"struct IMarketReader.ValidOuts","name":"validOuts","type":"tuple"},{"components":[{"internalType":"uint256","name":"tokenDigits","type":"uint256"},{"internalType":"uint256","name":"closeFeeRate","type":"uint256"},{"internalType":"uint256","name":"openFeeRate","type":"uint256"},{"internalType":"uint256","name":"liquidationFeeUsd","type":"uint256"},{"internalType":"uint256","name":"spread","type":"uint256"},{"internalType":"address","name":"indexToken","type":"address"},{"internalType":"address","name":"collateralToken","type":"address"},{"internalType":"address","name":"vault","type":"address"},{"internalType":"address","name":"marketAddressesProvider","type":"address"},{"internalType":"address","name":"orderBookLong","type":"address"},{"internalType":"address","name":"orderBookShort","type":"address"},{"internalType":"address","name":"positionBook","type":"address"}],"internalType":"struct IMarketReader.MarketOuts","name":"mktOuts","type":"tuple"},{"components":[{"internalType":"uint256","name":"closeFeeRate","type":"uint256"},{"internalType":"uint256","name":"openFeeRate","type":"uint256"},{"internalType":"uint256","name":"execFeeRate","type":"uint256"},{"internalType":"uint256","name":"liquidateFee","type":"uint256"},{"internalType":"uint256","name":"digits","type":"uint256"}],"internalType":"struct IMarketReader.FeeOuts","name":"feeOuts","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"address","name":"_market","type":"address"}],"name":"getPositions","outputs":[{"components":[{"internalType":"uint256","name":"size","type":"uint256"},{"internalType":"uint256","name":"collateral","type":"uint256"},{"internalType":"uint256","name":"averagePrice","type":"uint256"},{"internalType":"int256","name":"entryFundingRate","type":"int256"},{"internalType":"uint256","name":"realisedPnl","type":"uint256"},{"internalType":"bool","name":"hasProfit","type":"bool"},{"internalType":"uint256","name":"lastTime","type":"uint256"},{"internalType":"bool","name":"isLong","type":"bool"}],"internalType":"struct IMarketReader.PositionOuts[]","name":"_positions","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"}]}'),un=f(66115),tt=f.n(un),cn=JSON.parse('{"Mt":[{"inputs":[{"internalType":"string","name":"_name","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"key","type":"bytes32"},{"indexed":false,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"bool","name":"islong","type":"bool"}],"name":"CancelDecreaseOrderRef","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"uint256","name":"orderID","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"triggerPrice","type":"uint256"},{"indexed":false,"internalType":"bool","name":"isLong","type":"bool"}],"name":"UpdateDecreaseOrderRef","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"uint256","name":"orderID","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"triggerPrice","type":"uint256"},{"indexed":false,"internalType":"bool","name":"isLong","type":"bool"}],"name":"UpdateIncreaseOrderRef","type":"event"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ROLE_FACTORY","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ROLE_POS_KEEPER","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bool","name":"_isIncrease","type":"bool"},{"internalType":"uint256","name":"_orderID","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"cancelOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"collateralToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bool","name":"","type":"bool"}],"name":"decreaseCollateral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"components":[{"internalType":"uint8","name":"version","type":"uint8"},{"internalType":"uint32","name":"updatedAtBlock","type":"uint32"},{"internalType":"bool","name":"triggerAbove","type":"bool"},{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"collateral","type":"uint256"},{"internalType":"uint256","name":"size","type":"uint256"},{"internalType":"uint128","name":"price","type":"uint128"},{"internalType":"uint128","name":"priceExtra","type":"uint128"},{"internalType":"uint256","name":"orderID","type":"uint256"},{"internalType":"uint256","name":"extra0","type":"uint256"},{"internalType":"uint256","name":"extra1","type":"uint256"}],"internalType":"struct Order.Props","name":"","type":"tuple"},{"internalType":"bool","name":"","type":"bool"}],"name":"decreasePositionFromOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_isLimit","type":"bool"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"bool","name":"_isKeepLev","type":"bool"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bool","name":"_isExec","type":"bool"}],"name":"decreaseTrade","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_start","type":"uint256"},{"internalType":"uint256","name":"_end","type":"uint256"},{"internalType":"address","name":"_receiver","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bool","name":"_isIncrease","type":"bool"}],"name":"execOrders","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"feeRouter","outputs":[{"internalType":"contract IFeeRouter","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_collateralDelta","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"increaseCollateral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"components":[{"internalType":"uint8","name":"version","type":"uint8"},{"internalType":"uint32","name":"updatedAtBlock","type":"uint32"},{"internalType":"bool","name":"triggerAbove","type":"bool"},{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"collateral","type":"uint256"},{"internalType":"uint256","name":"size","type":"uint256"},{"internalType":"uint128","name":"price","type":"uint128"},{"internalType":"uint128","name":"priceExtra","type":"uint128"},{"internalType":"uint256","name":"orderID","type":"uint256"},{"internalType":"uint256","name":"extra0","type":"uint256"},{"internalType":"uint256","name":"extra1","type":"uint256"}],"internalType":"struct Order.Props","name":"order","type":"tuple"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"increasePositionFromOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_isLimit","type":"bool"},{"internalType":"uint256","name":"_payDelta","type":"uint256"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_tpPrice","type":"uint256"},{"internalType":"uint256","name":"_slPrice","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bool","name":"_isExec","type":"bool"}],"name":"increaseTrade","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"indexToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_positionBook","type":"address"},{"internalType":"contract IOrderBook","name":"_orderBookLong","type":"address"},{"internalType":"contract IOrderBook","name":"_orderBookShort","type":"address"},{"internalType":"address","name":"_addressProvider","type":"address"},{"internalType":"address","name":"_indexToken","type":"address"},{"internalType":"address","name":"_feeRouter","type":"address"},{"internalType":"address","name":"_feeVault","type":"address"},{"internalType":"address","name":"_marketRouter","type":"address"},{"internalType":"address","name":"_vault","type":"address"},{"internalType":"address","name":"_vaultRouter","type":"address"},{"internalType":"address","name":"_collateralToken","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"bool","name":"","type":"bool"}],"name":"liquidatePosition","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"marketAddressesProvider","outputs":[{"internalType":"contract IMarketAddressesProvider","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"orderBookLong","outputs":[{"internalType":"contract IOrderBook","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"orderBookShort","outputs":[{"internalType":"contract IOrderBook","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"positionBook","outputs":[{"internalType":"contract IPositionBook","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_p","type":"bool"}],"name":"setOpenDebug","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_spread","type":"uint256"}],"name":"setSpread","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"spread","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_orderID","type":"uint256"},{"internalType":"uint256","name":"_triggerPrice","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"updateDecreaseOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_orderID","type":"uint256"},{"internalType":"uint256","name":"_triggerPrice","type":"uint256"},{"internalType":"uint256","name":"_tpPrice","type":"uint256"},{"internalType":"uint256","name":"_slPrice","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"updateIncreaseOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"vault","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]}'),Dt=f(25122),At=9,Et=30,Rt="0.003",mn=function(r){ft()(t,r);var e=gt()(t);function t(n,i,l,d,c){var s;return vt()(this,t),s=e.call(this,n,i,cn.Mt),I()(tt()(s),"_args",void 0),I()(tt()(s),"_valid",void 0),I()(tt()(s),"_fee",void 0),I()(tt()(s),"_ctoken",void 0),s._args=l,s._valid=d,s._fee=c,s._ctoken=new Dt.a(l.collateralToken,s._library,void 0),s}return yt()(t,[{key:"getToken",value:function(){return this._ctoken}},{key:"getOpenFeeRate",value:function(){var i;return(i=this.formatFeeOrRate(this._fee.openFeeRate))!==null&&i!==void 0?i:Rt}},{key:"getCloseFeeRate",value:function(){var i;return(i=this.formatFeeOrRate(this._fee.closeFeeRate))!==null&&i!==void 0?i:Rt}},{key:"getExecFee",value:function(){return this.formatFeeOrRate(this._fee.execFeeRate)}},{key:"getSlippageDecimals",value:function(i){return parseValue(i,5)}},{key:"getFeeDecimals",value:function(i){return(0,F.Jl)(i,At)}},{key:"getNumDecimals",value:function(i){return parseValue(i,18)}},{key:"getPriceDecimals",value:function(i){return(0,F.Jl)(i,Et)}},{key:"formatPrice",value:function(i){return(0,F.dN)(i,Et)}},{key:"formatNum",value:function(i){return(0,F.dN)(i,18)}},{key:"formatFeeOrRate",value:function(i){return(0,F.dN)(i,At)}},{key:"allowance",value:function(){var n=B()(P()().mark(function l(d){return P()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.getToken().allowance(d,this._address);case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},l,this)}));function i(l){return n.apply(this,arguments)}return i}()},{key:"approve",value:function(){var n=B()(P()().mark(function l(d,c){var s,o;return P()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return s=new Dt.a(this._args.collateralToken,this._library,void 0),p.next=3,s.allowance(d,this._address);case 3:if(o=p.sent,console.log("[approve] allow",o.toString()),console.log("[approve] amount",c.toString()),!o.lt(c)){p.next=11;break}return console.log("[approve] approve token"),p.next=10,s.approve(this._address,c.mul(1e3));case 10:return p.abrupt("return",p.sent);case 11:return p.abrupt("return",!0);case 12:case"end":return p.stop()}},l,this)}));function i(l,d){return n.apply(this,arguments)}return i}()},{key:"increaseTrade",value:function(){var n=B()(P()().mark(function l(d){var c,s;return P()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.approve(d.account,d.sizeDelta);case 2:if(c=u.sent,!c){u.next=8;break}return u.next=6,this.send("increaseTrade",d.isLimit,d.payDelta,d.sizeDelta,d.price,d.tpPrice,d.slPrice,d.slippage,d.isLong,!1);case 6:return s=u.sent,u.abrupt("return",s);case 8:return u.abrupt("return",Promise.resolve(""));case 9:case"end":return u.stop()}},l,this)}));function i(l){return n.apply(this,arguments)}return i}()},{key:"decreaseTrade",value:function(){var n=B()(P()().mark(function l(d){var c;return P()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.send("decreaseTrade",d.isLimit,d.sizeDelta,d.isKeepLev,d.price,d.slippage,d.isLong,!1);case 2:return c=o.sent,o.abrupt("return",c);case 4:case"end":return o.stop()}},l,this)}));function i(l){return n.apply(this,arguments)}return i}()},{key:"increaseCollateral",value:function(){var n=B()(P()().mark(function l(d,c){var s;return P()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.send("increaseCollateral",d,c);case 2:return s=u.sent,u.abrupt("return",s);case 4:case"end":return u.stop()}},l,this)}));function i(l,d){return n.apply(this,arguments)}return i}()},{key:"decreaseCollateral",value:function(){var n=B()(P()().mark(function l(d,c){var s;return P()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.send("increaseCollateral",(0,F._b)(d),c);case 2:return s=u.sent,u.abrupt("return",s);case 4:case"end":return u.stop()}},l,this)}));function i(l,d){return n.apply(this,arguments)}return i}()},{key:"updateIncreaseOrder",value:function(){var n=B()(P()().mark(function l(d,c,s,o,u){var p;return P()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.send("updateIncreaseOrder",d,c,s,o,u);case 2:return p=g.sent,g.abrupt("return",p);case 4:case"end":return g.stop()}},l,this)}));function i(l,d,c,s,o){return n.apply(this,arguments)}return i}()},{key:"updateDecreaseOrder",value:function(){var n=B()(P()().mark(function l(d,c,s){var o;return P()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.send("updateDecreaseOrder",d,c,s);case 2:return o=p.sent,p.abrupt("return",o);case 4:case"end":return p.stop()}},l,this)}));function i(l,d,c){return n.apply(this,arguments)}return i}()},{key:"cancelOrder",value:function(){var n=B()(P()().mark(function l(d,c,s){var o;return P()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.send("cancelOrder",d,c,s);case 2:return o=p.sent,p.abrupt("return",o);case 4:case"end":return p.stop()}},l,this)}));function i(l,d,c){return n.apply(this,arguments)}return i}()}]),t}(ht.k),pn=function(r){ft()(t,r);var e=gt()(t);function t(n,i){return vt()(this,t),e.call(this,n,i,dn.Mt)}return yt()(t,[{key:"getMarket",value:function(){var n=B()(P()().mark(function l(d){var c,s;return P()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.call("getMarket",d);case 2:return c=u.sent,s=new mn(d,this._library,c.mktOuts,c.validOuts,c.feeOuts),u.abrupt("return",s);case 5:case"end":return u.stop()}},l,this)}));function i(l){return n.apply(this,arguments)}return i}()},{key:"getFundingRate",value:function(){var n=B()(P()().mark(function l(d){var c;return P()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.call("getFundingRate",d);case 2:return c=o.sent,console.log("getFundingRate  ",c.toString()),o.abrupt("return",c);case 5:case"end":return o.stop()}},l,this)}));function i(l){return n.apply(this,arguments)}return i}()},{key:"getFundingFee",value:function(){var n=B()(P()().mark(function l(d,c,s){var o;return P()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.call("getFundingFee",d,c,s);case 2:return o=p.sent,p.abrupt("return",o);case 4:case"end":return p.stop()}},l,this)}));function i(l,d,c){return n.apply(this,arguments)}return i}()},{key:"getPositions",value:function(){var n=B()(P()().mark(function l(d,c){var s;return P()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.call("getPositions",d,c);case 2:return s=u.sent,u.abrupt("return",s);case 4:case"end":return u.stop()}},l,this)}));function i(l,d){return n.apply(this,arguments)}return i}()},{key:"availableLiquidity",value:function(){var n=B()(P()().mark(function l(d,c){var s;return P()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.call("availableLiquidity",[c,d]);case 2:return s=u.sent,u.abrupt("return",s);case 4:case"end":return u.stop()}},l,this)}));function i(l,d){return n.apply(this,arguments)}return i}()}]),t}(ht.k),vn=function(){var r=B()(P()().mark(function e(t){var n,i,l,d,c,s,o=arguments;return P()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(n=o.length>1&&o[1]!==void 0?o[1]:"1.5",!(t.accountAddress==null||t.accountAddress=="")){p.next=3;break}return p.abrupt("return",[]);case 3:return p.next=5,t.reader.getPositions(t.accountAddress,t.market._address);case 5:return i=p.sent,(i==null||i.length==0)&&(i=bn()),l=t.openFeeRate,d=t.fundFeeRate,c=t.executionFee,s=[],i.forEach(function(_){s.push(yn(t,_,t.accountAddress,n,l,d,c))}),p.abrupt("return",s);case 13:case"end":return p.stop()}},e)}));return function(t){return r.apply(this,arguments)}}(),ui=null;function yn(r,e,t,n,i,l,d){var c=r.market;try{var s={account:t,isLong:e.isLong,size:c.formatNum(e.size),collateral:"0",averagePrice:c.formatPrice(e.averagePrice),fundingFee:c.formatFeeOrRate(e.fundingFee),realisedPnl:c.formatNum(e.realisedPnl),hasProfit:e.hasProfit,lastTime:e.lastTime,pair:r.marketName,side:e.isLong?"Long":"Short",leverage:"",netValue:"0",PNL:"0",PNLRate:"0",indexPrice:n,liqPrice:"0",initialCollateral:c.formatNum(e.collateral),fundFeeDay:"0",openCloseFees:"0",PNLAfterFees:"0",fundFee:c.formatFeeOrRate((e==null?void 0:e.fundFee)||"20")};return s.collateral=(0,S.O)(s.initialCollateral).minus(s.fundFee).toString(),s.leverage=s.collateral==="0"?"0X":(0,S.O)(s.size).dividedBy(s.collateral).toString()+"X",s.liqPrice=fn(s,d,n,i),gn(r,s,i,l),s}catch(o){console.log(o)}return{}}function fn(r,e,t,n){var i,l=r.fundFee,d=r.isLong,c=r.collateral,s=r.size,o=(0,S.O)(s).multipliedBy(n);return(i=ne.getNextLiqPrice({size:(0,S.O)(s),collateral:(0,S.O)(c),isLong:d,fundFee:(0,S.O)(l),executionFee:(0,S.O)(e),positionFee:(0,S.O)(o),entryPrice:(0,S.O)(t)}))===null||i===void 0?void 0:i.toFixed(2)}function gn(r,e,t,n){var i=(0,S.O)(e.collateral),l=(0,S.O)(e.indexPrice),d=(0,S.O)(e.averagePrice),c=(0,S.O)(e.size),s=(0,S.O)(e.isLong?1:-1).multipliedBy(l.minus(d)).multipliedBy(c).dividedBy(d),o=i.plus(s);e.PNLRate=s.div(i).toString(),e.netValue=o.toString(),hn(e,t,n,o)}function hn(r,e,t,n){var i=(0,S.O)(r.size),l=(0,S.O)(e),d=i.multipliedBy(l).multipliedBy(2);r.fundFeeDay=i.multipliedBy(t).multipliedBy(24).toString(),r.PNLAfterFees=n.minus(l).minus(d).toString(),r.openCloseFees=d.toString()}function bn(){return[{isLong:!0,size:(0,F._b)(3000.52),collateral:(0,F._b)(1500),averagePrice:(0,F._b)(130.32),fundingFee:(0,F._b)(12.3),realisedPnl:(0,F._b)(482.43),hasProfit:!0,lastTime:"2023-02-20",fundFee:(0,F._b)(23)},{isLong:!1,size:(0,F._b)(3000.52),collateral:(0,F._b)(1500),averagePrice:(0,F._b)(130.32),fundingFee:(0,F._b)(-12.3),realisedPnl:(0,F._b)(482.43),hasProfit:!1,lastTime:"2023-02-20",fundFee:(0,F._b)(23)}]}var xn=30,Pn=function(){var r=B()(P()().mark(function e(t,n,i,l,d,c){var s,o,u,p;return P()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return s=(0,et.u)(t,"MarketReader"),o=new pn(s,c),o.setChainId(t),g.next=5,o.getMarket(n);case 5:return u=g.sent,u.setChainId(t),p=se()(se()({},zt()),{},{accountAddress:l,reader:o,market:u,library:c,marketName:i}),g.next=10,Zt(p,d);case 10:return p=g.sent,console.log("[getDefaultSwap] result",p),g.abrupt("return",p);case 13:case"end":return g.stop()}},e)}));return function(t,n,i,l,d,c){return r.apply(this,arguments)}}();function zt(){return{accountAddress:"",isLimit:!1,isLong:!0,price:"0",amount:"0",size:"0",avlb:"0",pay:"0",leverage:"10",entryPrice:"0",liqPrice:"0",positionFee:"0",executionFee:"0",fundFeeRate:"0",availableLiquidity:"0",takeProfit:"0",stopLoss:"0",slippage:"0.003",openFeeRate:"0",closeFeeRate:"0",Positions:[],Orders:[],Trades:[]}}function Zt(r,e){return bt.apply(this,arguments)}function bt(){return bt=B()(P()().mark(function r(e,t){return P()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(e.entryPrice=t,!e.market){i.next=12;break}return e.openFeeRate=e.market.getOpenFeeRate(),e.closeFeeRate=e.market.getCloseFeeRate(),e.executionFee=e.market.getExecFee(),i.next=7,ne.getFundFeeRete(e);case 7:return e.fundFeeRate=i.sent,i.next=10,vn(e,t);case 10:e.Positions=i.sent,console.log("[getDefaultSwap] Positions",e.Positions);case 12:return i.abrupt("return",e);case 13:case"end":return i.stop()}},r)})),bt.apply(this,arguments)}var ne={changeAccount:function(){var r=B()(P()().mark(function t(n,i){var l;return P()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l=se()(se()({},zt()),{},{market:n.market,reader:n.reader,accountAddress:i,marketName:n.marketName}),c.next=3,Zt(l,n.entryPrice);case 3:return l=c.sent,c.abrupt("return",l);case 5:case"end":return c.stop()}},t)}));function e(t,n){return r.apply(this,arguments)}return e}(),getNextFeeRate:function(e,t){var n=(0,S.O)(e),i=(0,S.O)(1).dividedBy(t);return i.plus(n)},getExecFee:function(e){return(0,S.O)(e)},getNextFundFee:function(e){return B()(P()().mark(function t(){return P()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return","123");case 1:case"end":return i.stop()}},t)}))()},getFundFeeRete:function(e){return B()(P()().mark(function t(){return P()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=e.market,i.next=3,e.reader.getFundingRate(e.market._address);case 3:return i.t1=i.sent,i.abrupt("return",i.t0.formatFeeOrRate.call(i.t0,i.t1));case 5:case"end":return i.stop()}},t)}))()},getConfirmStat:function(e){var t=e.entryPrice,n=e.execFeeRate,i=e.fundFeeRete,l=e.pay,d=e.positionFeeRate,c=e.executionFee,s=e.size,o=e.leverageOption,u=e.existingPosition,p=e.hasExistingPosition,_=(0,S.O)(s),g=(0,S.O)(c||0);return{getCollateralDisplay:function(){var v=(0,S.O)(l),h=v.minus(_.multipliedBy((0,S.O)(d))).minus(g),b=h;return p&&u&&(b=h.minus((0,S.O)(u.fundingFee||0)).plus(v).minus(_.multipliedBy((0,S.O)(d||1))).minus(g)),{rise:b.minus(h).toNumber(),mergePositionPrice:b,pendingPositionPrice:h}},getLigPriceDisplay:function(v,h,b,w){var L=ne.getNextLiqPrice({size:(0,S.O)(s),collateral:this.getCollateralDisplay().mergePositionPrice,isLong:h,fundFee:i||(0,S.O)(0),executionFee:ne.getExecFee(n),positionFee:(0,S.O)(w),entryPrice:(0,S.O)(t),maxLeverage:v});return{rise:L.minus(b).toNumber(),pendingPositionPrice:b,mergePositionPrice:L}},getLeverageDisplay:function(){var v=(0,S.O)(o);if(!p)return{rise:0,pendingPositionPrice:v,mergePositionPrice:v};var h=this.getCollateralDisplay(),b=this.getPositionSizeDisplay(),w=b.mergePositionPrice.dividedBy(h.mergePositionPrice);return{rise:w.minus(v).toNumber(),pendingPositionPrice:v,mergePositionPrice:w}},getPositionSizeDisplay:function(){var v=(0,S.O)(p&&(u==null?void 0:u.size)||0),h=_.plus(v),b=u?v:h,w={pendingPositionPrice:b,mergePositionPrice:h,rise:h.minus(b).toNumber()};return w}}},getNextLiqPrice:function(e){var t=e.size,n=e.entryPrice,i=e.isLong,l=e.positionFee,d=e.maxLeverage,c=e.collateral,s=e.fundFee,o=e.executionFee,u=e.amount;console.log(" getNextLiqPrice size",t.toNumber()),console.log(" getNextLiqPrice entryPrice",t.toNumber()),console.log(" getNextLiqPrice positionFee",l.toNumber()),console.log(" getNextLiqPrice maxLeverage",d==null?void 0:d.toNumber()),console.log(" getNextLiqPrice fundFee",s.toNumber()),console.log(" getNextLiqPrice collateral",c.toNumber()),console.log(" getNextLiqPrice amount",u);var p=t.dividedBy(d!=null?d:xn),_=t.minus(c).plus(s).plus(l).plus(o).plus(p),g=t.minus(c).minus(s).minus(l).minus(o).minus(p);u!=null&&(_=_.minus(u),g=g.plus(u));var j=t.multipliedBy(n),v=i?_.dividedBy(j):g.dividedBy(j);return v},getNextPay:function(e,t,n,i){var l=(0,S.O)(e);return l.multipliedBy(ne.getNextFeeRate(n,i)).multipliedBy((0,S.O)(t))},getNextAmount:function(e,t,n,i){var l=(0,S.O)(e);return l.gt(0)?l.dividedBy(ne.getNextFeeRate(n,i)).dividedBy((0,S.O)(t)):(0,S.O)(0)},getNextSize:function(e,t,n){var i=(0,S.O)(e);return i.gt(0)?(0,S.O)(e).dividedBy(ne.getNextFeeRate(t,n)):(0,S.O)(0)},getNextPositionFee:function(e,t,n){return e.multipliedBy(ne.getNextFeeRate(t,n))}},Bt=f(74595),Gt=f(72603),_n={trade:"trade____bxq4"},ve=f(49808),xt=f(28797),Tn=f(1031),Qe={card:"card___tsQVf",header:"header___oEyWA",title:"title___CbLbp",right:"right___eKe78",switch:"switch___oG_5Z",table:"table___aXY5t",pnl:"pnl___CoW8t",pnlNegative:"pnlNegative___K9Zzk",side:"side___p341I"},In=function(e){var t=e.orders,n=e.infoTokens;console.log("MarkTrades",t);var i=(0,y.useState)(!1),l=M()(i,2),d=l[0],c=l[1],s=[{title:"Pair",width:150,render:function(u){var p=(0,Tn.z3)(n,u.indexToken),_=p.isWrapped?p.baseSymbol:p.symbol;return"".concat(_,"/USD")}},{title:"Side",dataIndex:"side",key:"side",render:function(){return(0,a.jsx)("div",{className:Qe.side,children:"Close Long"})}},{title:"Type",dataIndex:"type",key:"type",render:function(u){return u===k.sh?"Limit":"Trigger"}},{title:"Size",dataIndex:"size",key:"size"},{title:"Collateral",dataIndex:"collateral",key:"collateral"},{title:"Price",dataIndex:"price",key:"price"},{title:"PNL",render:function(u){return(u==null?void 0:u.PNL)>0?(0,a.jsx)("div",{className:Qe.pnl,children:"".concat(u==null?void 0:u.PNL,"(").concat(u==null?void 0:u.PNLpct,"%)")}):(0,a.jsx)("div",{className:Qe.pnlNegative,children:"".concat(u==null?void 0:u.PNL,"(").concat(u==null?void 0:u.PNLpct,"%)")})}},{title:"Time",dataIndex:"time",key:"time"},{title:"Status",dataIndex:"Status",key:"Status"}];return(0,a.jsx)("div",{className:Qe.card,children:(0,a.jsx)(xt.ZP,{className:Qe.table,data:t,columns:s})})},Sn=In,Nn=f(335),Pt={switch:"switch___V_gYU",rounded:"rounded___Q_7Ny",switchEnabled:"switchEnabled___Ca9FC"},wn=function(e){var t=e.checked,n=e.className,i=e.onChange;return(0,a.jsx)(Nn.r,{checked:t,className:H()(Pt.switch,I()({},Pt.switchEnabled,t),n),onChange:i,children:(0,a.jsx)("div",{className:Pt.rounded})})},Vt=wn,Je={card:"card___fdBku",header:"header___mYjMg",title:"title___DaWZ7",right:"right___VLVON",switch:"switch___JvgPx",table:"table___fNLlk",pnl:"pnl___pZIIu",side:"side___qR1Jt",editCancel:"editCancel___JKw0Q",edit:"edit___DUhY3"},jn=function(e){var t=e.orders,n=(0,y.useState)(!1),i=M()(n,2),l=i[0],d=i[1],c=[{title:"Pair",dataIndex:"pair",width:150,key:"pair"},{title:"Side",dataIndex:"side",key:"side"},{title:"Type",dataIndex:"type",key:"type"},{title:"Size",dataIndex:"size",key:"size"},{title:"Collateral",dataIndex:"collateral",key:"collateral"},{title:"Order Price",dataIndex:"orderPrice",key:"orderPrice"},{title:"Index Price",dataIndex:"IndexPrice",key:"IndexPrice"},{title:"TP/SL",render:function(o){return o!=null&&o.tp?(o==null?void 0:o.tp)+(o!=null&&o.sl?"/"+(o==null?void 0:o.sl):"--"):"--"}},{title:"Time",dataIndex:"time",key:"time"},{title:"Cancel ALL",render:function(){return(0,a.jsxs)("div",{className:Je.editCancel,children:[(0,a.jsx)("div",{className:Je.edit,children:"Edit"}),(0,a.jsx)("div",{className:Je.edit,children:"Cancel"})]})}}];return(0,a.jsx)("div",{className:Je.card,children:(0,a.jsx)(xt.ZP,{className:Je.table,data:t,columns:c})})},Mn=jn,Cn=f(62250),Ln=Object.defineProperty,Ht=Object.getOwnPropertySymbols,kn=Object.prototype.hasOwnProperty,Fn=Object.prototype.propertyIsEnumerable,Wt=(r,e,t)=>e in r?Ln(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,On=(r,e)=>{for(var t in e||(e={}))kn.call(e,t)&&Wt(r,t,e[t]);if(Ht)for(var t of Ht(e))Fn.call(e,t)&&Wt(r,t,e[t]);return r};const Dn=r=>y.createElement("svg",On({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),y.createElement("path",{d:"M11 6a1 1 0 1 0 2 0 1 1 0 0 0-2 0ZM11 12a1 1 0 1 0 2 0 1 1 0 0 0-2 0ZM11 18a1 1 0 1 0 2 0 1 1 0 0 0-2 0Z",fill:"#fff"}),y.createElement("path",{d:"M11 6a1 1 0 1 0 2 0 1 1 0 0 0-2 0ZM11 12a1 1 0 1 0 2 0 1 1 0 0 0-2 0ZM11 18a1 1 0 1 0 2 0 1 1 0 0 0-2 0Z",stroke:"#fff"}));var ci="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTExIDZhMSAxIDAgMSAwIDIgMCAxIDEgMCAwIDAtMiAwWk0xMSAxMmExIDEgMCAxIDAgMiAwIDEgMSAwIDAgMC0yIDBaTTExIDE4YTEgMSAwIDEgMCAyIDAgMSAxIDAgMCAwLTIgMFoiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNMTEgNmExIDEgMCAxIDAgMiAwIDEgMSAwIDAgMC0yIDBaTTExIDEyYTEgMSAwIDEgMCAyIDAgMSAxIDAgMCAwLTIgMFpNMTEgMThhMSAxIDAgMSAwIDIgMCAxIDEgMCAwIDAtMiAwWiIgc3Ryb2tlPSIjZmZmIi8+PC9zdmc+",Q={table:"table___O0oos",orderPanel:"orderPanel___weQ4q",tabList:"tabList___iDvkP",tabItem:"tabItem___UJec7",selected:"selected___lGODG",header:"header___Y18Vk",right:"right___ExK0Y",switch:"switch___yJrUb",card:"card___XRXfM",field:"field___FpNrg",title:"title___yYuon",proportion:"proportion___QGANZ",label:"label___SMjK4",value:"value___uc2J5",btns:"btns___hXniu",btn:"btn___pQpOE",position:"position___w7OYz",pos:"pos___p0qaQ",long:"long___FKFu2",short:"short___HopEm",positive:"positive___ff65M",muted:"muted___r5n5R",loadingIcon:"loadingIcon___pK2VX","spin-animation":"spin-animation___ZnGWk",options:"options___iGkMe",closeBtn:"closeBtn___vbPJq",moreIcon:"moreIcon___LxjYg",dropdown:"dropdown___DFroc"},De=f(70794),mi=function(e,t,n){var i=_objectSpread(_objectSpread({},e),{},{isDeposit:t,max:e.collateral,newCollateral:0,newLeverage:"",newLiqPrice:0});return i.newCollateral=t?e.collateral+n:e.collateral-n,i.newLeverage=(e.size/i.newCollateral).toString()+"X",i},An=function(e,t,n,i,l){return l?n?l.increaseCollateral(e,t,i,n):l.decreaseCollateral(i,n):Promise.resolve("confirmEditCollateral failed")},Ut=f(69499),at=f(26977),W={table:"table___O1XQH",submitBtn:"submitBtn___GOq9M",orderPanel:"orderPanel___UpOZv",tabList:"tabList___Ynh2Z",tabItem:"tabItem___mxzqS",selected:"selected___hpXfr",fields:"fields___jqoiL",field:"field___gznn3",title:"title___cDyBA",label:"label___d6Gje",value:"value___VUuPy",modal:"modal___yrezj","ant-modal-content":"ant-modal-content___YHsA0"},En=function(e){var t=e.isVisible,n=e.setIsVisible,i=e.args,l=i===void 0?{}:i,d=e.market,c=l.size,s=c===void 0?"2000":c,o=l.collateral,u=o===void 0?"200":o,p=l.leverage,_=p===void 0?"10":p,g=l.fundFee,j=g===void 0?"20":g,v=l.indexPrice,h=v===void 0?"200":v,b=l.liqPrice,w=b===void 0?"0.001":b,L=(0,y.useState)(0),m=M()(L,2),C=m[0],A=m[1],J=(0,y.useState)(""),K=M()(J,2),T=K[0],ce=K[1],ae=(0,Ee.Ge)(),ie=ae.active,X=ae.account,ye=ae.chainId,Pe=ye===void 0?5:ye,$=(0,y.useState)(!1),re=M()($,2),Ne=re[0],O=re[1],q="Deposit",D="Withdraw",N=0;function Ae(R){var G="ing",Y="";if(T)C==N?Y=q:Y=D;else return"Enter an amount";return R&&(Y+=G),Y}var ee=function(){return C===N?q:D},Le=function(){ce(Te)},_e=function(G){var Y=C===N?"plus":"minus";return new De.Z(u).minus(new De.Z(j))[Y](+G).toString()},fe=(0,y.useMemo)(function(){var R,G=T?_e(T):"",Y=T?new De.Z(s).dividedBy(new De.Z(G)).toString():"",te=T?"0":j,Ie=T?ne.getNextLiqPrice(se()(se()({},l),{},{size:new De.Z(s)})).toString():"",z=C!==N?new De.Z(u).minus(new De.Z(j)).minus(new De.Z(s).dividedBy(10)).toString():(R=e.tradeShowArgs)===null||R===void 0?void 0:R.avlb;return{nextCollateral:G,nextLeverage:Y,nextFund:te,nextLiqPrice:Ie,nextAvlb:z}},[T,C]),oe=fe.nextCollateral,ge=fe.nextLeverage,Re=fe.nextFund,Ve=fe.nextLiqPrice,Te=fe.nextAvlb,he=function(G,Y,te){return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:W.field,children:[(0,a.jsx)("div",{className:W.label,children:G}),(0,a.jsx)("div",{className:W.value,children:Y||"-"}),te&&!Number.isNaN(te)&&(0,a.jsxs)("div",{className:W.value,children:[(0,a.jsx)("span",{children:"->"}),te]})]})})};return(0,a.jsx)("div",{className:W.modal,children:(0,a.jsxs)(Ut.Z,{title:"Edit Collateral",onClose:function(){return n(!1)},visible:t,width:512,children:[(0,a.jsx)(ve.O.Group,{defaultIndex:C,onChange:function(G){A(G)},children:(0,a.jsx)("div",{className:W.header,children:(0,a.jsxs)(ve.O.List,{className:W.tabList,children:[(0,a.jsx)(ve.O,{className:function(G){var Y=G.selected;return H()(W.tabItem,I()({},W.selected,Y))},children:q}),(0,a.jsx)(ve.O,{className:function(G){var Y=G.selected;return H()(W.tabItem,I()({},W.selected,Y))},children:"Withdraw"})]})})}),(0,a.jsx)(at.gp,{onClickMaxBtn:Le,value:T,onChange:function(G){ce(G)}}),(0,a.jsxs)("div",{className:W.fields,children:[(0,a.jsxs)("div",{className:W.field,children:[(0,a.jsx)("div",{className:W.label,children:ee()}),(0,a.jsx)("div",{className:W.value,children:T}),(0,a.jsx)("div",{className:W.label,children:"AVlb"}),(0,a.jsx)("div",{className:W.value,children:Te})]}),(0,a.jsxs)("div",{className:W.field,children:[(0,a.jsx)("div",{className:W.label,children:"Enter Price"}),(0,a.jsx)("div",{className:W.value})]}),he("Collateral",u,oe),he("Leverage",_,ge),he("Fund Fee",j,Re),(0,a.jsxs)("div",{className:W.field,children:[(0,a.jsx)("div",{className:W.label,children:"Index Price"}),(0,a.jsx)("div",{className:W.value,children:h||"-"})]}),he("Liq. Price",w,Ve)]}),(0,a.jsx)("button",{className:W.submitBtn,disabled:Ne,onClick:function(){!ie||!X||(O(!0),An(Pe,X,C===0,T,d).then(function(G){n(!1)}).catch(function(G){return console.log("confirm",G)}).finally(function(){O(!1)}))},children:Ae(Ne)})]})})},Rn=En,zn=function(e){var t=e.handleSelectMarket,n=e.handleEditCollateral,i=e.handleShare,l=[{key:"1",label:(0,a.jsx)("span",{onClick:n,children:"Edit Collateral"})},{key:"2",label:(0,a.jsx)("span",{onClick:t,children:"Select Market"})},{key:"3",label:(0,a.jsx)("a",{onClick:i,children:"Share Position"})}];return(0,a.jsx)(Cn.Z,{overlayClassName:Q.dropdown,placement:"bottom",trigger:["click"],menu:{items:l},children:(0,a.jsx)(Dn,{className:Q.moreIcon})})},Zn=function(e){var t=e.positions,n=e.showPnlAfterFees,i=e.market,l=(0,Ee.Ge)(),d=l.active,c=l.account,s=l.library,o=(0,y.useState)(),u=M()(o,2),p=u[0],_=u[1],g=(0,y.useState)(!1),j=M()(g,2),v=j[0],h=j[1],b=function(A,J,K){h(!0),_(J)},w=function(){},L=function(){},m=[{title:"Position",render:function(A){var J;return(0,a.jsxs)("div",{className:Q.position,children:[(0,a.jsx)("div",{children:A.pair}),(0,a.jsx)("div",{children:A==null?void 0:A.leverage}),(0,a.jsx)("div",{className:H()(Q.pos,(J={},I()(J,Q.long,A.isLong),I()(J,Q.short,!A.isLong),J)),children:A.isLong?"Long":"Short"})]})}},{title:"Size",dataIndex:"size",key:"size"},{title:"Collateral",dataIndex:"collateral",key:"collateral",render:function(A){return(0,a.jsx)(a.Fragment,{children:A})}},{title:"NetValue",dataIndex:"netValue"},{title:"Enter Price",dataIndex:"averagePrice",key:"averagePrice"},{title:"Index Price",dataIndex:"indexPrice",key:"indexPrice"},{title:"Liq. Price",dataIndex:"liqPrice"},{width:120,title:"",render:function(A){return(0,a.jsxs)("div",{className:Q.options,children:[(0,a.jsx)("div",{className:Q.closeBtn,children:"Close"}),(0,a.jsx)(zn,{args:A,handleEditCollateral:function(){return b(c,A,i)},handleSelectMarket:w,handleShare:L})]})}}];return(0,a.jsxs)(a.Fragment,{children:[v&&(0,a.jsx)(Rn,{isVisible:v,setIsVisible:h,args:p,market:i,tradeShowArgs:e.tradeShowArgs}),(0,a.jsx)("div",{className:Q.card,children:(0,a.jsx)(xt.ZP,{emptyText:"No open positions",className:Q.table,columns:m,data:t})})]})},Bn=Zn,Gn=function(e){var t=e.market,n=e.positions,i=e.orders,l=e.trades,d=l===void 0?[]:l,c=e.infoTokens,s=c===void 0?{"0x0000000000000000000000000000000000000000":{isWrapped:!0,symbol:"WETH",baseSymbol:"ETH"}}:c,o=e.showPnlAfterFees,u=(0,y.useState)(0),p=M()(u,2),_=p[0],g=p[1],j=(0,y.useState)(!1),v=M()(j,2),h=v[0],b=v[1];return(0,a.jsx)("div",{className:Q.orderPanel,children:(0,a.jsxs)(ve.O.Group,{defaultIndex:_,onChange:function(L){g(L)},children:[(0,a.jsxs)("div",{className:Q.header,children:[(0,a.jsxs)(ve.O.List,{className:Q.tabList,children:[(0,a.jsxs)(ve.O,{className:function(L){var m=L.selected;return H()(Q.tabItem,I()({},Q.selected,m))},children:["Positions (",(n||[]).length,")"]}),(0,a.jsxs)(ve.O,{className:function(L){var m=L.selected;return H()(Q.tabItem,I()({},Q.selected,m))},children:["Orders (",(i||[]).length,")"]}),(0,a.jsxs)(ve.O,{className:function(L){var m=L.selected;return H()(Q.tabItem,I()({},Q.selected,m))},children:["Trades (",(d||[]).length,")"]})]}),(0,a.jsxs)("div",{className:Q.right,children:[(0,a.jsx)(we._H,{id:"Hide Other Pairs"}),(0,a.jsx)(Vt,{className:Q.switch,checked:h,onChange:b})]})]}),(0,a.jsxs)(ve.O.Panels,{children:[(0,a.jsx)(ve.O.Panel,{children:(0,a.jsx)(Bn,{showPnlAfterFees:o,positions:n,market:t,tradeShowArgs:e.tradeShowArgs})}),(0,a.jsx)(ve.O.Panel,{children:(0,a.jsx)(Mn,{orders:i})}),(0,a.jsx)(ve.O.Panel,{children:(0,a.jsx)(Sn,{infoTokens:s,orders:d})})]})]})})},Vn=Gn,Hn=Object.defineProperty,Yt=Object.getOwnPropertySymbols,Wn=Object.prototype.hasOwnProperty,Un=Object.prototype.propertyIsEnumerable,Qt=(r,e,t)=>e in r?Hn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Yn=(r,e)=>{for(var t in e||(e={}))Wn.call(e,t)&&Qt(r,t,e[t]);if(Yt)for(var t of Yt(e))Un.call(e,t)&&Qt(r,t,e[t]);return r};const Qn=r=>y.createElement("svg",Yn({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),y.createElement("path",{d:"m3 6 5 5 5-5",stroke:"#9597B5",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}));var pi="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTMgNiA1IDUgNS01IiBzdHJva2U9IiM5NTk3QjUiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+",Jn=Object.defineProperty,Jt=Object.getOwnPropertySymbols,$n=Object.prototype.hasOwnProperty,Xn=Object.prototype.propertyIsEnumerable,$t=(r,e,t)=>e in r?Jn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Kn=(r,e)=>{for(var t in e||(e={}))$n.call(e,t)&&$t(r,t,e[t]);if(Jt)for(var t of Jt(e))Xn.call(e,t)&&$t(r,t,e[t]);return r};const _t=r=>y.createElement("svg",Kn({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm.7-9V4.6H7.3V6h1.4Zm0 6V7.467H7.3V12h1.4Z",fill:"#797B96"}));var vi="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04IDE1QTcgNyAwIDEgMCA4IDFhNyA3IDAgMCAwIDAgMTRabS43LTlWNC42SDcuM1Y2aDEuNFptMCA2VjcuNDY3SDcuM1YxMmgxLjRaIiBmaWxsPSIjNzk3Qjk2Ii8+PC9zdmc+",qn=Object.defineProperty,Xt=Object.getOwnPropertySymbols,er=Object.prototype.hasOwnProperty,tr=Object.prototype.propertyIsEnumerable,Kt=(r,e,t)=>e in r?qn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ar=(r,e)=>{for(var t in e||(e={}))er.call(e,t)&&Kt(r,t,e[t]);if(Xt)for(var t of Xt(e))tr.call(e,t)&&Kt(r,t,e[t]);return r};const nr=r=>y.createElement("svg",ar({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),y.createElement("path",{d:"m11.2 6-3.223 4.8L4.8 6h6.4Z",fill:"#fff"}));var yi="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTExLjIgNi0zLjIyMyA0LjhMNC44IDZoNi40WiIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg==",nt={dropdown:"dropdown___EBG2d",selected:"selected___gGWfx",menus:"menus___BUMXw",menu:"menu___nEUSk"},rr=[{label:"25%",value:25},{label:"50%",value:50},{label:"100%",value:100},{label:"200%",value:200},{label:"900%",value:900},{label:"Price",value:"p"}],ir=function(e){var t=e.className;return(0,a.jsx)("div",{className:H()(nt.dropdown,t),children:(0,a.jsxs)(Fe.v,{children:[(0,a.jsxs)(Fe.v.Button,{className:nt.selected,children:["None",(0,a.jsx)(nr,{})]}),(0,a.jsx)(Fe.v.Items,{className:nt.menus,children:(rr||[]).map(function(n){return(0,a.jsx)(Fe.v.Item,{children:function(){return(0,a.jsx)("div",{className:H()(nt.menu),children:n.label})}},n.value)})})]})})},sr=ir,lr=f(92419),or=function(e){return(0,a.jsx)(lr.Z,se()(se()({},e),{},{getTooltipContainer:function(){return document.getElementById("root")}}))},Tt=or,E={advanced:"advanced___MBdTe",header:"header___ifyUh",collectIcon:"collectIcon___x8hbZ",collectedIcon:"collectedIcon___dhQWJ",item:"item___oTlSJ",count:"count___RZcWR",flex:"flex___RaHI3",label:"label___E6FRI",questionIcon:"questionIcon___bN9mo",overlay:"overlay___eaqfY",dropdown:"dropdown___itkxP",panel:"panel____HyG6",openPanel:"openPanel___unKQ2"},dr=function(){var e=(0,y.useState)(!1),t=M()(e,2),n=t[0],i=t[1];return(0,a.jsxs)("div",{className:E.advanced,children:[(0,a.jsxs)("div",{className:E.header,onClick:function(){i(function(d){return!d})},children:[(0,a.jsx)("div",{className:E.title,children:"Advanced"}),(0,a.jsx)(Qn,{className:H()(E.collectIcon,I()({},E.collectedIcon,n))})]}),(0,a.jsxs)("div",{className:H()(E.panel,I()({},E.openPanel,n)),children:[(0,a.jsxs)("div",{className:E.item,children:[(0,a.jsxs)("div",{className:E.flex,children:[(0,a.jsx)("div",{className:E.label,children:"Stop Loss"}),(0,a.jsx)(Tt,{placement:"top",overlay:(0,a.jsxs)("div",{className:E.overlay,children:[`Your trade will be liquidated at the Stop Loss price, after putting Stop Loss.
                      If you don't put any Stop Loss, your trade will be liquidated if it is at <= -90% PnL.`," "]}),children:(0,a.jsx)(_t,{className:E.questionIcon})})]}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:E.count,children:"1123"})})]}),(0,a.jsxs)("div",{className:E.item,children:[(0,a.jsxs)("div",{className:E.flex,children:[(0,a.jsx)("div",{className:E.label,children:"Take profit"}),(0,a.jsx)(Tt,{placement:"top",overlay:(0,a.jsxs)("div",{className:E.overlay,children:[`Your trade will be liquidated at the Stop Loss price, after putting Stop Loss.
                      If you don't put any Stop Loss, your trade will be liquidated if it is at <= -90% PnL.`," "]}),children:(0,a.jsx)(_t,{className:E.questionIcon})})]}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:E.count,children:"1123"})})]}),(0,a.jsxs)("div",{className:E.item,children:[(0,a.jsxs)("div",{className:E.flex,children:[(0,a.jsx)("div",{className:E.label,children:"Slippage"}),(0,a.jsx)(Tt,{placement:"top",overlay:(0,a.jsxs)("div",{className:E.overlay,children:[`Your trade will be liquidated at the Stop Loss price, after putting Stop Loss.
                      If you don't put any Stop Loss, your trade will be liquidated if it is at <= -90% PnL.`," "]}),children:(0,a.jsx)(_t,{className:E.questionIcon})})]}),(0,a.jsxs)("div",{className:E.flex,children:[(0,a.jsx)("div",{className:E.count,children:"1123"}),(0,a.jsx)(sr,{className:E.dropdown})]})]})]})]})},ur=dr,cr=Object.defineProperty,qt=Object.getOwnPropertySymbols,mr=Object.prototype.hasOwnProperty,pr=Object.prototype.propertyIsEnumerable,ea=(r,e,t)=>e in r?cr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,vr=(r,e)=>{for(var t in e||(e={}))mr.call(e,t)&&ea(r,t,e[t]);if(qt)for(var t of qt(e))pr.call(e,t)&&ea(r,t,e[t]);return r};const It=r=>y.createElement("svg",vr({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),y.createElement("path",{d:"M7.652 12h2.319L13.5 8 9.97 4H7.653l2.795 3.234H2.5v1.532h7.947L7.652 12Z",fill:"#3DDB7C"}));var fi="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTcuNjUyIDEyaDIuMzE5TDEzLjUgOCA5Ljk3IDRINy42NTNsMi43OTUgMy4yMzRIMi41djEuNTMyaDcuOTQ3TDcuNjUyIDEyWiIgZmlsbD0iIzNEREI3QyIvPjwvc3ZnPg==",x={arrowIcon:"arrowIcon___iG0uS",red:"red___cXHfH",header:"header___hkqkP",tip:"tip___F0_el",title:"title___FCH8V",titleLabel:"titleLabel___EWjyx",changeInfo:"changeInfo___rSff6",fields:"fields___x3gUc",field:"field___qxsTj",label:"label___J7n5A",value:"value___m6nh9",old:"old___CU5un",new:"new___dIyoY",cut:"cut___T5uNM",submitBtn:"submitBtn___aBHIR"},St=2,yr=function(e){var t,n,i,l=e.liqPriceDisplay,d=e.positionFee,c=e.collateralDisplay,s=e.entryPrice,o=e.leverageDisplay,u=e.positionSizeDisplay,p=e.tradeShowArgs,_=e.fundingFee,g=e.existingPosition,j=e.hasExistingPosition,v=e.marketSelection,h=e.isPendingConfirmation,b=e.isMarketOrder,w=e.isLong,L=e.fromValue,m=e.toAmount,C=e.toSymbol,A=e.visible,J=e.isSubmitting,K=e.onClickSubmit,T=e.onClose,ce=(t=(0,F.H2)((p==null||(n=p.market)===null||n===void 0||(i=n._args)===null||i===void 0?void 0:i.spread)||0,10))===null||t===void 0?void 0:t.toNumber(),ae=(p==null?void 0:p.slippage)||0,ie=function(){return b?ye?"Confirm Swap":w?"Confirm Long":"Confirm Short":"Confirm Limit Order"},X=ie();console.log("existingPosition",g);var ye=!1,Pe=function(){return!1},$=function(){},re=function(){if(!h){var D=Pe();if(D)return D;if(ye)return X;var N=b?w?"Long":"Short":"Create Order";return b&&k.bD>0?"Accept minimum and ".concat(N):N}return b?ye?"Swapping...":w?"Longing...":"Shorting...":"Creating Order..."},Ne=[{label:"Position Size",display:u},{label:"Leverage",display:o},{label:"Collateral",display:c}],O=(0,y.useMemo)(function(){return(0,F.dN)(_,18,2)},[_]);return(0,a.jsx)(Ut.Z,{width:512,onClose:T,visible:A,children:(0,a.jsxs)("div",{className:x.wrapper,children:[(0,a.jsxs)("div",{className:x.header,children:[(0,a.jsxs)("div",{className:x.title,children:[(0,a.jsx)("img",{src:wt.Z}),(0,a.jsxs)("div",{className:x.titleLabel,children:[v==null?void 0:v.name," ",w?"LONG":"SHORT"]})]}),(0,a.jsxs)("div",{className:x.changeInfo,children:[(0,a.jsxs)("div",{children:["Pay ",L," USDC ($",L,")"]}),(0,a.jsx)(It,{className:x.arrowIcon}),(0,a.jsx)("div",{children:"".concat((0,F.dN)(m,18,4,!0)," ").concat(C)})]})]}),j&&(0,a.jsx)("div",{className:x.tip,children:"You already have an long position that will increase the size of an existing position."}),(0,a.jsxs)("div",{className:x.fields,children:[(Ne||[]).map(function(q){var D=q.display,N=q.label;return(0,a.jsxs)("div",{className:x.field,children:[(0,a.jsx)("div",{className:x.label,children:(0,a.jsx)(we._H,{id:N})}),(0,a.jsx)("div",{className:x.value,children:(D==null?void 0:D.rise)===0?(0,a.jsx)("div",{className:x.new,children:D==null?void 0:D.mergePositionPrice.toFixed(St)}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:x.old,children:[D==null?void 0:D.pendingPositionPrice.toFixed(St)," "]}),(0,a.jsx)(It,{className:H()(x.arrowIcon,I()({},x.red,((D==null?void 0:D.rise)||0)>0))}),(0,a.jsx)("div",{className:x.new,children:D==null?void 0:D.mergePositionPrice.toFixed(St)})]})})]},N)}),(0,a.jsxs)("div",{className:x.field,children:[(0,a.jsx)("div",{className:x.label,children:(0,a.jsx)(we._H,{id:"Position Fee"})}),(0,a.jsx)("div",{className:x.value,children:(0,a.jsxs)("div",{className:x.new,children:["$",d]})})]}),(0,a.jsxs)("div",{className:x.field,children:[(0,a.jsx)("div",{className:x.label,children:(0,a.jsx)(we._H,{id:"Fund Fee"})}),(0,a.jsx)("div",{className:x.value,children:(0,a.jsx)("div",{className:x.new,children:"".concat(O||0,"/1 h")})})]}),(0,a.jsx)("div",{className:x.cut}),(0,a.jsxs)("div",{className:x.field,children:[(0,a.jsx)("div",{className:x.label,children:(0,a.jsx)(we._H,{id:"Enter Price"})}),(0,a.jsx)("div",{className:x.value,children:(0,a.jsxs)("div",{className:x.new,children:["$",s]})})]}),(0,a.jsxs)("div",{className:x.field,children:[(0,a.jsx)("div",{className:x.label,children:(0,a.jsx)(we._H,{id:"Liq. Price"})}),(0,a.jsx)("div",{className:x.value,children:(l==null?void 0:l.rise)===0?(0,a.jsx)("div",{className:x.new,children:l==null?void 0:l.mergePositionPrice.toFixed(qe.rU)}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:x.old,children:[l==null?void 0:l.pendingPositionPrice.toFixed(qe.rU)," "]}),(0,a.jsx)(It,{className:H()(x.arrowIcon,I()({},x.red,((l==null?void 0:l.rise)||0)>0))}),(0,a.jsx)("div",{className:x.new,children:l==null?void 0:l.mergePositionPrice.toFixed(qe.rU)})]})})]}),(0,a.jsx)("div",{className:x.cut}),(0,a.jsxs)("div",{className:x.field,children:[(0,a.jsx)("div",{className:x.label,children:(0,a.jsx)(we._H,{id:"Type"})}),(0,a.jsx)("div",{className:x.value,children:(0,a.jsx)("div",{className:x.new,children:b?"Market":"Limit"})})]}),(0,a.jsxs)("div",{className:x.field,children:[(0,a.jsx)("div",{className:x.label,children:(0,a.jsx)(we._H,{id:"Spread"})}),(0,a.jsx)("div",{className:x.value,children:(0,a.jsxs)("div",{className:x.new,children:[ce,"%"]})})]}),(0,a.jsxs)("div",{className:x.field,children:[(0,a.jsx)("div",{className:x.label,children:(0,a.jsx)(we._H,{id:"Slippage"})}),(0,a.jsx)("div",{className:x.value,children:(0,a.jsxs)("div",{className:x.new,children:[ae,"%"]})})]})]}),(0,a.jsx)("button",{type:"button",className:x.submitBtn,onClick:K,children:re()})]})})},fr=yr,gr=f(15560),gi=f(39843),xe={header:"header___TC62F",field:"field___SKQvO",value:"value___ZPyQn",leverage:"leverage___DJlMu",multiple:"multiple___TgITL",custom:"custom___ruUKr",customInput:"customInput___vG08t",item:"item___kY23e",active:"active___NJOgJ",sliderBox:"sliderBox___OugRQ",slider:"slider___JsDOm"},hr=[10,20,50,100],br={2:"2x",100:"100x"},xr=function(e){var t=e.onChange,n=(0,y.useState)(!1),i=M()(n,2),l=i[0],d=i[1],c=(0,y.useMemo)(function(){try{return parseFloat("".concat(e.value||2))}catch(s){return 1}},[e.value]);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:xe.header,children:[(0,a.jsxs)("div",{className:xe.field,children:[(0,a.jsx)("div",{className:xe.label,children:"Leverage: "}),(0,a.jsxs)("div",{className:xe.value,children:[c,"x"]})]}),(0,a.jsx)(Vt,{checked:l,onChange:d})]}),l?(0,a.jsx)("div",{className:xe.sliderBox,children:(0,a.jsx)(gr.Z,{value:c,onChange:function(o){return t(o)},className:xe.slider,min:2,max:100,marks:br,step:.1})}):(0,a.jsxs)("div",{className:xe.leverage,children:[(0,a.jsx)("div",{className:xe.custom,children:(0,a.jsx)("input",{value:c,min:2,max:100,onChange:function(o){var u=Number(o.target.value);u<2&&(u=2),u>100&&(u=100),t(u)},className:xe.customInput,type:"number"})}),(0,a.jsx)("div",{className:xe.multiple,children:hr.map(function(s){return(0,a.jsx)("div",{onClick:function(){t(s)},className:H()(xe.item,I()({},xe.active,s===Number(c))),children:"".concat(s,"x")},s)})})]})]})},Pr=xr,_r=function(e,t,n,i){if(n.market){var l={isLimit:n.isLimit,payDelta:n.market.getNumDecimals(n.pay),sizeDelta:n.market.getNumDecimals(n.size),price:n.market.getPriceDecimals(n.price),tpPrice:n.market.getPriceDecimals(n.takeProfit),slPrice:n.market.getPriceDecimals(n.stopLoss),slippage:n.market.getSlippageDecimals(n.slippage),isLong:n.isLong,isExec:!1,isKeepLev:!1,account:t};return console.log("[confirmSwap]  ",l),n.market.setChainId(e),n.market.setPendingTxns(i),n.market.increaseTrade(l)}return Promise.reject()},Tr=Object.defineProperty,ta=Object.getOwnPropertySymbols,Ir=Object.prototype.hasOwnProperty,Sr=Object.prototype.propertyIsEnumerable,aa=(r,e,t)=>e in r?Tr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Nr=(r,e)=>{for(var t in e||(e={}))Ir.call(e,t)&&aa(r,t,e[t]);if(ta)for(var t of ta(e))Sr.call(e,t)&&aa(r,t,e[t]);return r};const wr=r=>y.createElement("svg",Nr({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),y.createElement("path",{d:"m10 12.586 4-4 5.707 5.707L22 12v6h-6l2.293-2.293L14 11.414l-4 4-7.707-7.707 1.414-1.414L10 12.586Z",fill:"#F44364"}));var hi="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTEwIDEyLjU4NiA0LTQgNS43MDcgNS43MDdMMjIgMTJ2NmgtNmwyLjI5My0yLjI5M0wxNCAxMS40MTRsLTQgNC03LjcwNy03LjcwNyAxLjQxNC0xLjQxNEwxMCAxMi41ODZaIiBmaWxsPSIjRjQ0MzY0Ii8+PC9zdmc+",jr=Object.defineProperty,na=Object.getOwnPropertySymbols,Mr=Object.prototype.hasOwnProperty,Cr=Object.prototype.propertyIsEnumerable,ra=(r,e,t)=>e in r?jr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Lr=(r,e)=>{for(var t in e||(e={}))Mr.call(e,t)&&ra(r,t,e[t]);if(na)for(var t of na(e))Cr.call(e,t)&&ra(r,t,e[t]);return r};const kr=r=>y.createElement("svg",Lr({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),y.createElement("path",{d:"m10 12.414 4 4 5.707-5.707L22 13V7h-6l2.293 2.293L14 13.586l-4-4-7.707 7.707 1.414 1.414L10 12.414Z",fill:"#fff"}));var bi="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTEwIDEyLjQxNCA0IDQgNS43MDctNS43MDdMMjIgMTNWN2gtNmwyLjI5MyAyLjI5M0wxNCAxMy41ODZsLTQtNC03LjcwNyA3LjcwNyAxLjQxNCAxLjQxNEwxMCAxMi40MTRaIiBmaWxsPSIjZmZmIi8+PC9zdmc+",le={field:"field___lFCUO",label:"label___Ut9cW",value:"value___TeWjD"},Fr=function(e){var t=e.liqPrice,n=e.fundingFee,i=e.availableLiquidity,l=e.nextAveragePrice,d=e.positionFee,c=e.entryPrice,s=(0,y.useMemo)(function(){return(0,F.dN)(n,18,2)},[n]);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:le.field,children:[(0,a.jsx)("div",{className:le.label,children:"Enter Price"}),(0,a.jsxs)("div",{className:le.value,children:["$",c]})]}),(0,a.jsxs)("div",{className:le.field,children:[(0,a.jsx)("div",{className:le.label,children:"Liq. Price"}),(0,a.jsxs)("div",{className:le.value,children:["$",t||"-"]})]}),(0,a.jsxs)("div",{className:le.field,children:[(0,a.jsx)("div",{className:le.label,children:"Position Fee"}),(0,a.jsxs)("div",{className:le.value,children:["$",d||"-"]})]}),(0,a.jsxs)("div",{className:le.field,children:[(0,a.jsx)("div",{className:le.label,children:"Fund Fee"}),(0,a.jsxs)("div",{className:le.value,children:[s||0,"/1 h"]})]}),(0,a.jsxs)("div",{className:le.field,children:[(0,a.jsx)("div",{className:le.label,children:"Available Liquidity"}),(0,a.jsxs)("div",{className:le.value,children:["$",i||"-"]})]})]})},Or=Fr,U={tabList:"tabList___yWdXa",tabLong:"tabLong___tGsCL",tabShort:"tabShort___bAVl0",selected:"selected___YaUw9",label:"label___V2PWs",tradeBar:"tradeBar___CpLnN",tradePanel:"tradePanel___AMHi2",options:"options___ewpuO",option:"option___NDplS",optionActive:"optionActive___Kv41n",row:"row___dT_JX",field:"field___ob36v",value:"value___BtMri",panel:"panel___lJHih",cut:"cut___YHMHw",submitBtn:"submitBtn___zk5iO"},ia=2,sa=18,Dr=function(e){var t,n,i,l,d,c=e.indexPrice,s=e.marketSelection,o=e.tradeShowArgs,u=e.orderOption,p=e.swapOption,_=e.onChangeSwapOption,g=e.onChangOrderOption,j=(0,Ee.Ge)(),v=j.active,h=j.account,b=c,w=(0,ut.x)(),L=w.chainId,m=(0,y.useState)(""),C=M()(m,2),A=C[0],J=C[1],K=u===k.YO,T=p===k.FB,ce=(0,y.useState)(!1),ae=M()(ce,2),ie=ae[0],X=ae[1],ye=(0,y.useState)(!1),Pe=M()(ye,2),$=Pe[0],re=Pe[1],Ne=(0,y.useState)(!0),O=M()(Ne,2),q=O[0],D=O[1],N=(0,y.useState)(""),Ae=M()(N,2),ee=Ae[0],Le=Ae[1],_e=(0,y.useState)(""),fe=M()(_e,2),oe=fe[0],ge=fe[1],Re=(0,F.H2)(ee,sa),Ve=(0,F.H2)(oe,sa),Te=Bt.I.useContainer(),he=Te.setPendingTxns;console.log("tradeShowArgs",o);var R=o==null||(t=o.market)===null||t===void 0||(n=t._fee)===null||n===void 0?void 0:n.openFeeRate,G=o==null||(i=o.market)===null||i===void 0||(l=i._fee)===null||l===void 0?void 0:l.execFeeRate,Y=o==null||(d=o.market)===null||d===void 0?void 0:d._valid.maxLev,te=(o==null?void 0:o.Positions)||[],Ie=(0,y.useMemo)(function(){if(s&&te&&te.length>0){var Z="".concat(T?"Long":"Short");return te.find(function(me){return me.pair===s.name&&me.account===h&&me.side===Z})}return null},[te,T,s]),z=(0,y.useMemo)(function(){return Boolean(Ie&&Ie.size&&(0,F._b)(Ie.size).gt(0))},[Ie]),V=(0,ke.ZP)(function(){return h&&s!==null&&s!==void 0&&s.address?[h,s==null?void 0:s.address]:null},function(){var Z;return o==null||(Z=o.reader)===null||Z===void 0?void 0:Z.availableLiquidity(h,s.address)}),je=V.data,Me=(0,ke.ZP)(function(){return o!=null&&o.market?o:null},ne.getFundFeeRete),rt=Me.data,it=(0,ke.ZP)(function(){return h&&s!==null&&s!==void 0&&s.address?[h,s==null?void 0:s.address,T]:null},function(){var Z;return o==null||(Z=o.reader)===null||Z===void 0?void 0:Z.getFundingFee(h,s.address,T)}),st=it.data,He=(0,y.useMemo)(function(){return s!=null&&s.name?s.name.split("/")[0]:""},[s]),Ur=kt([L,"depx-swap-leverage-option"],2),oa=M()(Ur,2),Ce=oa[0],Yr=oa[1];function Qr(){}function Jr(){return"Create"}var ze=(0,y.useMemo)(function(){return ne.getNextSize(ee,R,Ce)},[ee,Ce,R]);(0,y.useEffect)(function(){if(q){if(!ee){ge("");return}var Z=ne.getNextAmount(ee,b,R,Ce).toFixed(18);ge(Z);return}var me=ne.getNextPay(oe,b,R,Ce).toFixed(8);Le(me)},[o,oe,q,Ce,R,ee]);function $r(){h&&_r(L,h,se()(se()({},o),{},{pay:ee,isLimit:!K,size:ze.toFixed(18),price:b,isLong:T}),he).then(function(Z){console.log("\u6210\u529F\u4E86",Z)})}var $e=(0,y.useMemo)(function(){var Z=ne.getNextPositionFee(ze,R,Ce),me=Z.toFixed(ia);if(ee&&Ce){var ot=ne.getConfirmStat({size:ze,leverageOption:Ce,execFeeRate:G,entryPrice:b,existingPosition:Ie,positionFeeRate:R||(0,F._b)(0),hasExistingPosition:z,pay:ee}),ua=ot.getCollateralDisplay(),ca=(0,S.O)((Y==null?void 0:Y.toNumber())||1),ei=ne.getNextLiqPrice({size:ze,collateral:ua.pendingPositionPrice,isLong:T,fundFee:(0,S.O)(rt||0),executionFee:ne.getExecFee(G),positionFee:(0,S.O)(Z),entryPrice:(0,S.O)(b),maxLeverage:ca}),ti=ot.getLigPriceDisplay(ca,T,ei,Z),ai=ot.getPositionSizeDisplay(),ni=ot.getLeverageDisplay();return{positionFee:me,liqPriceDisplay:ti,collateralDisplay:ua,leverageDisplay:ni,positionSizeDisplay:ai}}return{positionFee:me}},[ee,ze,Y,Ie,b,oe,G,T,rt,K,Ce,R]),da=$e.positionFee,lt=$e.liqPriceDisplay,Xr=$e.collateralDisplay,Kr=$e.leverageDisplay,qr=$e.positionSizeDisplay;return(0,a.jsxs)("div",{className:U.tradeBar,children:[(0,a.jsxs)("div",{className:U.tradePanel,children:[(0,a.jsx)(fr,{tradeShowArgs:o,entryPrice:b,positionFee:da,liqPriceDisplay:lt,collateralDisplay:Xr,leverageDisplay:Kr,positionSizeDisplay:qr,fundingFee:st,existingPosition:Ie,hasExistingPosition:z,toSymbol:He,toAmount:Ve,marketSelection:s,onClickSubmit:$r,fromAmount:Re,isMarketOrder:K,isLong:T,chainId:L,isSubmitting:ie,visible:$,fromValue:ee,onClose:function(){re(!1)}}),(0,a.jsxs)("div",{className:U.tabList,children:[(0,a.jsxs)("div",{className:H()(U.tabLong,I()({},U.selected,T)),onClick:function(){return _(k.FB)},children:[(0,a.jsx)(kr,{}),(0,a.jsx)("div",{className:U.label,children:"Long"})]}),(0,a.jsxs)("div",{className:H()(U.tabShort,I()({},U.selected,!T)),onClick:function(){return _(k.Qo)},children:[(0,a.jsx)(wr,{}),(0,a.jsx)("div",{className:U.label,children:"Short"})]})]}),(0,a.jsxs)("div",{className:U.options,children:[(0,a.jsx)("div",{onClick:function(){return g(k.YO)},className:H()(U.option,I()({},U.optionActive,K)),children:"Market"}),(0,a.jsx)("div",{onClick:function(){g(k.VZ)},className:H()(U.option,I()({},U.optionActive,!K)),children:"Limit"})]}),(0,a.jsx)(at.tV,{disabled:K,onChange:J}),(0,a.jsx)(at.bW,{symbol:He,value:oe,onChange:function(me){D(!1),ge(me)}}),(0,a.jsxs)("div",{className:U.row,children:[ze&&(0,a.jsxs)("div",{className:U.field,children:[(0,a.jsx)("div",{className:U.label,children:"Size:"}),(0,a.jsxs)("div",{className:U.value,children:[ze.toFixed(ia),"USD"]})]}),(0,a.jsxs)("div",{className:U.field,children:[(0,a.jsx)("div",{className:U.label,children:"Avlb:"}),(0,a.jsx)("div",{className:U.value})]})]}),(0,a.jsx)(at.gp,{onClickMaxBtn:Qr,value:ee,onChange:function(me){D(!0),Le(me)}}),(0,a.jsx)(Pr,{value:Ce,onChange:function(me){return Yr(me)}}),(0,a.jsx)("button",{className:U.submitBtn,onClick:function(){v&&re(!0)},children:Jr()})]}),(0,a.jsxs)("div",{className:U.panel,children:[(0,a.jsx)(ur,{}),(0,a.jsx)("div",{className:U.cut}),(0,a.jsx)(Or,{positionFee:da,fundingFee:st,entryPrice:b,availableLiquidity:je,liqPrice:lt==null?void 0:lt.pendingPositionPrice.toFixed(qe.rU)})]})]})},Ar=Dr,Er=600*1e3,Rr=60*1e3;function zr(r){var e=r.entryFundingRate,t=r.cumulativeFundingRate,n=r.size;if(e&&t)return n.mul(t.sub(e)).div(k.Nb)}function Zr(r,e){if(e){var t=r.key;if(e[t]&&e[t].updatedAt&&e[t].pendingChanges&&e[t].updatedAt+Er>Date.now()){var n=e[t].pendingChanges;if(n.size&&r.size.eq(n.size)||n.expectingCollateralChange&&!r.collateral.eq(n.collateralSnapshot))return;r.hasPendingChanges=!0,r.pendingChanges=n}}}function Br(r,e,t,n,i,l,d,c,s){var o=(0,Oe.zQ)(r,"positionReaderPropsLength"),u=[],p={};if(!t)return{positions:u,positionsMap:p};for(var _=e.collateralTokens,g=e.indexTokens,j=e.isLong,v=0;v<_.length;v++){var h=(0,Gt.z3)(n,_[v],!0,(0,et.u)(r,"NATIVE_TOKEN")),b=(0,Gt.z3)(n,g[v],!0,(0,et.u)(r,"NATIVE_TOKEN")),w=(0,k.gh)(d,_[v],g[v],j[v]),L=void 0;d&&(L=(0,k.zf)(d,_[v],g[v],j[v]));var m={key:w,contractKey:L,collateralToken:h,indexToken:b,isLong:j[v],size:t[v*o],collateral:t[v*o+1],averagePrice:t[v*o+2],entryFundingRate:t[v*o+3],cumulativeFundingRate:h.cumulativeFundingRate,hasRealisedProfit:t[v*o+4].eq(1),realisedPnl:t[v*o+5],lastIncreasedTime:t[v*o+6].toNumber(),hasProfit:t[v*o+7].eq(1),delta:t[v*o+8],markPrice:j[v]?b.minPrice:b.maxPrice};if(s&&s[w]&&s[w].updatedAt&&s[w].updatedAt+Rr>Date.now()){var C=s[w];m.size=C.size,m.collateral=C.collateral,m.averagePrice=C.averagePrice,m.entryFundingRate=C.entryFundingRate}var A=zr(m);if(m.fundingFee=A||(0,F._b)(0),m.collateralAfterFee=m.collateral.sub(m.fundingFee||0),m.closingFee=m.size.mul(k.C5).div(k.gG),m.positionFee=m.size.mul(k.C5).mul(2).div(k.gG),m.totalFees=m.positionFee.add(m.fundingFee||0),m.pendingDelta=m.delta,m.collateral.gt(0)){if(m.hasLowCollateral=m.collateralAfterFee.lt(0)||m.size.div(m.collateralAfterFee.abs()).gt(50),m.averagePrice&&m.markPrice){var J=m.averagePrice.gt(m.markPrice)?m.averagePrice.sub(m.markPrice):m.markPrice.sub(m.averagePrice);m.pendingDelta=m.size.mul(J).div(m.averagePrice),m.delta=m.pendingDelta,m.isLong?m.hasProfit=m.markPrice.gte(m.averagePrice):m.hasProfit=m.markPrice.lte(m.averagePrice)}m.deltaPercentage=m.pendingDelta.mul(k.gG).div(m.collateral);var K=(0,k.b8)({delta:m.pendingDelta,deltaPercentage:m.deltaPercentage,hasProfit:m.hasProfit}),T=K.deltaStr,ce=K.deltaPercentageStr;m.deltaStr=T,m.deltaPercentageStr=ce,m.deltaBeforeFeesStr=T;var ae=void 0,ie=void 0;m.hasProfit?m.pendingDelta.gt(m.totalFees)?(ae=!0,ie=m.pendingDelta.sub(m.totalFees)):(ae=!1,ie=m.totalFees.sub(m.pendingDelta)):(ae=!1,ie=m.pendingDelta.add(m.totalFees)),m.hasProfitAfterFees=ae,m.pendingDeltaAfterFees=ie,m.deltaPercentageAfterFees=m.pendingDeltaAfterFees.mul(k.gG).div(m.collateral);var X=(0,k.b8)({delta:m.pendingDeltaAfterFees,deltaPercentage:m.deltaPercentageAfterFees,hasProfit:ae}),ye=X.deltaStr,Pe=X.deltaPercentageStr;m.deltaAfterFeesStr=ye,m.deltaAfterFeesPercentageStr=Pe,l&&(m.deltaStr=m.deltaAfterFeesStr,m.deltaPercentageStr=m.deltaAfterFeesPercentageStr);var $=m.hasProfit?m.collateral.add(m.pendingDelta):m.collateral.sub(m.pendingDelta);$=$.sub(m.fundingFee||0),l&&($=$.sub(m.closingFee)),m.netValue=$}m.leverage=(0,k.EU)({size:m.size,collateral:m.collateral,entryFundingRate:m.entryFundingRate,cumulativeFundingRate:m.cumulativeFundingRate,hasProfit:m.hasProfit,delta:m.delta,includeDelta:i}),p[w]=m,Zr(m,c),(m.size.gt(0)||m.hasPendingChanges)&&u.push(m)}return{positions:u,positionsMap:p}}var Nt=function(e,t){return e.address===Vr?t:e.address};function Gr(r,e){for(var t=[],n=[],i=[],l=0;l<r.length;l++){var d=r[l];d.isStable||d.isWrapped||(t.push(Nt(d,e)),n.push(Nt(d,e)),i.push(!0))}for(var c=0;c<r.length;c++){var s=r[c];if(s.isStable)for(var o=0;o<r.length;o++){var u=r[o];u.isStable||u.isWrapped||(t.push(s.address),n.push(Nt(u,e)),i.push(!1))}}return{collateralTokens:t,indexTokens:n,isLong:i}}var Vr=Ke.d,la="1500",Hr=function(e){var t=(0,ut.x)(),n=t.chainId,i=(0,Ee.Ge)(),l=i.active,d=i.account,c=i.library,s=(0,y.useState)(!1),o=M()(s,2),u=o[0],p=o[1],_=Bt.I.useContainer(),g=_.pendingTxns,j=_.setPendingTxns,v=(0,y.useState)(k.YO),h=M()(v,2),b=h[0],w=h[1],L=(0,y.useState)(k.FB),m=M()(L,2),C=m[0],A=m[1],J=!0,K=(0,k.Sz)(J),T=M()(K,1),ce=T[0],ae=(0,y.useState)({}),ie=M()(ae,2),X=ie[0],ye=ie[1],Pe=(0,ke.ZP)("".concat(n),function(){return on(n,c)}),$=Pe.data,re=Ma(n,"depx-market-selection",Ot),Ne=M()(re,2),O=Ne[0],q=Ne[1];(0,y.useEffect)(function(){if($&&$.length>0){O||q($[0]);var _e=$.find(function(fe){return fe.name===(O==null?void 0:O.name)&&fe.address===O.address});_e||q($[0])}},[$,O]);var D=(0,ke.ZP)(function(){return O!=null&&O.address&&d?[n,O==null?void 0:O.address,O==null?void 0:O.name,d,la,c]:null},function(_e){return Pn.apply(void 0,Ue()(_e))}),N=D.data,Ae=D.mutate;console.log("tradeShowArgs",N);function ee(_e){q(_e)}var Le=function(){};return O?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:_n.trade,children:[(0,a.jsx)(en,{markets:$,marketSelection:O,onChangeMarketSelection:ee,setToTokenAddress:Le,swapOption:C}),(0,a.jsx)(Ar,{indexPrice:la,tradeShowArgs:N,onChangeMarketSelection:ee,marketSelection:O,active:l,pendingPositions:X,setPendingPositions:ye,pendingTxns:g,setIsPendingConfirmation:p,isPendingConfirmation:u,orders:ce,library:c,setPendingTxns:j,account:d,swapOption:C,orderOption:b,onChangOrderOption:w,onChangeSwapOption:A,chainId:n})]}),(0,a.jsx)(Vn,{orders:N==null?void 0:N.Orders,positions:N==null?void 0:N.Positions,trades:N==null?void 0:N.Trades,market:N==null?void 0:N.market,tradeShowArgs:N})]}):(0,a.jsx)(a.Fragment,{})},Wr=Hr},92583:function(ma,We,f){f.d(We,{r:function(){return ke}});var de=f(62435),Ue=Object.defineProperty,Xe=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable,Ke=(Se,I,be)=>I in Se?Ue(Se,I,{enumerable:!0,configurable:!0,writable:!0,value:be}):Se[I]=be,y=(Se,I)=>{for(var be in I||(I={}))M.call(I,be)&&Ke(Se,be,I[be]);if(Xe)for(var be of Xe(I))Ee.call(I,be)&&Ke(Se,be,I[be]);return Se};const ke=Se=>de.createElement("svg",y({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg"},Se),de.createElement("rect",{width:32,height:32,rx:16,fill:"url(#depx_select_icon_svg__a)"}),de.createElement("rect",{width:32,height:32,rx:16,fill:"url(#depx_select_icon_svg__b)"}),de.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.05 5.95a1.2 1.2 0 0 1 1.2-1.2H16a11.22 11.22 0 0 1 8.248 3.6H11.05v-2.4Zm0 8.25h16.057a11.337 11.337 0 0 1 0 3.6H11.05v-3.6Zm0 9.45v2.4a1.2 1.2 0 0 0 1.2 1.2H16a11.22 11.22 0 0 0 8.248-3.6H11.05Z",fill:"#fff"}),de.createElement("path",{opacity:.6,fillRule:"evenodd",clipRule:"evenodd",d:"M6.834 9.475a11.201 11.201 0 0 0-1.7 3.6h21.732a11.202 11.202 0 0 0-1.7-3.6H6.833Zm0 13.05a11.203 11.203 0 0 1-1.7-3.6h21.732a11.205 11.205 0 0 1-1.7 3.6H6.833Zm9.148 4.725h.035-.035Z",fill:"#fff"}),de.createElement("defs",null,de.createElement("linearGradient",{id:"depx_select_icon_svg__a",x1:0,y1:0,x2:39.172,y2:10.86,gradientUnits:"userSpaceOnUse"},de.createElement("stop",{stopColor:"#3CEAAA"}),de.createElement("stop",{offset:.771,stopColor:"#5C72FF"})),de.createElement("linearGradient",{id:"depx_select_icon_svg__b",x1:0,y1:0,x2:39.172,y2:10.86,gradientUnits:"userSpaceOnUse"},de.createElement("stop",{stopColor:"#3CEAAA"}),de.createElement("stop",{offset:.771,stopColor:"#5C72FF"}))));We.Z="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iMTYiIGZpbGw9InVybCgjYSkiLz48cmVjdCB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHJ4PSIxNiIgZmlsbD0idXJsKCNiKSIvPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTEuMDUgNS45NWExLjIgMS4yIDAgMCAxIDEuMi0xLjJIMTZhMTEuMjIgMTEuMjIgMCAwIDEgOC4yNDggMy42SDExLjA1di0yLjRabTAgOC4yNWgxNi4wNTdhMTEuMzM3IDExLjMzNyAwIDAgMSAwIDMuNkgxMS4wNXYtMy42Wm0wIDkuNDV2Mi40YTEuMiAxLjIgMCAwIDAgMS4yIDEuMkgxNmExMS4yMiAxMS4yMiAwIDAgMCA4LjI0OC0zLjZIMTEuMDVaIiBmaWxsPSIjZmZmIi8+PHBhdGggb3BhY2l0eT0iLjYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNi44MzQgOS40NzVhMTEuMjAxIDExLjIwMSAwIDAgMC0xLjcgMy42aDIxLjczMmExMS4yMDIgMTEuMjAyIDAgMCAwLTEuNy0zLjZINi44MzNabTAgMTMuMDVhMTEuMjAzIDExLjIwMyAwIDAgMS0xLjctMy42aDIxLjczMmExMS4yMDUgMTEuMjA1IDAgMCAxLTEuNyAzLjZINi44MzNabTkuMTQ4IDQuNzI1aC4wMzUtLjAzNVoiIGZpbGw9IiNmZmYiLz48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSIwIiB5MT0iMCIgeDI9IjM5LjE3MiIgeTI9IjEwLjg2IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iIzNDRUFBQSIvPjxzdG9wIG9mZnNldD0iLjc3MSIgc3RvcC1jb2xvcj0iIzVDNzJGRiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iMCIgeTE9IjAiIHgyPSIzOS4xNzIiIHkyPSIxMC44NiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiMzQ0VBQUEiLz48c3RvcCBvZmZzZXQ9Ii43NzEiIHN0b3AtY29sb3I9IiM1QzcyRkYiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48L3N2Zz4="}}]);
