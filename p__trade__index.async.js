"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[939],{21650:function(e,i,n){n.d(i,{ET:function(){return u},FB:function(){return a},Qo:function(){return s},VZ:function(){return c},YO:function(){return o},bD:function(){return l},pQ:function(){return d}});var t=n(13805),r=n(24069),l=0,a="Long",s="Short",o="Market",c="Limit",d=((0,r.Jl)(1,30),{"5m":300,"15m":900,"1h":3600,"4h":14400,"1d":86400});function u(e,i){return i?(0,t.jY)(e)+"address/"+i:(0,t.jY)(e)}},57213:function(e,i,n){n.r(i),n.d(i,{default:function(){return jr}});var t=n(861),r=n.n(t),l=n(27424),a=n.n(l),s=n(34713),o=n(62435),c=n(4480),d=n(59734),u=n(2076),v=n(38416),m=n.n(v),x=n(42122),f=n.n(x),h=n(74704),_=n.n(h),p=n(17061),g=n.n(p),j=n(17156),b=n.n(j),P=n(94184),N=n.n(P),y=n(33290),L=n(17158),w=Object.defineProperty,C=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,O=(e,i,n)=>i in e?w(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n;const k=e=>o.createElement("svg",((e,i)=>{for(var n in i||(i={}))S.call(i,n)&&O(e,n,i[n]);if(C)for(var n of C(i))I.call(i,n)&&O(e,n,i[n]);return e})({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("rect",{width:32,height:32,rx:16,fill:"url(#depx_select_icon_svg__a)"}),o.createElement("rect",{width:32,height:32,rx:16,fill:"url(#depx_select_icon_svg__b)"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.05 5.95a1.2 1.2 0 0 1 1.2-1.2H16a11.22 11.22 0 0 1 8.248 3.6H11.05v-2.4Zm0 8.25h16.057a11.337 11.337 0 0 1 0 3.6H11.05v-3.6Zm0 9.45v2.4a1.2 1.2 0 0 0 1.2 1.2H16a11.22 11.22 0 0 0 8.248-3.6H11.05Z",fill:"#fff"}),o.createElement("path",{opacity:.6,fillRule:"evenodd",clipRule:"evenodd",d:"M6.834 9.475a11.201 11.201 0 0 0-1.7 3.6h21.732a11.202 11.202 0 0 0-1.7-3.6H6.833Zm0 13.05a11.203 11.203 0 0 1-1.7-3.6h21.732a11.205 11.205 0 0 1-1.7 3.6H6.833Zm9.148 4.725h.035-.035Z",fill:"#fff"}),o.createElement("defs",null,o.createElement("linearGradient",{id:"depx_select_icon_svg__a",x1:0,y1:0,x2:39.172,y2:10.86,gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#3CEAAA"}),o.createElement("stop",{offset:.771,stopColor:"#5C72FF"})),o.createElement("linearGradient",{id:"depx_select_icon_svg__b",x1:0,y1:0,x2:39.172,y2:10.86,gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#3CEAAA"}),o.createElement("stop",{offset:.771,stopColor:"#5C72FF"}))));var F=Object.defineProperty,E=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,A=(e,i,n)=>i in e?F(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n;const T=e=>o.createElement("svg",((e,i)=>{for(var n in i||(i={}))M.call(i,n)&&A(e,n,i[n]);if(E)for(var n of E(i))D.call(i,n)&&A(e,n,i[n]);return e})({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("g",{filter:"url(#more_svg__b)",clipPath:"url(#more_svg__a)"},o.createElement("path",{d:"m16.8 9-4.837 7.2L7.2 9h9.6Z",fill:"#fff"})),o.createElement("defs",null,o.createElement("clipPath",{id:"more_svg__a"},o.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})),o.createElement("filter",{id:"more_svg__b",x:3.199,y:9,width:17.6,height:15.2,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},o.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),o.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),o.createElement("feOffset",{dy:4}),o.createElement("feGaussianBlur",{stdDeviation:2}),o.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),o.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),o.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_313_1951"}),o.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_313_1951",result:"shape"}))));var z="btn___r1nTS",H="targetSelect___WQeay",Z="menu___rnv_7",V="menus___KY35b",B="menuItem___wEjP0",$="activeItem___kB1Rj",R=n(86074),q=function(e){var i=e.options,n=e.onChange,t=e.value;return(0,R.jsx)("div",{className:Z,children:(0,R.jsxs)(L.v,{children:[(0,R.jsxs)(L.v.Button,{className:z,children:[(0,R.jsx)(k,{}),(0,R.jsx)("div",{className:H,children:null==t?void 0:t.name}),(0,R.jsx)(T,{})]}),(0,R.jsx)(L.v.Items,{as:"div",className:V,children:(i||[]).map((function(e,i){return(0,R.jsx)(L.v.Item,{children:function(i){var t=i.active;return(0,R.jsx)("div",{className:N()(B,m()({},$,t)),onClick:function(){n(e)},children:(0,R.jsx)("span",{style:{marginLeft:5},children:e.name})})}},i)}))})]})})},G={tab:"tab___AIepu",periodTab:"periodTab___AU1Sf",tabItem:"tabItem___K48RO",active:"active___yzxjn",statsLabel:"statsLabel___h81vX",statsValue:"statsValue___haDDX"},U=function(e){var i=e.options,n=e.stats,t=e.value,r=e.className,l=e.onChange;return(0,R.jsxs)("div",{className:N()(G.tab,r),children:[(0,R.jsx)("ul",{className:G.periodTab,children:i.map((function(e){return(0,R.jsx)("li",{onClick:function(){return l(e.value)},className:N()(G.tabItem,m()({},G.active,e.value===t)),children:e.label},e.value)}))}),(0,R.jsxs)("div",{className:N()(G.stats,null==n?void 0:n.className),children:[(0,R.jsx)("span",{className:G.statsLabel,children:"O"}),(0,R.jsx)("span",{className:G.statsValue,children:null==n?void 0:n.O}),(0,R.jsx)("span",{className:G.statsLabel,children:"H"}),(0,R.jsx)("span",{className:G.statsValue,children:null==n?void 0:n.H}),(0,R.jsx)("span",{className:G.statsLabel,children:"L"}),(0,R.jsx)("span",{className:G.statsValue,children:null==n?void 0:n.L}),(0,R.jsx)("span",{className:G.statsLabel,children:"C"}),(0,R.jsx)("span",{className:G.statsValue,children:null==n?void 0:n.C})]})]})},W=n(18192),Y=n(61895),J=n(37432),Q=n(72167);var X=n(21650),K=n(65334),ee=n(96714),ie=n(36493),ne={main:"main___baTli",chart:"chart___CLGMg",kchart:"kchart___QYDyz",periodTab:"periodTab___cinp7",currentPrice:"currentPrice___wEDGk",header:"header___AT8K5",indexPriceContainer:"indexPriceContainer___vWNqA",priceBox:"priceBox___yHFEN",title:"title___tV3f3",headerRight:"headerRight___fs_Ys",price:"price___e2U86",percentage:"percentage___S6CTj",negative:"negative___R8NaS",positive:"positive___XgCl2"},te=60*-(new Date).getTimezoneOffset(),re=Object.keys(X.pQ).map((function(e){return{label:e,value:e}})),le=function(e,i){return{width:e,height:i,layout:{backgroundColor:"rgba(255, 255, 255, 0)",textColor:"#9597b5",fontFamily:"Relative"},localization:{timeFormatter:function(e){return i=e-te,(0,Q.Z)(1e3*i,"dd MMM yyyy, h:mm a");var i}},grid:{vertLines:{visible:!0,color:"rgba(35, 38, 59, 1)",style:2},horzLines:{visible:!0,color:"rgba(35, 38, 59, 1)",style:2}},timeScale:{rightOffset:5,borderVisible:!1,barSpacing:5,timeVisible:!0,fixLeftEdge:!0},priceScale:{borderVisible:!1},crosshair:{horzLine:{color:"#aaa"},vertLine:{color:"#aaa"},mode:0}}},ae=(0,W.a)(),se=function(e){var i,n,t,r,l,s,v,x=e.indexPrice,h=e.onChangeMarketSelection,p=e.markets,j=(0,o.useRef)(),P=(0,o.useState)(),L=a()(P,2),w=L[0],C=L[1],S=(0,o.useState)(!1),I=a()(S,2),O=I[0],k=I[1],F=(0,o.useState)(),E=a()(F,2),M=E[0],D=E[1],A=(0,o.useState)(),T=a()(A,2),z=T[0],H=T[1],Z=(0,J.x)().chainId,V=(0,c.sJ)((0,u.N6)(Z)),B=(0,K.Ju)([Z,"Chart-period"],"15m"),$=a()(B,2),G=$[0],W=$[1];G in X.pQ||(G="15m");var Q,se=(0,ie.do)(null==V?void 0:V.name),oe=null!=V&&V.name?["getChartCandles",Z,se,G]:null,ce=(0,d.ZP)(se?[se]:null,{fetcher:function(){return ae.get24H(se)}}).data,de=(0,d.ZP)(oe,{fetcher:(Q=b()(g()().mark((function e(){return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae.getKLines(se,G);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),function(){return Q.apply(this,arguments)}),dedupingInterval:6e4,focusThrottleInterval:6e5}),ue=de.data,ve=de.mutate;(0,o.useEffect)((function(){var e=setInterval((function(){ve(void 0,!0)}),6e4);return function(){return clearInterval(e)}}),[ve]);var me=(0,o.useCallback)((function(e){if(e.time){var i,n=_()(e.seriesPrices.values());try{var t=function(){var n=i.value;return C((function(i){return i&&i.time===e.time?i:f()({time:e.time},n)})),"break"};for(n.s();!(i=n.n()).done;){if("break"===t())break}}catch(e){n.e(e)}finally{n.f()}}else C(null)}),[C]),xe=(0,o.useCallback)((function(){if("5m"!==G&&M&&G){var e=Date.now()/1e3-168*X.pQ[G]/2+te,i=Date.now()/1e3+te;M.timeScale().setVisibleRange({from:e,to:i})}}),[M,G]);(0,o.useEffect)((function(){var e,i;if(ue&&ue.length&&!M){var n=(0,y.C2)(j.current,le(null===(e=j.current)||void 0===e?void 0:e.offsetWidth,null===(i=j.current)||void 0===i?void 0:i.offsetHeight));n.subscribeCrosshairMove(me);var t=n.addCandlestickSeries({lineColor:"#5472cc",topColor:"rgba(49, 69, 131, 0.4)",bottomColor:"rgba(42, 64, 103, 0.0)",lineWidth:2,priceLineColor:"#3a3e5e",downColor:"#fa3c58",wickDownColor:"#fa3c58",upColor:"#0ecc83",wickUpColor:"#0ecc83",borderVisible:!1});D(n),H(t)}}),[ue]),(0,o.useEffect)((function(){if(M){var e=function(){j.current&&M.resize(j.current.offsetWidth,j.current.offsetHeight)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}}),[M]),(0,o.useEffect)((function(){z&&ue&&ue.length&&(z.setData(ue),O||(xe(),k(!0)))}),[ue,z,O,xe]);var fe=(0,o.useMemo)((function(){var e;if(ue){var i=w||ue[ue.length-1];if(i){return{className:N()((e={},m()(e,ne.positive,i.open<=i.close),m()(e,ne.negative,i.open>i.close),e)),O:(0,Y.O)(i.open).toFixed(2,1),H:(0,Y.O)(i.high).toFixed(2,1),L:(0,Y.O)(i.low).toFixed(2,1),C:(0,Y.O)(i.close).toFixed(2,1)}}}}),[w,ue]);if(!V)return null;var he=function(e){return e?e.gt(0)?"+".concat(e.toFixed(2,1)):"".concat(e.toFixed(2,1)):"-"};return(0,R.jsxs)("div",{className:ne.main,children:[(0,R.jsxs)("div",{className:ne.header,children:[(0,R.jsxs)("div",{className:ne.indexPriceContainer,children:[(0,R.jsx)(q,{options:p||[],value:V,onChange:function(e){h(e)},chainId:Z}),(0,R.jsxs)("div",{className:ne.currentPrice,children:["$",null!=x?x:ee.PW]})]}),(0,R.jsx)("div",{className:ne.headerRight,children:[{title:"24h Change",text:"".concat(he(null==ce?void 0:ce.Change)," ").concat(he(null==ce?void 0:ce.ChangeRate),"%"),className:N()(ne.percentage,(t={},m()(t,ne.positive,null==ce||null===(i=ce.Change)||void 0===i?void 0:i.gt(0)),m()(t,ne.negative,null==ce||null===(n=ce.Change)||void 0===n?void 0:n.lt(0)),t))},{title:"24h High",text:null!==(r=null==ce||null===(l=ce.Hige)||void 0===l?void 0:l.toFixed(2,1))&&void 0!==r?r:ee.PW,className:ne.price},{title:"24h Low",text:null!==(s=null==ce||null===(v=ce.Low)||void 0===v?void 0:v.toFixed(2,1))&&void 0!==s?s:ee.PW,className:ne.price}].map((function(e,i){return(0,R.jsxs)("div",{className:ne.priceBox,children:[(0,R.jsx)("span",{className:ne.title,children:e.title}),(0,R.jsx)("span",{className:"".concat(ne.text," ").concat(e.className),children:e.text})]})}))})]}),(0,R.jsxs)("div",{className:ne.kchart,children:[(0,R.jsx)(U,{stats:fe,className:ne.periodTab,value:G,onChange:W,options:re}),(0,R.jsx)("div",{className:ne.chart,ref:j})]})]})},oe=n(61641),ce=n(37195),de=n(74595),ue=n(61987),ve=n(54958),me=n(27771),xe=(0,W.a)();var fe="trade____bxq4",he=n(49808),_e=n(3410),pe=Object.defineProperty,ge=Object.getOwnPropertySymbols,je=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,Pe=(e,i,n)=>i in e?pe(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n;const Ne=e=>o.createElement("svg",((e,i)=>{for(var n in i||(i={}))je.call(i,n)&&Pe(e,n,i[n]);if(ge)for(var n of ge(i))be.call(i,n)&&Pe(e,n,i[n]);return e})({width:80,height:80,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{opacity:.12,fillRule:"evenodd",clipRule:"evenodd",d:"M66.668 46.667c0-18.41-14.924-33.334-33.333-33.334v5c15.648 0 28.333 12.686 28.333 28.334h5Zm-8.324 0c0-13.808-11.193-25-25-25h-.01v5.166h.012c10.954 0 19.833 8.88 19.833 19.834h5.165Zm-7.332 17.677a24.926 24.926 0 0 0 7.144-14.677H52.94a19.78 19.78 0 0 1-5.583 11.023l3.654 3.654ZM15.656 28.99a24.927 24.927 0 0 1 14.678-7.144v5.213a19.78 19.78 0 0 0-11.025 5.584l-3.653-3.653Zm17.679 34.344C42.539 63.333 50 55.871 50 46.667 50.002 37.462 42.54 30 33.335 30c-9.205 0-16.667 7.462-16.667 16.667h5C21.668 40.223 26.891 35 33.335 35 39.778 35 45 40.223 45 46.667c0 6.443-5.223 11.666-11.666 11.666v5Z",fill:"url(#default_svg__a)"}),o.createElement("rect",{x:1,y:1,width:78,height:78,rx:39,stroke:"url(#default_svg__b)",strokeOpacity:.12,strokeWidth:2}),o.createElement("defs",null,o.createElement("linearGradient",{id:"default_svg__a",x1:15.656,y1:13.333,x2:78.101,y2:30.645,gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#3CEAAA"}),o.createElement("stop",{offset:.771,stopColor:"#5C72FF"})),o.createElement("linearGradient",{id:"default_svg__b",x1:0,y1:0,x2:97.93,y2:27.149,gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#3CEAAA"}),o.createElement("stop",{offset:.771,stopColor:"#5C72FF"}))));var ye="default___EwMje",Le="icon___urVDk",we=function(e){var i=e.text;return(0,R.jsx)("div",{className:ye,children:(0,R.jsxs)("div",{className:Le,children:[(0,R.jsx)(Ne,{}),(0,R.jsx)("div",{children:i})]})})},Ce="colorGrn___KLrrw",Se="colorRed___dWF0l",Ie=function(e,i){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return+e>=0?(0,R.jsx)("span",{className:N()(m()({},Ce,n)),children:"".concat((0,ee.xP)(e,void 0,"+$"),"(").concat((0,ee.xP)(i,void 0,"+"),"%)")}):(0,R.jsx)("span",{className:N()(m()({},Se,n)),children:"".concat((0,ee.xP)(Math.abs(+e).toString(),void 0,"-$"),"(").concat((0,ee.xP)(Math.abs(+i).toString(),void 0,"-"),"%)")})},Oe="card___tsQVf",ke="table___aXY5t",Fe="colorGrn___kLWyZ",Ee="colorRed___i8TYm",Me="pagination___H7koN",De="button___dRDb2",Ae="containerH5___PZhTu",Te="orderListItem___HY67m",ze="pair___pZNcc",He="pairLeft___iDcUx",Ze="pos___M0sff",Ve="limit___uwUie",Be="orderListItemContent___Nz2ZH",$e="label___RLBGg",Re="text___k9r6s",qe="long___fQO97",Ge="short___X_7_i",Ue=function(e){var i=e.data;return(0,R.jsx)("div",{className:Ae,children:i.map((function(e){var i;return(0,R.jsxs)("div",{className:Te,children:[(0,R.jsxs)("div",{className:ze,children:[(0,R.jsxs)("div",{className:He,children:[(0,R.jsx)("div",{children:e.market}),(0,R.jsx)("div",{className:N()(Ze,(i={},m()(i,qe,e.isLong),m()(i,Ge,!e.isLong),i)),children:e.isLong?"Long":"Short"})]}),(0,R.jsx)("div",{className:Ve,children:(0,R.jsx)(_e._H,{id:"Limit"})})]}),[{renderTitle:function(){return(0,R.jsx)(_e._H,{id:"Size"})},value:(0,ee.xP)(e.size,void 0,"$")},{renderTitle:function(){return(0,R.jsx)(_e._H,{id:"Collateral"})},value:(0,ee.$d)(e.collateral,void 0,null!=e&&e.isIncrease?"+$":"-$")},{renderTitle:function(){return(0,R.jsx)(_e._H,{id:"Price"})},value:(0,ee.$d)(e.price,void 0,"$")},{renderTitle:function(){return"PNL"},value:+(null==e?void 0:e.PNL)>0?Ie(null==e?void 0:e.PNL,(Math.floor(1e4*+(null==e?void 0:e.PNLRate))/100).toString()):"-"},{renderTitle:function(){return(0,R.jsx)(_e._H,{id:"Time"})},value:(0,ee.mr)(null==e?void 0:e.timestamp)||""},{renderTitle:function(){return(0,R.jsx)(_e._H,{id:"Status"})},value:e.status}].map((function(e,i){return(0,R.jsxs)("div",{className:Be,children:[(0,R.jsx)("span",{className:$e,children:e.renderTitle()}),(0,R.jsx)("span",{className:Re,children:e.value})]})}))]})}))})},We=n(99126),Ye=function(e){var i=e.data,n=[{title:"Pair",width:150,key:"market",dataIndex:"market"},{title:"Side",render:function(e){var i;return(0,R.jsx)("div",{className:N()((i={},m()(i,Fe,"Long"===e.side||"Open Long"===e.side||"Close Short"===e.side),m()(i,Ee,"Short"===e.side||"Open Short"===e.side||"Close Long"===e.side),i)),children:null==e?void 0:e.side})}},{title:"Type",dataIndex:"type",key:"type"},{title:"Size",dataIndex:"size",render:function(e){return(0,ee.$d)(e,void 0,"$")}},{title:"Collateral",render:function(e){return(0,ee.$d)(e.collateral,void 0,function(e){var i,n,t,r,l=e.type,a=e.side,s=null==a||null===(i=a.split(" "))||void 0===i||null===(n=i[0])||void 0===n?void 0:n.toLowerCase();return null!=l&&null!==(t=l.toLowerCase())&&void 0!==t&&t.includes("deposit")?"+$":null!=l&&null!==(r=l.toLowerCase())&&void 0!==r&&r.includes("withdraw")?"-$":"open"===s?"+$":"close"===s?"-$":"$"}(e))}},{title:"Price",dataIndex:"price",render:function(e){return(0,ee.$d)(e,void 0,"$")}},{title:"PNL",render:function(e){return(0,R.jsx)("span",{children:0!=+(null==e?void 0:e.PNL)?Ie(null==e?void 0:e.PNL,(Math.floor(1e4*+(null==e?void 0:e.PNLRate))/100).toString()):"-"})}},{title:"Time",dataIndex:"timestamp",key:"timestamp",render:function(e){return(0,ee.mr)(e)||""}},{title:"Status",dataIndex:"status",key:"Status"}];return(0,R.jsx)(We.ZP,{emptyText:"",className:ke,data:i,columns:n})};var Je=(0,ie.tq)()?Ue:Ye,Qe=function(e){var i=(0,c.sJ)(u.K9),n=(0,o.useState)(1),t=a()(n,2),r=t[0],l=t[1],s=(0,o.useMemo)((function(){var e=50*r,n=e-50;return i.slice(n,e)}),[r,i]);return(0,R.jsxs)("div",{className:Oe,children:[(0,R.jsx)(Je,{data:s}),!(null!=s&&s.length)&&(0,R.jsx)(we,{text:"No trades yet"}),(0,R.jsxs)("div",{className:Me,children:[r>1&&(0,R.jsx)("button",{className:De,onClick:function(){l(r-1)},children:(0,R.jsx)("div",{children:"Prev"})}),s&&s.length>=50&&(0,R.jsx)("button",{className:De,onClick:function(){l(r+1)},children:(0,R.jsx)("div",{children:"Next"})})]})]})},Xe=n(28722),Ke=function(){var e=b()(g()().mark((function e(i,n,t){var r,l,a;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,Xe.x7)(t),l='query myQuery {\n    orders(orderDirection: desc, orderBy: timestamp,where: {account: "'.concat(null==i?void 0:i.toLowerCase(),'", marketName:"').concat(n,'", isDeleted: false}){\n          id\n          tp\n          sl\n          market\n          timestamp\n          collateral\n          triggerPrice\n          timestamp\n          isLong\n          isIncrease\n          orderId\n          size\n          triggerAbove\n        }\n      }\n      '),e.next=4,(0,Xe.Dw)(r,l);case 4:return a=e.sent,e.abrupt("return",(null==a?void 0:a.orders)||[]);case 6:case"end":return e.stop()}}),e)})));return function(i,n,t){return e.apply(this,arguments)}}(),ei=function(){var e=b()(g()().mark((function e(i){var n,t,r;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=i.accountAddress&&null!=i.accountAddress){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,Ke(i.accountAddress,null==i?void 0:i.marketName,null==i||null===(n=i.market)||void 0===n?void 0:n._chainId);case 4:return t=e.sent,r=[],t.forEach((function(e){var n=ii(e,i);r.push(n)})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(i){return e.apply(this,arguments)}}();function ii(e,i){var n,t,r,l,a,s,o,c=null!=e&&e.isIncrease?"Limit":"Trigger",d=null!=e&&e.isIncrease?"Open":"Close",u=e.isIncrease;i.openFeeRate;return f()(f()({},e),{},{pair:null==i?void 0:i.marketName,orderID:e.orderId,type:c,side:null!=e&&e.isLong?d+" Long":d+" Short",collateral:null==i||null===(n=i.market)||void 0===n||null===(t=n.formatNum(e.collateral))||void 0===t?void 0:t.toString(),triggerPrice:null==i||null===(r=i.market)||void 0===r?void 0:r.formatPrice(e.triggerPrice),tp:u?null==i||null===(l=i.market)||void 0===l?void 0:l.formatPrice(e.tp):"0",sl:u?null==i||null===(a=i.market)||void 0===a?void 0:a.formatPrice(e.sl):"0",time:(0,ee.mr)(e.timestamp),isIncrease:null==e?void 0:e.isIncrease,isLong:null==e?void 0:e.isLong,size:null!==(s=null==i||null===(o=i.market)||void 0===o?void 0:o.formatNum(null==e?void 0:e.size))&&void 0!==s?s:"0"})}var ni=n(9319),ti=n(75291),ri=n(83446),li=n(90645),ai=function(){var e=b()(g()().mark((function e(){var i,n,t,r,l,a,s=arguments;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>0&&void 0!==s[0]?s[0]:void 0,n=s.length>1?s[1]:void 0,t=(0,Xe.x7)(n),r=null!=i?'account:"'+(null==i?void 0:i.toLowerCase())+'"':"",l="query MyQuery {\n      trades(orderDirection: desc, orderBy: timestamp,where: {".concat(r,"}) {\n        collateral\n        pnl\n        price\n        size\n        side\n        timestamp\n        type\n        status\n        market\n      }\n    }\n      "),e.next=7,(0,Xe.Dw)(t,l);case 7:return a=e.sent,e.abrupt("return",null!=a&&a.trades?(0,li.Z)(null==a?void 0:a.trades,null==a?void 0:a.orders)||[]:(null==a?void 0:a.orders)||[]);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),si=function(){var e=b()(g()().mark((function e(i){var n,t,r;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=i.accountAddress&&null!=i.accountAddress){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,ai(i.accountAddress,null==i||null===(n=i.market)||void 0===n?void 0:n._chainId);case 4:return t=e.sent,r=[],t.forEach((function(e){r.push(oi(e,i))})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(i){return e.apply(this,arguments)}}();function oi(e,i){var n=i.market,t=f()(f()({},e),{},{type:(0,ti.Z)(null==e?void 0:e.type),size:(0,ri.Z)(null==e?void 0:e.size)?"0":n.formatNum(null==e?void 0:e.size),collateral:n.formatNum(null==e?void 0:e.collateral),price:(0,ri.Z)(null==e?void 0:e.price)?"-":n.formatPrice(null==e?void 0:e.price),PNL:(0,ri.Z)(null==e?void 0:e.pnl)?"0":n.formatNum(null==e?void 0:e.pnl)});return t.PNLRate=(0,ri.Z)(null==e?void 0:e.pnl)?"-":t.pnl/t.collateral,t}var ci=n(335),di="switch___V_gYU",ui="rounded___Q_7Ny",vi="switchEnabled___Ca9FC",mi=function(e){var i=e.checked,n=e.className,t=e.onChange;return(0,R.jsx)(ci.r,{checked:i,className:N()(di,m()({},vi,i),n),onChange:t,children:(0,R.jsx)("div",{className:ui})})},xi=n(70794),fi=n(69499),hi=n(26977),_i=Object.defineProperty,pi=Object.getOwnPropertySymbols,gi=Object.prototype.hasOwnProperty,ji=Object.prototype.propertyIsEnumerable,bi=(e,i,n)=>i in e?_i(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n;const Pi=e=>o.createElement("svg",((e,i)=>{for(var n in i||(i={}))gi.call(i,n)&&bi(e,n,i[n]);if(pi)for(var n of pi(i))ji.call(i,n)&&bi(e,n,i[n]);return e})({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"m3 6 5 5 5-5",stroke:"#9597B5",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}));var Ni=Object.defineProperty,yi=Object.getOwnPropertySymbols,Li=Object.prototype.hasOwnProperty,wi=Object.prototype.propertyIsEnumerable,Ci=(e,i,n)=>i in e?Ni(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n;const Si=e=>o.createElement("svg",((e,i)=>{for(var n in i||(i={}))Li.call(i,n)&&Ci(e,n,i[n]);if(yi)for(var n of yi(i))wi.call(i,n)&&Ci(e,n,i[n]);return e})({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm.7-9V4.6H7.3V6h1.4Zm0 6V7.467H7.3V12h1.4Z",fill:"#797B96"}));var Ii=n(9679),Oi={advanced:"advanced___MBdTe",header:"header___ifyUh",collectIcon:"collectIcon___x8hbZ",collectedIcon:"collectedIcon___dhQWJ",item:"item___oTlSJ",input:"input___wbzXJ",flex:"flex___RaHI3",label:"label___E6FRI",questionIcon:"questionIcon___bN9mo",overlay:"overlay___eaqfY",dropdown:"dropdown___itkxP",var:"var___pOK0z",panel:"panel____HyG6",openPanel:"openPanel___unKQ2"},ki=function(e){var i=(0,o.useState)(!1),n=a()(i,2),t=n[0],r=n[1],l=e.ifSlippage,s=e.value,c=void 0===s?{}:s,d=e.stopLossPNL,u=e.onChange,v=e.ifStopLoss,x=e.ifTakeProfit,h=e.ifAll,_=e.tkpPNL,p=(0,o.useMemo)((function(){return"\n    When Index Price reaches ".concat(c.takeProfit||"--"," USD, it will trigger Take Profit, and the estimated PNL will be ").concat(_||"--"," USD.")}),[c.takeProfit,_]),g=(0,o.useMemo)((function(){return"When Index Price reaches ".concat(c.stopLoss||"--"," USD, it will trigger Stop Loss, and the estimated PNL will be ").concat(d||"--"," USD.")}),[c.stopLoss,d]);return(0,R.jsxs)("div",{className:Oi.advanced,children:[(0,R.jsxs)("div",{className:Oi.header,onClick:function(){r((function(e){return!e}))},children:[(0,R.jsx)("div",{className:Oi.title,children:"Advanced"}),(0,R.jsx)(Pi,{className:N()(Oi.collectIcon,m()({},Oi.collectedIcon,t))})]}),(0,R.jsxs)("div",{className:N()(Oi.panel,m()({},Oi.openPanel,t)),children:[(v||h)&&(0,R.jsx)("div",{className:Oi.item,children:(0,R.jsx)(hi.ZP,{value:c.stopLoss,onChange:function(e){u(f()(f()({},c),{},{stopLoss:e}))},label:(0,R.jsxs)("div",{className:Oi.flex,children:[(0,R.jsx)("div",{className:Oi.label,children:"Stop Loss"}),(0,R.jsx)(Ii.Z,{placement:"top",overlay:(0,R.jsx)("div",{className:Oi.overlay,children:g}),children:(0,R.jsx)(Si,{className:Oi.questionIcon})})]}),children:(0,R.jsx)("div",{className:Oi.var,children:"USD"})})}),(x||h)&&(0,R.jsx)("div",{className:Oi.item,children:(0,R.jsx)(hi.ZP,{value:c.takeProfit,onChange:function(e){u(f()(f()({},c),{},{takeProfit:e}))},label:(0,R.jsxs)("div",{className:Oi.flex,children:[(0,R.jsx)("div",{className:Oi.label,children:"Take Profit"}),(0,R.jsx)(Ii.Z,{placement:"top",overlay:(0,R.jsx)("div",{className:Oi.overlay,children:p}),children:(0,R.jsx)(Si,{className:Oi.questionIcon})})]}),children:(0,R.jsx)("div",{className:Oi.var,children:"USD"})})}),(l||h)&&(0,R.jsx)("div",{className:Oi.item,children:(0,R.jsx)(hi.ZP,{value:c.slippage,decimals:2,onChange:function(e){u(f()(f()({},c),{},{slippage:e}))},label:(0,R.jsxs)("div",{className:Oi.flex,children:[(0,R.jsx)("div",{className:Oi.label,children:"Slippage"}),(0,R.jsx)(Ii.Z,{placement:"top",overlay:(0,R.jsxs)("div",{className:Oi.overlay,children:["Note that a low allowed slippage, e.g. less than 0.5%, may result in failed orders if prices are volatile."," "]}),children:(0,R.jsx)(Si,{className:Oi.questionIcon})})]}),children:(0,R.jsx)("div",{className:Oi.var,children:"%"})})})]})]})},Fi=Object.defineProperty,Ei=Object.getOwnPropertySymbols,Mi=Object.prototype.hasOwnProperty,Di=Object.prototype.propertyIsEnumerable,Ai=(e,i,n)=>i in e?Fi(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n;const Ti=e=>o.createElement("svg",((e,i)=>{for(var n in i||(i={}))Mi.call(i,n)&&Ai(e,n,i[n]);if(Ei)for(var n of Ei(i))Di.call(i,n)&&Ai(e,n,i[n]);return e})({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M7.652 12h2.319L13.5 8 9.97 4H7.653l2.795 3.234H2.5v1.532h7.947L7.652 12Z"}));var zi="field___AEG_L",Hi="label___JBZb5",Zi="value___dSa5M",Vi="nextValue___o1dcE",Bi="oldValue___XDLug",$i="arrowRed___HnTAV",Ri="arrowGrn___ttBc1",qi=function(e,i,n,t,r){var l,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=a.ntAppend,o=void 0===s?r:s,c=a.ntPrefix,d=void 0===c?t:c,u=function(e,i){var n;return n={},m()(n,Ri,+e<+i),m()(n,$i,+e>+i),n},v=n&&+n!=+i;return(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)("div",{className:zi,children:[(0,R.jsx)("div",{className:Hi,children:e}),(0,R.jsxs)("div",{className:Zi,children:[(0,R.jsx)("div",{className:N()((l={},m()(l,"".concat(Zi," ").concat(Bi),v),m()(l,Vi,!v),l)),children:!Number.isNaN(i)&&isFinite(+i)&&"".concat(t||"").concat((0,ee.xP)(i)).concat(r||"")||ee.PW}),v&&!Number.isNaN(n)&&isFinite(+n)&&(0,R.jsxs)("div",{className:Vi,children:[(0,R.jsx)("span",{className:N()(u(i,n)),children:(0,R.jsx)(Ti,{})}),null==a?void 0:a.defaultValue,!(null!=a&&a.defaultValue)&&"".concat(d||"").concat((0,ee.xP)(n,2,"","","")).concat(o||"")]})||""]})]})})},Gi={card:"card___fdBku",header:"header___mYjMg",title:"title___DaWZ7",right:"right___VLVON",switch:"switch___JvgPx",table:"table___fNLlk",pnl:"pnl___pZIIu",side:"side___qR1Jt",editCancel:"editCancel___JKw0Q",edit:"edit___DUhY3",submitBtn:"submitBtn___pc5K5",fields:"fields___FDpLc",field:"field___bbKYP",label:"label___CTyu8",value:"value___madrW",old:"old___XZbZw",new:"new___sFZEB",colorGrn:"colorGrn___FQhdW",colorRed:"colorRed___WPYKL",container:"container___FOa3G",orderListItem:"orderListItem___Gatca",pair:"pair___FE70j",pairLeft:"pairLeft___qFO3w",pos:"pos___d4i57",limit:"limit___fouyr",orderListItemContent:"orderListItemContent___vcvzS",text:"text___Kq6d1",btnsH5:"btnsH5___X2Ryv",btnH5:"btnH5___PjA4_",long:"long___ViDnD",short:"short___GTRN3"},Ui=function(e){return void 0===e||0==+e||(0,ri.Z)(e)?"":(0,Y.O)(e||"").toFixed(2,1)},Wi=function(e){var i,n,t=e.isVisible,r=e.setIsVisible,l=e.row,d=e.tradeShowArgs,v=e.successCb,m=(0,o.useState)(Ui(null==l?void 0:l.triggerPrice)),x=a()(m,2),h=x[0],_=x[1],p=(0,s.Ge)(),g=p.active,j=p.account,b=(0,o.useState)(!1),P=a()(b,2),N=P[0],y=P[1],L=(0,o.useState)(Ui(null==l?void 0:l.sl)),w=a()(L,2),C=w[0],S=w[1],I=(0,o.useState)(Ui(null==l?void 0:l.tp)),O=a()(I,2),k=O[0],F=O[1],E=(0,c.sJ)(u.hm),M=null==l?void 0:l.isLong,D=null==d||null===(i=d.market)||void 0===i||null===(n=i._valid)||void 0===n?void 0:n.maxLev,A=(0,Y.O)((null==D?void 0:D.toNumber())||100),T=l.indexPrice,z=(0,o.useMemo)((function(){if(E&&E.length>0){var e="".concat(M?"Long":"Short");return E.find((function(i){return i.pair===(null==l?void 0:l.pair)&&i.side===e}))}return null}),[E,M]),H=(0,o.useMemo)((function(){return Boolean(z&&z.size&&(0,Y.O)(z.size).gt(0))}),[z]),Z=(0,o.useMemo)((function(){var e,i,n=h,t=(0,Y.O)(null==l?void 0:l.size),r=null==d?void 0:d.executionFee,a=(0,Y.O)(r||0),s=null==d?void 0:d.openFeeRate,o=(0,Y.O)(s||0),c=ce.a.getOpenFee(t,o),u=(0,Y.O)(null!==(e=null==d?void 0:d.cleanFee)&&void 0!==e?e:"0"),v=ce.a.getEntryPriceDisplay((0,Y.O)(null==l?void 0:l.triggerPrice),t,M,z),m=ce.a.getEntryPriceDisplay((0,Y.O)(h),t,M,z),x=ce.a.getConfirmStat({size:(0,Y.O)(null==l?void 0:l.size),leverageOption:0,executionFee:a,entryPrice:(0,Y.O)(null==l?void 0:l.triggerPrice),existingPosition:z,positionFeeRate:(0,Y.O)(s||0),hasExistingPosition:H,pay:(0,Y.O)(null==l?void 0:l.collateral),openFee:c,cleanFee:u}),_=ce.a.getConfirmStat({size:(0,Y.O)(null==l?void 0:l.size),leverageOption:0,executionFee:a,entryPrice:m.mergePositionPrice,existingPosition:z,positionFeeRate:(0,Y.O)(s||0),hasExistingPosition:H,pay:(0,Y.O)(null==l?void 0:l.collateral),openFee:c,cleanFee:u}).getLigPriceDisplay(m.mergePositionPrice,A,M,o),p=x.getLigPriceDisplay(v.mergePositionPrice,A,M,o),g=_.mergePositionPrice.toString(),j=z?null==z?void 0:z.liqPrice:p.mergePositionPrice.toString(),b=(0,Y.O)(null==z?void 0:z.size).minus((0,Y.O)(null==l?void 0:l.size)),P=(0,Y.O)(null==z?void 0:z.initialCollateral).minus((0,Y.O)(null==l?void 0:l.collateral)),N=null===(i=(0,Y.O)(null==z?void 0:z.feeRate))||void 0===i?void 0:i.toString(),y=(0,Y.O)(s),L=(0,Y.O)(u),w=(0,ni.QB)(f()(f()({},l),{},{fundingFee:"0",size:b.toString(),collateral:P.toString(),averagePrice:null==z?void 0:z.averagePrice}),N,A,y,L);return{nextOrderPrice:n,nextLiqPrice:g,initLiqPrice:j,nextTriggerLiq:H?w:"0",initTriggerLiq:H?null==z?void 0:z.liqPrice:"0"}}),[h,null==z?void 0:z.PNL]),V=Z.nextOrderPrice,B=Z.nextLiqPrice,$=Z.initLiqPrice,q=Z.nextTriggerLiq,G=Z.initTriggerLiq,U=(0,o.useMemo)((function(){return new xi.Z(h).isEqualTo(new xi.Z(null==l?void 0:l.triggerPrice))?$:B}),[h,A,T]),W=function(){var e=function(){if(!h)return"Enter A Price";if(null!=l&&l.isIncrease)if(null!=l&&l.isLong){if(+h>=+T)return"Price Above Current Price";if(""!=C){if(+C>=+h)return"Stop Loss Above Order Price";if(+C<=+U)return"Stop Loss Below Liq.Price"}if(""!=k&&+k<=+h)return"Take Profit Below Order Price"}else{if(+h<=+T)return"Price Below Current Price";if(""!=C){if(+C<=+h)return"Stop Loss Below Order Price";if(+C>=+U)return"Stop Loss Above Liq.Price"}if(""!=k&&+k>=+h)return"Take Profit Above Order Price"}else if(null!=l&&l.isLong&&H){if(+h>=+U)return"Price Above Liq.Price";if(+h<=+U)return"Price Below Liq.Price"}return N?"Updating Order...":""}();return e?{btnTxt:e,btnValid:!1}:{btnTxt:"Update Order",btnValid:!0}},J=(0,o.useMemo)((function(){return W()}),[h,N,M,null==l?void 0:l.isIncrease,C,k,$,U,H,T]),Q=J.btnTxt,X=J.btnValid,K=(0,o.useMemo)((function(){return[k?ce.a.getEstimatedPNL({isLong:M,entryPrice:(0,Y.O)(h),price:(0,Y.O)(k),size:(0,Y.O)(null==l?void 0:l.size)}).toFixed(2,1):"",C?ce.a.getEstimatedPNL({isLong:M,entryPrice:(0,Y.O)(h),price:(0,Y.O)(C),size:(0,Y.O)(null==l?void 0:l.size)}).toFixed(2,1):""]}),[k,C,M,h]),ee=a()(K,2),ie=ee[0],ne=ee[1];return(0,R.jsx)("div",{className:Gi.modal,children:(0,R.jsxs)(fi.Z,{title:"Edit ".concat(null==l?void 0:l.type," Order"),onClose:function(){return r(!1)},visible:t,width:512,children:[(0,R.jsx)(hi.tV,{value:h,onChange:_,decimals:2}),(null==l?void 0:l.isIncrease)&&(0,R.jsx)(ki,{value:{stopLoss:C,takeProfit:k},ifStopLoss:!0,ifTakeProfit:!0,onChange:function(e){S((null==e?void 0:e.stopLoss)||""),F((null==e?void 0:e.takeProfit)||"")},tkpPNL:ie,stopLossPNL:ne}),(0,R.jsxs)("div",{className:Gi.fields,children:[qi("Order Price",null==l?void 0:l.triggerPrice,h,null!=l&&l.triggerAbove?">$":"<$","",{ntPrefix:+V<+T?"<$":">$"}),qi("Index Price",T,"","$"),H?null!=l&&l.isIncrease?qi("Liq Price",$,B,"$"):qi("Liq Price",G,q,"$"):null!=l&&l.isIncrease?qi("Liq Price",B,"","$"):qi("Liq Price","-","-","$")]}),(0,R.jsx)("button",{className:Gi.submitBtn,disabled:N||!X,onClick:function(){g&&j&&(y(!0),function(e,i,n,t,r,l,a){var s=e.market;return t?e.market.updateIncreaseOrder(+i,s.getPriceDecimals(n),s.getPriceDecimals(l||0),s.getPriceDecimals(a||0),r):e.market.updateDecreaseOrder(+i,s.getPriceDecimals(n),r)}(d,null==l?void 0:l.orderID,h,null==l?void 0:l.isIncrease,l.isLong,k,C).then((function(e){v(),r(!1)})).catch((function(e){return console.log("confirm",e)})).finally((function(){y(!1)})))},children:Q})]})})},Yi=(0,ie.tq)()?function(e){var i=e.orders,n=e.handleEdit,t=e.handleCancel;return(0,R.jsx)("div",{className:Gi.container,children:i.map((function(e){var i,r;return(0,R.jsxs)("div",{className:Gi.orderListItem,children:[(0,R.jsxs)("div",{className:Gi.pair,children:[(0,R.jsxs)("div",{className:Gi.pairLeft,children:[(0,R.jsxs)("div",{children:[" ",e.pair," "]}),(0,R.jsx)("div",{className:N()(Gi.pos,(i={},m()(i,Gi.long,e.isLong),m()(i,Gi.short,!e.isLong),i)),children:e.isLong?"Long":"Short"})]}),(0,R.jsx)("div",{className:Gi.limit,children:(0,R.jsx)(_e._H,{id:"Limit"})})]}),[{title:function(){return(0,R.jsx)(_e._H,{id:"Size"})},value:(0,ee.xP)(e.size,void 0,"$")},{title:function(){return(0,R.jsx)(_e._H,{id:"Collateral"})},value:+e.isIncrease?(0,ee.$d)(e.collateral,void 0,"+$"):(0,ee.$d)(null===(r=Math.abs(+e.collateral))||void 0===r?void 0:r.toString(),void 0,"-$")},{title:function(){return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(_e._H,{id:"Order"})," ",(0,R.jsx)(_e._H,{id:"Price"})]})},value:(0,ee.$d)(null==e?void 0:e.triggerPrice,void 0,null!=e&&e.triggerAbove?">$":"<$")},{title:function(){return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(_e._H,{id:"Index"})," ",(0,R.jsx)(_e._H,{id:"Price"})]})},value:(0,ee.xP)(e.indexPrice,void 0,"$")},{title:function(){return"TP/SL"},value:(+(null==e?void 0:e.tp)>0&&(0,ee.$d)(null==e?void 0:e.tp,void 0,"$")||"-")+"/"+(+(null==e?void 0:e.sl)>0&&(0,ee.$d)(null==e?void 0:e.sl,void 0,"$")||"-")},{title:function(){return(0,R.jsx)(_e._H,{id:"Time"})},dataIndex:"time",value:e.time}].map((function(e,i){return(0,R.jsxs)("div",{className:Gi.orderListItemContent,children:[(0,R.jsx)("span",{className:Gi.label,children:e.title()}),(0,R.jsx)("span",{className:Gi.text,children:e.value})]})})),(0,R.jsxs)("div",{className:Gi.btnsH5,children:[(0,R.jsx)("div",{className:Gi.btnH5,onClick:function(){return n(e)},children:(0,R.jsx)(_e._H,{id:"Edit"})}),(0,R.jsx)("div",{className:Gi.btnH5,onClick:function(){return t(e)},children:(0,R.jsx)(_e._H,{id:"Cancel"})})]})]})}))})}:function(e){var i=e.orders,n=e.handleCancel,t=e.handleEdit,r=e.handleCancelAll,l=[{title:"Pair",dataIndex:"pair",width:150,render:function(e){return e||"-"}},{title:"Side",width:250,key:"side",render:function(e){var i;return(0,R.jsx)("div",{className:N()((i={},m()(i,Gi.colorGrn,(null==e?void 0:e.isLong)==(null==e?void 0:e.isIncrease)),m()(i,Gi.colorRed,(null==e?void 0:e.isLong)!==(null==e?void 0:e.isIncrease)),i)),children:null==e?void 0:e.side})}},{title:"Type",dataIndex:"type",key:"type"},{title:"Size",dataIndex:"size",key:"size",render:function(e){return(0,ee.$d)(e,void 0,"$")}},{title:"Collateral",key:"collateral",render:function(e){var i;return+e.isIncrease?(0,ee.$d)(e.collateral,void 0,"+$"):(0,ee.$d)(null===(i=Math.abs(+e.collateral))||void 0===i?void 0:i.toString(),void 0,"-$")}},{title:"Order Price",width:120,render:function(e){return(0,ee.$d)(null==e?void 0:e.triggerPrice,void 0,null!=e&&e.triggerAbove?">$":"<$")}},{title:"Index Price",width:120,render:function(e){return(0,ee.xP)(e.indexPrice,void 0,"$")}},{title:"TP/SL",render:function(e){return(+(null==e?void 0:e.tp)>0&&(0,ee.$d)(null==e?void 0:e.tp,void 0,"$")||"-")+"/"+(+(null==e?void 0:e.sl)>0&&(0,ee.$d)(null==e?void 0:e.sl,void 0,"$")||"-")}},{title:"Time",dataIndex:"time",key:"time"},{width:120,title:null!=i&&i.length?(0,R.jsx)("span",{onClick:r,children:"Cancel All"}):(0,R.jsx)(R.Fragment,{}),render:function(e){return(0,R.jsxs)("div",{className:Gi.editCancel,children:[(0,R.jsx)("div",{className:Gi.edit,onClick:function(){return t(e)},children:"Edit"}),(0,R.jsx)("div",{className:Gi.edit,onClick:function(){return n(e)},children:"Cancel"})]})}}];return(0,R.jsx)(We.ZP,{emptyText:"",className:Gi.table,data:i,columns:l})},Ji=function(e){var i=e.tradeShowArgs,n=e.successCb,t=(0,c.sJ)(u.dz),r=(0,o.useState)(!1),l=a()(r,2),s=l[0],d=l[1],v=(0,o.useState)({}),m=a()(v,2),x=m[0],f=m[1];return(0,R.jsxs)(R.Fragment,{children:[s&&(0,R.jsx)(Wi,{isVisible:s,setIsVisible:d,tradeShowArgs:i,row:x,successCb:n}),(0,R.jsxs)("div",{className:Gi.card,children:[(0,R.jsx)(Yi,{orders:t,handleCancel:function(e){var t,r,l,a;(t=i,r=e.isIncrease,l=null==e?void 0:e.orderID,a=null==e?void 0:e.isLong,t.market.cancelOrder(r,Number(l),a)).then((function(e){n(),d(!1)})).catch((function(e){return console.log("handleCancel err",e)})).finally((function(){}))},handleEdit:function(e){f(e),d(!0)},handleCancelAll:function(){var e,t,r,l,a;(e=i,r=[],l=[],a=[],null===(t=e.Orders)||void 0===t||t.forEach((function(e){r.push(e.isIncrease),l.push(Number(e.orderID)),a.push(e.isLong)})),e.market.cancelOrderList(r,l,a)).then((function(e){n()})).catch((function(e){return console.log("cancel All",e)}))}}),!(null!=t&&t.length)&&(0,R.jsx)(we,{text:"No open orders"})]})]})},Qi="orderPanel___weQ4q",Xi="tabList___iDvkP",Ki="tabItem___UJec7",en="selected___lGODG",nn="header___Y18Vk",tn="right___ExK0Y",rn="switch___yJrUb",ln="moreIcon___LxjYg",an="overlay___LURQM",sn="collateral___I5qZP",on="collateralTxt___sEChq",cn="underline___SHqOx",dn="col___hLUTs",un="menu___enVPl",vn="card___XRXfM",mn=n(24069),xn=function(){var e=b()(g()().mark((function e(i,n){var t,r,l;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={isLimit:n.isLimit,sizeDelta:(0,mn._b)(0),price:(0,mn._b)(0),slippage:(0,mn._b)(0),isLong:n.isLong,isExec:!1,account:i.accountAddress,isKeepLev:n.keepLeverage},r=i.market,t.sizeDelta=r.getNumDecimals(n.sizeDelta),t.price=r.getPriceDecimals(n.price),t.slippage=r.getSlippageDecimals(r.formatPercentage(i.slippage)),e.next=7,r.decreaseTrade(t);case 7:return l=e.sent,e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})));return function(i,n){return e.apply(this,arguments)}}(),fn={table:"table___O1XQH",header:"header___cnc5K",submitBtn:"submitBtn___GOq9M",orderPanel:"orderPanel___UpOZv",tabList:"tabList___Ynh2Z",tabItem:"tabItem___mxzqS",selected:"selected___hpXfr",fields:"fields___jqoiL",field:"field___gznn3",dField:"dField___smjTW",title:"title___cDyBA",label:"label___d6Gje",value:"value___VUuPy",modal:"modal___yrezj","ant-modal-content":"ant-modal-content___YHsA0",tabs:"tabs___bazyO",cut:"cut___xmhqm",receive:"receive___P7iU3"},hn=function(){return(0,R.jsx)("div",{className:fn.cut})},_n=function(e){var i,n=e.isVisible,t=e.setIsVisible,r=e.row,l=void 0===r?{}:r,c=e.tradeShowArgs,d=e.successCb,u=l.size,v=void 0===u?"2000.999999":u,x=l.initialCollateral,h=void 0===x?"200,000000000001":x,_=l.leverage,p=void 0===_?"10.000001":_,g=l.fundingFee,j=void 0===g?"20":g,b=l.liqPrice,P=void 0===b?"0.00000001":b,y=l.indexPrice,L=(0,o.useState)(0),w=a()(L,2),C=w[0],S=w[1],I=(0,o.useState)(""),O=a()(I,2),k=O[0],F=O[1],E=(0,o.useState)(y),M=a()(E,2),D=M[0],A=M[1],T=(0,o.useState)(!0),z=a()(T,2),H=z[0],Z=z[1],V=(0,s.Ge)(),B=V.active,$=V.account,q=(0,o.useState)(!1),G=a()(q,2),U=G[0],W=G[1],J=(0,o.useState)("0.3"),Q=a()(J,2),X=Q[0],K=Q[1],ie=null!==(i=+(null==c?void 0:c.cleanFee))&&void 0!==i?i:"5.0",ne=function(){var e=function(){if(!D&&C)return"Enter A Price";if(!+k)return"Enter an amount";if(+k!=+(null==l?void 0:l.size)){if(C){if(null!=l&&l.isLong&&+D<+P)return"Price Below Liq. Price";if((null==l||!l.isLong)&&+D>+P)return"Price Above Liq. Price"}if(+k>+v)return"Max close amount exceeded";if(+se<2)return" Min Leverage: 2.00x";if(+se>100)return"Max Leverage: 100.00x";if(+ae<ie)return"Leftover Collateral Size below ".concat(ie," USD");if(+xe<ie)return"Leftover Net Value Size below ".concat(ie," USD")}return U?C?"Creating Order...":"Closing...":""}();return e?{btnTxt:e,btnValid:!1}:{btnTxt:C?"Create Order":"Close",btnValid:!0}},te=(0,ee.xP)(null==l?void 0:l.size),re=(0,o.useMemo)((function(){var e=0!==C,i=function(e,i,n,t,r,l,a){var s,o,c,d=i.initialCollateral,u=void 0===d?"200":d,v=i.executionFee,m=void 0===v?"0.09":v,x=i.fundingFee,h=void 0===x?"10":x,_=i.feeRate,p=i.size,g=void 0===p?"2000":p,j=new xi.O(u),b=new xi.O(t||0),P=new xi.O(g),N=P.minus(b).isGreaterThan(0)?P.minus(b):new xi.O(0),y=P.minus(b).isGreaterThan(0),L=0===P.minus(t).toNumber(),w=null==b?void 0:b.gt(0),C=new xi.O(_),S=l?new xi.O(m):0,I=new xi.O(h),O=b.dividedBy(P),k=null==e?void 0:e.fundFeeRate,F=+t>0?b.multipliedBy(C):P.multipliedBy(C),E=I.plus(S).plus(F),M=new xi.O(+(0,ni.Ih)(e,f()(f()({},i),{},{indexPrice:n,size:b.toString()}),null==e?void 0:e.openFeeRate,k)),D=w?L?j.plus(M).minus(E):r?j.multipliedBy(O).plus(M).minus(E):M.minus(E):new xi.O(0),A=L?new xi.O(0):r?y?new xi.O(1).minus(O).multipliedBy(j):new xi.O(0):j;D.lte(0)&&(A=A.plus(D));var T=M.toString(),z=N.toString(),H=y?N.dividedBy(A).toString():"0.01",Z=(0,Y.O)((null==e||null===(s=e.market)||void 0===s||null===(o=s._valid)||void 0===o||null===(c=o.maxLev)||void 0===c?void 0:c.toNumber())||100),V=(0,Y.O)(null==e?void 0:e.openFeeRate),B=(0,Y.O)(null==e?void 0:e.cleanFee),$=(0,ni.QB)(f()(f()({},i),{},{fundingFee:"0",size:N.toString(),collateral:A.toString()}),null==i?void 0:i.feeRate,Z,V,B),R=new xi.O(+(0,ni.Ih)(e,f()(f()({},i),{},{indexPrice:n,size:null==P?void 0:P.toString()}),null==e?void 0:e.openFeeRate,k)),q=N.multipliedBy(C),G=A.plus(R).minus(q).toString(),U=M.dividedBy(j).multipliedBy(100);return{nextSize:z,nextLeverage:H,nextLiqPrice:null==$?void 0:$.toString(),nextCollateral:A.toString(),receive:D.toString(),nextPNL:T,nextPNLRate:U.toString(),fees:E.toString(),positionFee:F.toString(),nextNetValue:G.toString(),ifAll:L}}(c,l,y,k,H,e);return f()({isLimit:e},i)}),[k,C,H,D,y,v]),le=re.nextSize,ae=re.nextCollateral,se=re.nextLeverage,oe=re.nextLiqPrice,ce=re.isLimit,de=re.receive,ue=re.nextPNL,ve=re.fees,me=re.positionFee,xe=re.nextNetValue,fe=re.nextPNLRate,_e=re.ifAll,pe=(0,o.useMemo)((function(){return+k>+(null==l?void 0:l.size)?{btnTxt:"Max close amount exceeded",btnValid:!1}:ne()}),[v,D,k,U,H,xe,ae,se,C]),ge=pe.btnTxt,je=pe.btnValid;return(0,R.jsx)("div",{className:fn.modal,children:(0,R.jsxs)(fi.Z,{title:"Close ".concat(null!=l&&l.isLong?"Long":"Short"," ETH"),onClose:function(){return t(!1)},visible:n,width:512,children:[(0,R.jsx)("div",{className:fn.tabs,children:(0,R.jsx)(he.O.Group,{defaultIndex:C,onChange:function(e){F(""),A(""),S(e)},children:(0,R.jsx)("div",{className:fn.header,children:(0,R.jsxs)(he.O.List,{className:fn.tabList,children:[(0,R.jsx)(he.O,{className:function(e){var i=e.selected;return N()(fn.tabItem,m()({},fn.selected,i))},children:"Market"}),(0,R.jsx)(he.O,{className:function(e){var i=e.selected;return N()(fn.tabItem,m()({},fn.selected,i))},children:"Trigger"})]})})})}),(0,R.jsx)(hi.tV,{value:ce?D:y,disabled:!ce,onChange:A,decimals:2}),(0,R.jsxs)("div",{className:fn.dField,children:[(0,R.jsxs)("div",{className:fn.field,children:[(0,R.jsxs)("div",{className:fn.label,children:["Index Price:",(0,R.jsx)("span",{children:" "})]}),(0,R.jsx)("div",{className:fn.value,children:y})]}),(0,R.jsxs)("div",{className:fn.field,children:[(0,R.jsxs)("div",{className:fn.label,children:["Available:",(0,R.jsx)("span",{children:" "})]}),(0,R.jsxs)("div",{className:fn.value,children:["$",te]})]})]}),(0,R.jsx)(hi.gp,{label:"Close",onClickMaxBtn:function(){F(null==l?void 0:l.size)},value:k,onChange:function(e){F(e)}}),!ce&&(0,R.jsx)(ki,{value:{slippage:X},ifSlippage:!0,onChange:function(e){K((null==e?void 0:e.slippage)||"")}}),(0,R.jsxs)("div",{className:fn.fields,children:[qi("Position Size",v,le,"$"),qi("Collateral",h,0==+k?h:ae,"$"),qi("Leverage",p,0==+k?p:se,"","x",{defaultValue:"0.01"===se?"-":""}),(0,R.jsxs)("div",{className:fn.field,children:[(0,R.jsx)("div",{className:fn.label,children:"PNL"}),(0,R.jsx)("div",{className:fn.value,children:+k>0?Ie(ue,fe):Ie(null==l?void 0:l.PNL,null==l?void 0:l.PNLRate)})]}),(0,R.jsxs)("div",{className:fn.field,children:[(0,R.jsxs)("div",{className:fn.label,children:["Fees",(0,R.jsx)(Ii.Z,{placement:"bottom",overlay:(0,R.jsxs)("div",{className:fn.overlay,children:["Fees",(0,R.jsx)("br",{}),"Fund Fee: ".concat((0,ee.xP)(j,2,"$")),(0,R.jsx)("br",{}),"Close Fee: ".concat((0,ee.xP)(me,2,"$")),(0,R.jsx)("br",{}),"Execution Fee: ".concat((0,ee.xP)(ce?null==l?void 0:l.executionFee:"0",2,"$"))]}),children:(0,R.jsx)(Si,{className:fn.questionIcon})})]}),(0,R.jsx)("div",{className:fn.value,children:(0,ee.xP)(ve,2,"$")})]}),(0,R.jsxs)("div",{className:fn.field,children:[(0,R.jsx)("div",{className:fn.label,children:"Keep Leverage"}),(0,R.jsx)("div",{className:fn.value,children:(0,R.jsx)(mi,{checked:H,onChange:Z})})]}),(0,R.jsx)(hn,{}),(0,R.jsxs)("div",{className:fn.field,children:[(0,R.jsx)("div",{className:fn.label,children:"Entry Price"}),(0,R.jsx)("div",{className:fn.value,children:(0,ee.xP)(null==l?void 0:l.averagePrice,2,"$")})]}),_e?qi("Liq. Price","0",void 0,"$"):qi("Liq. Price",P,isFinite(+oe)?+k>0?oe:P:"0.000001","$")]}),(0,R.jsx)(hn,{}),(0,R.jsxs)("div",{className:fn.fields,children:[qi("Spread","0",void 0,"","%"),qi("Slippage",X||"0.3","","","%"),(0,R.jsx)("div",{className:fn.receive,children:qi("Receive",+de>0?de:"0",void 0,void 0," USDC")})]}),(0,R.jsx)("button",{className:fn.submitBtn,disabled:U||!je,onClick:function(){B&&$&&(W(!0),xn(c,{keepLeverage:H,slippage:X,sizeDelta:k,price:D,isLong:null==l?void 0:l.isLong,isLimit:ce,nextSize:le,nextPNL:ue}).then((function(e){t(!1),d()})).catch((function(e){return console.log("confirm",e)})).finally((function(){W(!1)})))},children:ge})]})})},pn=1e5,gn=function(e){var i=e.isVisible,n=e.setIsVisible,t=e.row,r=void 0===t?{}:t,l=e.market,c=e.tradeShowArgs,d=e.successCb,u=r.collateral,v=void 0===u?"200":u,x=r.leverage,h=void 0===x?"10":x,_=r.fundingFee,p=void 0===_?"20":_,g=r.liqPrice,j=void 0===g?"0.001":g,b=r.isLong,P=r.indexPrice,y=(0,o.useState)(0),L=a()(y,2),w=L[0],C=L[1],S=(0,o.useState)(""),I=a()(S,2),O=I[0],k=I[1],F=(0,s.Ge)(),E=F.active,M=F.account,D=(0,o.useState)(!1),A=a()(D,2),T=A[0],z=A[1],H="Deposit",Z=(0,o.useMemo)((function(){return 0===w}),[w]),V=(0,o.useMemo)((function(){return function(e,i,n,t,r,l){e.collateral;var a,s,o,c=e.size,d=e.fundingFee,u=e.initialCollateral,v=new xi.O(d),m=new xi.O(n),x=n?function(e){var n,t,r,l=i?"plus":"minus";return null===(n=new xi.O(u))||void 0===n||null===(t=n[l])||void 0===t||null===(r=t.call(n,new xi.O(e)).minus(v))||void 0===r?void 0:r.toString()}(n):null==e?void 0:e.collateral,h=n?new xi.O(null==e?void 0:e.size).dividedBy(new xi.O(x)).toString():null==e?void 0:e.leverage,_=n?"0":d,p=new xi.O(c),g=(0,Y.O)(null==l||null===(a=l.market)||void 0===a||null===(s=a._valid)||void 0===s?void 0:s.maxLev.toNumber()),j=(0,Y.O)(null==l?void 0:l.cleanFee),b=(0,Y.O)(null==l?void 0:l.openFeeRate),P=n&&(0,ni.QB)(f()(f()({},e),{},{collateral:null===(o=new xi.O(x).plus(v))||void 0===o?void 0:o.toString()}),null==e?void 0:e.feeRate,g,b,j)||"",N=new xi.O(u).minus(d).minus(p.dividedBy(100).isLessThan(10)?10:p.dividedBy(100));return{nextCollateral:x,nextLeverage:h,nextFund:_,nextLiqPrice:P,nextAvlb:i?t:N.isGreaterThan(0)?N.toString():"0",delta:(i?m:v.gte(0)?m.plus(v):m).toString()}}(r,Z,O,null==c?void 0:c.avlb,0,c)}),[O,w,P,Z]),B=V.nextCollateral,$=V.nextLeverage,q=V.nextLiqPrice,G=V.nextAvlb,U=V.delta,W=function(){var e=function(){if(!+O)return"Enter an amount";if(!Z){if(b&&+q>+P)return"Invalid Liq.Price";if(!b&&+q<+P)return"Invalid Liq.Price"}return!w&&+O>+G?"Insufficient USDC Balance":w&&+B<10?"Min residual collateral: 10 USD":+$<2?" Min Leverage: 2.00x":+$>100?"Max Leverage: 100.00x":T?w?"Withdrawing...":"Depositing...":""}();return e?{btnTxt:e,btnValid:!1}:{btnTxt:w?"Withdraw":"Deposit",btnValid:!0}},J=(0,o.useMemo)((function(){return W()}),[w,O,T,Z,b,P,q,G,B,$]),Q=J.btnTxt,X=J.btnValid;return(0,R.jsx)("div",{className:fn.modal,children:(0,R.jsxs)(fi.Z,{title:"Edit Collateral",onClose:function(){return n(!1)},visible:i,width:512,children:[(0,R.jsx)("div",{className:fn.tabs,children:(0,R.jsx)(he.O.Group,{defaultIndex:w,onChange:function(e){k(""),C(e)},children:(0,R.jsx)("div",{className:fn.header,children:(0,R.jsxs)(he.O.List,{className:fn.tabList,children:[(0,R.jsx)(he.O,{className:function(e){var i=e.selected;return N()(fn.tabItem,m()({},fn.selected,i))},children:H}),(0,R.jsx)(he.O,{className:function(e){var i=e.selected;return N()(fn.tabItem,m()({},fn.selected,i))},children:"Withdraw"})]})})})}),(0,R.jsx)(hi.gp,{onClickMaxBtn:function(){k(G)},value:O,onChange:function(e){k(e)},label:Z?"Pay":"Receive"}),(0,R.jsxs)("div",{className:fn.fields,children:[(0,R.jsxs)("div",{className:fn.field,children:[(0,R.jsxs)("div",{className:fn.field,children:[(0,R.jsxs)("div",{className:fn.label,children:[(Z?H:"Withdraw")+": ",(0,R.jsx)("span",{children:" "})]}),(0,R.jsx)("div",{className:fn.value,children:(0,ee.xP)(""===O?"0":O,void 0,"$")})]}),(0,R.jsxs)("div",{className:fn.field,children:[(0,R.jsxs)("div",{className:fn.label,children:[Z?"Balance: ":"Available: ",(0,R.jsx)("span",{children:" "})]}),(0,R.jsx)("div",{className:fn.value,children:(0,ee.xP)(G,Z?4:2,void 0,Z?" USDC":"$")})]})]}),qi("Collateral",v,B,"$"),qi("Leverage",h,$,"","X"),(0,R.jsxs)("div",{className:fn.field,children:[(0,R.jsx)("div",{className:fn.label,children:"Index Price"}),(0,R.jsx)("div",{className:fn.value,children:(0,ee.xP)(P,void 0,"$")||"-"})]}),qi("Liq. Price",j,q,"$"),qi("Fund Fee",p,+O>0?"0.00000001":"","$")]}),(0,R.jsx)("button",{className:fn.submitBtn,disabled:T||!X,onClick:function(){E&&M&&(z(!0),function(e,i,n,t){if(n){var r=n.getNumDecimals(i);return t?n.increaseCollateral(r,e):(console.log("---decreaseCollateral----amount-isLong-isDeposit-bigAmount",i,e,t,r.toString()),n.decreaseCollateral(r,e))}return Promise.resolve("confirmEditCollateral failed")}(null==r?void 0:r.isLong,U,l,Z).then((function(e){console.log("collateral succussed",e),d(),n(!1)})).catch((function(e){return console.log("confirm",e)})).finally((function(){z(!1)})))},children:Q})]})})},jn="table___XB6MA",bn="position___Dwf6N",Pn="postionHlgt___apngF",Nn="pos___wBIvY",yn="long___fCOYz",Ln="short___miFCO",wn="options___MVyBD",Cn="closeBtn___cuv0U",Sn="positionList___o82d0",In="containerH5___XiJLb",On="positionLeft___JDFdk",kn="field___eLfxe",Fn="label___lrAei",En="text___y9DiE",Mn="pnlText___RcCTf",Dn="btnsH5___PgCSD",An="btnH5___mI2KK",Tn=function(e,i,n){e!==i&&n(e)},zn=n(96963),Hn=n(21922),Zn=n(8193),Vn=function(e){var i=e.row,n=e.handleEditCollateral;return(0,R.jsx)("div",{children:(0,R.jsxs)("div",{className:sn,children:[(0,R.jsx)(zn.Z,{placement:"bottom",overlay:(0,R.jsxs)("div",{className:an,children:["Collateral",(0,R.jsx)("br",{}),"Collateral:  Initial Collateral - Fund Fee",(0,R.jsx)("br",{}),"Initial Collateral: ".concat(+(null==i?void 0:i.initialCollateral)<0?(0,ee.xP)(Math.abs(+(null==i?void 0:i.initialCollateral)).toString(),void 0,"-$"):(0,ee.xP)(Math.abs(+(null==i?void 0:i.initialCollateral)).toString(),void 0,"+$")),(0,R.jsx)("br",{}),"Fund Fee: ".concat((0,ee.xP)(null==i?void 0:i.fundingFee,void 0,"$")),(0,R.jsx)("br",{}),"Fund Fee / Day: ".concat((0,ee.xP)(null==i?void 0:i.fundFeeDay,void 0,"$")),(0,R.jsx)("br",{}),"Use the Edit Collateral icon to deposit or withdraw collateral."]}),children:(0,R.jsx)(Hn.Z.Text,{className:on,children:(0,ee.xP)(i.collateral,void 0,"$")})}),(0,R.jsx)(Zn.$iz,{style:{cursor:"pointer"},size:"16",onClick:function(){return n()}})]})})},Bn=function(e){var i,n=e.openCloseFee,t=e.PNLAfterFees,r=e.pnlAfterFeesRate;return(0,R.jsxs)("div",{className:dn,children:[(0,ee.xP)(null==e?void 0:e.netValue,void 0,"$"),(0,R.jsx)("span",{children:Ie(null==e?void 0:e.PNL,null==e?void 0:e.PNLRate)}),(0,R.jsx)(zn.Z,{placement:"bottom",overlay:(0,R.jsxs)("div",{className:an,children:["Net Value",(0,R.jsx)("br",{}),"Net Value: Initial Collateral + PnL - Fund Fee - Close Fee",(0,R.jsx)("br",{}),"Initial Collateral: ".concat((null==e||e.initialCollateral,(0,ee.xP)(Math.abs(+(null==e?void 0:e.initialCollateral)).toString(),void 0,"$"))),(0,R.jsx)("br",{}),"PnL: ".concat(+(null==e?void 0:e.PNL)>0?(0,ee.xP)(Math.abs(+(null==e?void 0:e.PNL)).toString(),void 0,"+$"):(0,ee.xP)(Math.abs(+(null==e?void 0:e.PNL)).toString(),void 0,"-$")),(0,R.jsx)("br",{}),"Fund Fee: ".concat((0,ee.xP)(null==e?void 0:e.fundingFee,void 0,"$")),(0,R.jsx)("br",{}),"Open Fee: ".concat((0,ee.xP)(null==n?void 0:n.toString(),void 0,"$")),(0,R.jsx)("br",{}),"Close Fee: ".concat((0,ee.xP)(null==n?void 0:n.toString(),void 0,"$")),(0,R.jsx)("br",{}),"PnL After Fees:",Ie(null==t?void 0:t.toString(),null==r?void 0:r.toString(),!1)]}),children:(0,R.jsx)("div",{className:cn,style:{cursor:"pointer"},children:new Array((null===(i=(0,ee.xP)(null==e?void 0:e.netValue,void 0,""))||void 0===i?void 0:i.length)||0).fill("-").join("")})})]})},$n=n(87943),Rn="content___VzqrF",qn="coin___lxZ8a",Gn="operationContainer___pVVjp",Un="longColor___i6mFX",Wn="shortColor___kUd2O",Yn="leverageText___M5MFB",Jn="pnlContainer___qPyrN",Qn="pnl___m2VoU",Xn="pnlValue___QYeuB",Kn="prices___kiXby",et="priceContainer___BYY83",it="priceTitle___MzCfX",nt="priceValue____kzul",tt=function(e){var i=e.row,n=e.children,t=i.isLong,r=i.pair,l=i.leverage,a=i.PNLRate,s=i.averagePrice,o=i.indexPrice;return(0,R.jsx)($n.T,{title:"Share Position",downloadName:"Dei.io_share",coin:r,content:(0,R.jsx)($n.v,{startTimestamp:Date.now(),children:(0,R.jsxs)("div",{className:Rn,children:[(0,R.jsxs)("span",{className:qn,children:[r," Perpetual"]}),(0,R.jsxs)("div",{className:Gn,children:[(0,R.jsx)("span",{className:t?Un:Wn,children:t?"LONG":"SHORT"}),(0,R.jsxs)("span",{className:Yn,children:[l,"x"]})]}),(0,R.jsxs)("div",{className:Jn,children:[(0,R.jsx)("span",{className:Qn,children:"PNL"}),(0,R.jsxs)("span",{className:"".concat(Xn," ").concat(Number(a)<0?Wn:Un),children:[Number(a)<0?"":"+",a,"%"]})]}),(0,R.jsx)("div",{className:Kn,children:[{titleId:"Entry",price:s},{titleId:"Index",price:o}].map((function(e){return(0,R.jsxs)("div",{className:et,children:[(0,R.jsxs)("span",{className:it,children:[(0,R.jsx)(_e._H,{id:e.titleId})," ",(0,R.jsx)(_e._H,{id:"Price"})]}),(0,R.jsx)("span",{className:nt,children:(i=e.price,i?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(i):"$--")})]},e.titleId);var i}))})]})}),children:(0,R.jsx)("span",{children:n})})},rt=Object.defineProperty,lt=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable,ot=(e,i,n)=>i in e?rt(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n;const ct=e=>o.createElement("svg",((e,i)=>{for(var n in i||(i={}))at.call(i,n)&&ot(e,n,i[n]);if(lt)for(var n of lt(i))st.call(i,n)&&ot(e,n,i[n]);return e})({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M11 6a1 1 0 1 0 2 0 1 1 0 0 0-2 0ZM11 12a1 1 0 1 0 2 0 1 1 0 0 0-2 0ZM11 18a1 1 0 1 0 2 0 1 1 0 0 0-2 0Z",fill:"#fff"}),o.createElement("path",{d:"M11 6a1 1 0 1 0 2 0 1 1 0 0 0-2 0ZM11 12a1 1 0 1 0 2 0 1 1 0 0 0-2 0ZM11 18a1 1 0 1 0 2 0 1 1 0 0 0-2 0Z",stroke:"#fff"}));var dt=n(13012),ut=n.n(dt),vt=n(32170),mt=n(51172),xt=function(e){var i=Object.assign({},(ut()(e),e));return(0,R.jsx)(vt.ZP,{theme:{token:{colorBgElevated:"#313348",colorText:"#fff",controlItemBgHover:"rgba(255,255,255,.1)"}},children:(0,R.jsx)(mt.Z,f()({},i))})},ft=function(e){var i=e.row,n=e.handleSelectMarket,t=e.handleEditCollateral,r=[{key:"1",label:(0,R.jsx)("span",{className:un,onClick:function(){return t()},children:"Edit Collateral"})},{key:"2",label:(0,R.jsx)("span",{className:un,onClick:n,children:"Select Market"})},{key:"3",label:(0,R.jsxs)(tt,{row:i,children:[(0,R.jsx)(_e._H,{id:"Share"})," ",(0,R.jsx)(_e._H,{id:"Position"})]})}];return(0,R.jsx)(xt,{placement:"bottom",trigger:["click"],menu:{items:r},children:(0,R.jsx)(ct,{className:ln})})},ht=(0,ie.tq)()?function(e){var i=e.data,n=e.handleClosePositon,t=e.handleEditCollateral,r=(0,J.x)().chainId,l=(0,c.FV)((0,u.N6)(r)),s=a()(l,2),o=s[0],d=s[1];return(0,R.jsx)("div",{className:Sn,children:i.map((function(e,i){var r;return(0,R.jsxs)("div",{className:In,children:[(0,R.jsxs)("div",{className:bn,onClick:function(){return Tn(null==e?void 0:e.pair,(null==o?void 0:o.name)||"",d)},children:[(0,R.jsxs)("div",{className:On,children:[(0,R.jsxs)("div",{children:[" ",e.pair," "]})," ",(0,R.jsxs)("div",{children:[Number(null==e?void 0:e.leverage).toFixed(2),"x"]})," ",(0,R.jsx)("div",{className:N()(Nn,(r={},m()(r,yn,e.isLong),m()(r,Ln,!e.isLong),r)),children:e.isLong?"Long":"Short"})," "]}),(0,R.jsx)("span",{className:Mn,children:Ie(null==e?void 0:e.PNL,null==e?void 0:e.PNLRate)})]}),[{renderTitle:function(){return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(_e._H,{id:"Postion"})," ",(0,R.jsx)(_e._H,{id:"Size"})]})},value:(0,ee.xP)(e.size,void 0,"$")},{renderTitle:function(){return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(_e._H,{id:"Net"})," ",(0,R.jsx)(_e._H,{id:"Value"})]})},value:(0,ee.xP)(null==e?void 0:e.netValue,void 0,"$")},{renderTitle:function(){return(0,R.jsx)(_e._H,{id:"Collateral"})},value:(0,R.jsx)(Vn,{row:e,handleEditCollateral:t})},{renderTitle:function(){return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(_e._H,{id:"Open"})," ",(0,R.jsx)(_e._H,{id:"Price"})," / ",(0,R.jsx)(_e._H,{id:"Mark"})," ",(0,R.jsx)(_e._H,{id:"Price"})]})},value:"".concat((0,ee.xP)(null==e?void 0:e.averagePrice,void 0,"$")," / ").concat((0,ee.xP)(null==e?void 0:e.indexPrice,void 0,"$"))},{renderTitle:function(){return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(_e._H,{id:"Liq"}),". ",(0,R.jsx)(_e._H,{id:"Price"})]})},value:(0,ee.xP)(e.liqPrice,void 0,"$")}].map((function(e,i){return(0,R.jsxs)("div",{className:kn,children:[(0,R.jsx)("span",{className:Fn,children:e.renderTitle()}),(0,R.jsx)("span",{className:En,children:e.value})]},i)})),(0,R.jsxs)("div",{className:Dn,children:[(0,R.jsx)("div",{className:An,onClick:function(){return n(e,i)},children:(0,R.jsx)(_e._H,{id:"Close"})}),(0,R.jsxs)("div",{className:An,onClick:function(){return t(e)},children:[(0,R.jsx)(_e._H,{id:"Edit"})," ",(0,R.jsx)(_e._H,{id:"Collateral"})]}),(0,R.jsx)("div",{className:An,children:(0,R.jsx)(tt,{row:e,children:(0,R.jsx)(_e._H,{id:"Share"})})})]})]})}))})}:function(e){var i=e.data,n=e.handleEditCollateral,t=e.handleClosePositon,r=e.handleSelectMarket,l=(0,J.x)().chainId,s=(0,o.useState)(-1),d=a()(s,2),v=d[0],x=d[1],f=(0,c.FV)((0,u.N6)(l)),h=a()(f,2),_=h[0],p=h[1],g=function(e){x(e)},j=[{title:"Position",render:function(e,i,n){var t,r;return(0,R.jsxs)("div",{className:N()((t={},m()(t,bn,v!==n),m()(t,Pn,v===n),t)),onClick:function(){return Tn(null==e?void 0:e.pair,(null==_?void 0:_.name)||"",p)},onMouseOver:function(){return g(n)},onMouseLeave:function(){return g(-1)},children:[(0,R.jsx)("div",{children:e.pair}),(0,R.jsx)("div",{children:(0,ee.xP)(null==e?void 0:e.leverage,void 0,"","x")}),(0,R.jsx)("div",{className:N()(Nn,(r={},m()(r,yn,e.isLong),m()(r,Ln,!e.isLong),r)),children:e.isLong?"Long":"Short"}),v===n&&(0,R.jsx)("span",{children:">"})]})}},{title:"Size",dataIndex:"size",key:"size",render:function(e){return(0,ee.xP)(e,void 0,"$")}},{title:"Collateral",render:function(e,i,t){return(0,R.jsx)(Vn,{row:e,handleEditCollateral:function(){return n(e,t)}})}},{width:120,title:"Net Value",render:Bn},{title:"Entry Price",dataIndex:"averagePrice",key:"averagePrice",render:function(e){return(0,ee.xP)(e,void 0,"$")}},{title:"Index Price",width:120,render:function(e){return(0,ee.xP)(e.indexPrice,void 0,"$")}},{title:"Liq. Price",dataIndex:"liqPrice",render:function(e){return(0,ee.xP)(e,void 0,"$")}},{width:120,title:"",render:function(e,i,l){return(0,R.jsxs)("div",{className:wn,children:[(0,R.jsx)("div",{className:Cn,onClick:function(){return t(e,l)},children:"Close"}),(0,R.jsx)(ft,{row:e,handleEditCollateral:function(){return n(e,l)},handleSelectMarket:r})]})}}];return(0,R.jsx)(We.ZP,{emptyText:"",className:jn,columns:j,data:i})},_t=function(e){var i=e.market,n=e.successCb,t=e.tradeShowArgs,r=(0,o.useState)(),l=a()(r,2),s=l[0],d=l[1],v=(0,o.useState)(),m=a()(v,2),x=m[0],f=m[1],h=(0,o.useState)(void 0),_=a()(h,2),p=_[0],g=_[1],j=(0,o.useState)(void 0),b=a()(j,2),P=b[0],N=b[1],y=(0,o.useState)(!1),L=a()(y,2),w=L[0],C=L[1],S=(0,o.useState)(!1),I=a()(S,2),O=I[0],k=I[1],F=(0,c.sJ)(u.mY);return(0,o.useEffect)((function(){void 0!==p&&F[p]&&d(F[p]),void 0!==P&&F[P]&&f(F[P]),console.log("positions",P,p),console.log("positions data",s,x)}),[F]),(0,R.jsxs)(R.Fragment,{children:[w&&x&&(0,R.jsx)(gn,{isVisible:w,setIsVisible:C,row:x,market:i,tradeShowArgs:t,successCb:n}),O&&s&&(0,R.jsx)(_n,{isVisible:O,setIsVisible:k,row:s,tradeShowArgs:t,successCb:n}),(0,R.jsxs)("div",{className:vn,children:[(0,R.jsx)(ht,{data:F,handleClosePositon:function(e,i){k(!0),d(e),g(i)},handleEditCollateral:function(e,i){console.log("handleEditCollateral",e,i),C(!0),f(e),N(i)}}),!(null!=F&&F.length)&&(0,R.jsx)(we,{text:"No open positions"})]})]})},pt=function(e){var i=(0,J.x)().chainId,n=e.market,t=e.infoTokens,r=void 0===t?{"0x0000000000000000000000000000000000000000":{isWrapped:!0,symbol:"WETH",baseSymbol:"ETH"}}:t,l=e.tradeShowArgs,s=e.showPnlAfterFees,d=(0,o.useState)(0),v=a()(d,2),x=v[0],f=v[1],h=(0,c.FV)(u.WW),_=a()(h,2),p=_[0],g=_[1],j=(0,c.FV)(u.in),b=a()(j,2)[1],P=de.I.useContainer(),y=P.tableFlag,L=P.setTableFlag,w=(0,c.FV)(u.hm),C=a()(w,2)[1],S=(0,c.FV)(u.fS),I=a()(S,2)[1],O=(0,c.sJ)(u.Fp),k=(0,c.sJ)(u.MM);(0,o.useEffect)((function(){if(!l)return I([]),C([]),void b([]);ei(l).then((function(e){return I(e)})),(0,ni.ui)(l).then((function(e){return C(e)})),si(l).then((function(e){return b(e)}))}),[l,y,i]);var F=function(){L(!y)};return(0,R.jsx)("div",{className:Qi,children:(0,R.jsxs)(he.O.Group,{defaultIndex:x,onChange:function(e){f(e)},children:[(0,R.jsxs)("div",{className:nn,children:[(0,R.jsxs)(he.O.List,{className:Xi,children:[(0,R.jsxs)(he.O,{className:function(e){var i=e.selected;return N()(Ki,m()({},en,i))},children:["Positions ",O]}),(0,R.jsxs)(he.O,{className:function(e){var i=e.selected;return N()(Ki,m()({},en,i))},children:["Orders ",k]}),(0,R.jsx)(he.O,{className:function(e){var i=e.selected;return N()(Ki,m()({},en,i))},children:"Trades"})]}),(0,R.jsxs)("div",{className:tn,children:[(0,R.jsx)(_e._H,{id:"Hide Other Pairs"}),(0,R.jsx)(mi,{className:rn,checked:p,onChange:g})]})]}),(0,R.jsxs)(he.O.Panels,{children:[(0,R.jsx)(he.O.Panel,{children:(0,R.jsx)(_t,{successCb:F,showPnlAfterFees:s,market:n,tradeShowArgs:l},+y)}),(0,R.jsx)(he.O.Panel,{children:(0,R.jsx)(Ji,{tradeShowArgs:e.tradeShowArgs,successCb:F},+y)}),(0,R.jsx)(he.O.Panel,{children:(0,R.jsx)(Qe,{infoTokens:r,successCb:F},+y)})]})]})})},gt=n(73539),jt=n(35386),bt=Object.defineProperty,Pt=Object.getOwnPropertySymbols,Nt=Object.prototype.hasOwnProperty,yt=Object.prototype.propertyIsEnumerable,Lt=(e,i,n)=>i in e?bt(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n;const wt=e=>o.createElement("svg",((e,i)=>{for(var n in i||(i={}))Nt.call(i,n)&&Lt(e,n,i[n]);if(Pt)for(var n of Pt(i))yt.call(i,n)&&Lt(e,n,i[n]);return e})({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M11.478 18h3.478l5.294-6-5.294-6h-3.478l4.193 4.85H3.75v2.3h11.921L11.478 18Z",fill:"#F44364"}));var Ct=Object.defineProperty,St=Object.getOwnPropertySymbols,It=Object.prototype.hasOwnProperty,Ot=Object.prototype.propertyIsEnumerable,kt=(e,i,n)=>i in e?Ct(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n;const Ft=e=>o.createElement("svg",((e,i)=>{for(var n in i||(i={}))It.call(i,n)&&kt(e,n,i[n]);if(St)for(var n of St(i))Ot.call(i,n)&&kt(e,n,i[n]);return e})({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M7.652 12h2.319L13.5 8 9.97 4H7.653l2.795 3.234H2.5v1.532h7.947L7.652 12Z",fill:"#3DDB7C"}));var Et="value___QTafV",Mt="old___nWboE",Dt="new___MFwco",At="arrowIcon___wpnLP",Tt="red___ta54J",zt=function(e){var i=e.symbolPrefix,n=void 0===i?"$":i,t=e.suffix,r=void 0===t?"":t,l=e.hasExistingPosition,a=e.priceDisplay,s=function(e){return e&&Number(e)>0?"".concat(n).concat(e).concat(r):"-"};return(0,R.jsx)("div",{className:Et,children:l&&a&&a.mergePositionPrice&&a.mergePositionPrice.gt(0)?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:Mt,children:s(null==a?void 0:a.existingPositionPrice.toFixed(2,1))}),(0,R.jsx)(Ft,{className:N()(At,m()({},Tt,((null==a?void 0:a.rise)||0)<0))}),(0,R.jsx)("div",{className:Dt,children:s(null==a?void 0:a.mergePositionPrice.toFixed(2,1))})]}):(0,R.jsx)("div",{className:Dt,children:s(null==a?void 0:a.mergePositionPrice.toFixed(2,1))})})},Ht={arrowIcon:"arrowIcon___iG0uS",red:"red___cXHfH",header:"header___hkqkP",row:"row___gfzWa",price:"price___k5Z9o",tip:"tip___F0_el",title:"title___FCH8V",changeInfoItem:"changeInfoItem___LaDtd",titleLabel:"titleLabel___EWjyx",changeInfo:"changeInfo___rSff6",changeInfoText:"changeInfoText___RTV2Y",fields:"fields___x3gUc",field:"field___qxsTj",label:"label___J7n5A",value:"value___m6nh9",old:"old___CU5un",new:"new___dIyoY",cut:"cut___T5uNM",submitBtn:"submitBtn___aBHIR",longColor:"longColor___DWLUi"},Zt=Hn.Z.Text,Vt=function(e){var i,n,t,r=e.size,l=e.slippage,a=e.liqPriceDisplay,s=e.positionFee,d=e.collateralDisplay,v=e.leverageDisplay,x=e.positionSizeDisplay,f=e.tradeShowArgs,h=e.fundingFee,_=e.hasExistingPosition,p=e.isPendingConfirmation,g=e.isMarketOrder,j=e.isLong,b=e.fromValue,P=e.toValue,y=e.toSymbol,L=e.entryPriceDisplay,w=(0,J.x)().chainId,C=e.visible,S=e.existingPosition,I=e.onClickSubmit,O=e.onClose,k=(0,c.sJ)(u.fS),F=(0,c.sJ)((0,u.N6)(w)),E=null===(i=(0,mn.H2)((null==f||null===(n=f.market)||void 0===n||null===(t=n._args)||void 0===t?void 0:t.spread)||0,10))||void 0===i?void 0:i.toNumber(),M=(0,o.useMemo)((function(){if(_)return" You already have an ".concat(j?"long":"short"," position that will increase the size of an existing position.");if(F){var e=(k||[]).filter((function(e){return"Trigger"===e.type&&e.pair===F.name&&e.isLong===j}));if(1===e.length)return"You have an active trigger order that could impact this Position";if(e.length>1)return"You have multiple active trigger orders that could impact this Position";var i=(k||[]).filter((function(e){return"Limit"===e.type&&e.pair===F.name&&e.isLong===j}));if(i.length>0)return i.length>1?"You have multiple existing Increase ".concat(j?"Long":"Short"," ").concat(y," limit orders"):"You have an active Limit Order that could impact this Position"}}),[F,k,S,j,_]),D=[{label:"Position Size",display:x},{label:"Leverage",display:v,prefix:"",suffix:"x"},{label:"Collateral",display:d}],A=(0,o.useMemo)((function(){return(0,Y.O)(b||0).toFixed(2,1)}),[b]);return(0,R.jsx)(fi.Z,{width:512,title:g?"Confirm ".concat(y,j?" Long":" Short"):"Confirm Limit Order",onClose:O,visible:C,children:(0,R.jsxs)("div",{className:Ht.wrapper,children:[(0,R.jsxs)("div",{className:Ht.header,children:[(0,R.jsxs)("div",{className:Ht.title,children:[(0,R.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iMTYiIGZpbGw9InVybCgjYSkiLz48cmVjdCB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHJ4PSIxNiIgZmlsbD0idXJsKCNiKSIvPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTEuMDUgNS45NWExLjIgMS4yIDAgMCAxIDEuMi0xLjJIMTZhMTEuMjIgMTEuMjIgMCAwIDEgOC4yNDggMy42SDExLjA1di0yLjRabTAgOC4yNWgxNi4wNTdhMTEuMzM3IDExLjMzNyAwIDAgMSAwIDMuNkgxMS4wNXYtMy42Wm0wIDkuNDV2Mi40YTEuMiAxLjIgMCAwIDAgMS4yIDEuMkgxNmExMS4yMiAxMS4yMiAwIDAgMCA4LjI0OC0zLjZIMTEuMDVaIiBmaWxsPSIjZmZmIi8+PHBhdGggb3BhY2l0eT0iLjYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNi44MzQgOS40NzVhMTEuMjAxIDExLjIwMSAwIDAgMC0xLjcgMy42aDIxLjczMmExMS4yMDIgMTEuMjAyIDAgMCAwLTEuNy0zLjZINi44MzNabTAgMTMuMDVhMTEuMjAzIDExLjIwMyAwIDAgMS0xLjctMy42aDIxLjczMmExMS4yMDUgMTEuMjA1IDAgMCAxLTEuNyAzLjZINi44MzNabTkuMTQ4IDQuNzI1aC4wMzUtLjAzNVoiIGZpbGw9IiNmZmYiLz48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSIwIiB5MT0iMCIgeDI9IjM5LjE3MiIgeTI9IjEwLjg2IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iIzNDRUFBQSIvPjxzdG9wIG9mZnNldD0iLjc3MSIgc3RvcC1jb2xvcj0iIzVDNzJGRiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iMCIgeTE9IjAiIHgyPSIzOS4xNzIiIHkyPSIxMC44NiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiMzQ0VBQUEiLz48c3RvcCBvZmZzZXQ9Ii43NzEiIHN0b3AtY29sb3I9IiM1QzcyRkYiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48L3N2Zz4="}),(0,R.jsxs)("div",{className:N()(Ht.titleLabel,m()({},Ht.longColor,j)),children:[null==F?void 0:F.name," ",j?"LONG":"SHORT"]})]}),(0,R.jsxs)("div",{className:Ht.changeInfo,children:[(0,R.jsxs)(Zt,{className:"".concat(Ht.changeInfoText," c200 f16 fw3 tc"),children:["Pay ",A," USDC ($",A,")"]}),(0,R.jsx)("div",{children:(0,R.jsx)(wt,{className:N()(Ht.arrowIcon,{cLong:j})})}),(0,R.jsxs)(Zt,{className:"".concat(Ht.changeInfoText," c200 f16 fw3 tc"),children:[j?"Long":"Short"," ","".concat((0,Y.O)(P).toFixed(4,1)," ")," ",y," ($",r,")"]})]})]}),M&&(0,R.jsx)("div",{className:Ht.tip,children:M}),(0,R.jsxs)("div",{className:Ht.fields,children:[(D||[]).map((function(e){var i=e.display,n=e.suffix,t=e.prefix,r=e.label;return(0,R.jsxs)("div",{className:Ht.field,children:[(0,R.jsx)("div",{className:Ht.label,children:(0,R.jsx)(_e._H,{id:r})}),(0,R.jsx)(zt,{suffix:n,symbolPrefix:t,hasExistingPosition:_,priceDisplay:i})]},r)})),(0,R.jsxs)("div",{className:Ht.field,children:[(0,R.jsx)("div",{className:Ht.label,children:(0,R.jsx)(_e._H,{id:"Open Fee"})}),(0,R.jsx)("div",{className:Ht.value,children:(0,R.jsxs)("div",{className:Ht.new,children:["$",s]})})]}),(0,R.jsxs)("div",{className:Ht.field,children:[(0,R.jsx)("div",{className:Ht.label,children:(0,R.jsx)(_e._H,{id:"Fund Fee"})}),(0,R.jsx)("div",{className:Ht.value,children:(0,R.jsx)("div",{className:Ht.new,children:"".concat(h||"-")})})]}),(0,R.jsx)("div",{className:Ht.cut}),(0,R.jsxs)("div",{className:Ht.field,children:[(0,R.jsx)("div",{className:Ht.label,children:(0,R.jsx)(_e._H,{id:"Entry Price"})}),(0,R.jsx)(zt,{hasExistingPosition:_,priceDisplay:L})]}),(0,R.jsxs)("div",{className:Ht.field,children:[(0,R.jsx)("div",{className:Ht.label,children:(0,R.jsx)(_e._H,{id:"Liq. Price"})}),(0,R.jsx)(zt,{hasExistingPosition:_,priceDisplay:a})]}),(0,R.jsx)("div",{className:Ht.cut}),(0,R.jsxs)("div",{className:Ht.field,children:[(0,R.jsx)("div",{className:Ht.label,children:(0,R.jsx)(_e._H,{id:"Type"})}),(0,R.jsx)("div",{className:Ht.value,children:(0,R.jsx)("div",{className:Ht.new,children:g?"Market":"Limit"})})]}),(0,R.jsxs)("div",{className:Ht.field,children:[(0,R.jsx)("div",{className:Ht.label,children:(0,R.jsx)(_e._H,{id:"Spread"})}),(0,R.jsx)("div",{className:Ht.value,children:(0,R.jsxs)("div",{className:Ht.new,children:[E,"%"]})})]}),(0,R.jsxs)("div",{className:Ht.field,children:[(0,R.jsx)("div",{className:Ht.label,children:(0,R.jsx)(_e._H,{id:"Slippage"})}),(0,R.jsx)("div",{className:Ht.value,children:(0,R.jsxs)("div",{className:Ht.new,children:[l,"%"]})})]})]}),(0,R.jsx)("button",{disabled:p,type:"button",className:Ht.submitBtn,onClick:I,children:function(){if(!p){false;var e=g?j?"Long":"Short":"Create Order";return g&&X.bD>0?"Accept minimum and ".concat(e):e}return g?j?"Longing...":"Shorting...":"Creating Order..."}()})]})})},Bt=n(6277),$t=n(6226),Rt=n(15560),qt=(n(39843),{header:"header___TC62F",field:"field___SKQvO",value:"value___ZPyQn",leverage:"leverage___DJlMu",multiple:"multiple___TgITL",customInput:"customInput___vG08t",item:"item___kY23e",active:"active___NJOgJ",sliderBox:"sliderBox___OugRQ",leverageInputBox:"leverageInputBox___xKTLL",slider:"slider___JsDOm"}),Gt=["10","20","50","100"],Ut={2:{label:"2x",style:{color:"#fff",fontSize:"14px"}},100:{label:"100x",style:{color:"#fff",fontSize:"14px"}}},Wt=function(e){var i=e.onChange,n=e.value,t=(0,o.useState)(!1),r=a()(t,2),l=r[0],s=r[1];return(0,R.jsxs)("div",{children:[(0,R.jsxs)("div",{className:qt.header,children:[(0,R.jsxs)("div",{className:qt.field,children:[(0,R.jsx)("div",{className:qt.label,children:"Leverage: "}),(0,R.jsxs)("div",{className:qt.value,children:[n||"0","x"]})]}),(0,R.jsx)(mi,{checked:l,onChange:s})]}),l?(0,R.jsx)("div",{className:qt.sliderBox,children:(0,R.jsx)(Rt.Z,{value:Number(n),railStyle:{opacity:.2,background:"linear-gradient(105.49deg, #3CEAAA 0%, #5C72FF 79.56%)"},onChange:function(e){return i(String(e))},className:qt.slider,min:2,max:100,marks:Ut,step:.1})}):(0,R.jsxs)(Bt.Z,{gutter:8,className:qt.leverageInputBox,children:[(0,R.jsx)($t.Z,{flex:1,children:(0,R.jsx)(hi.ZP,{decimals:2,value:n,onChange:function(e){return i(e)},className:qt.customInput})}),Gt.map((function(e){return(0,R.jsx)($t.Z,{children:(0,R.jsx)("div",{onClick:function(){return i(e)},className:N()(qt.item,m()({},qt.active,e===n)),children:"".concat(e,"x")},e)},e)}))]})]})},Yt=Object.defineProperty,Jt=Object.getOwnPropertySymbols,Qt=Object.prototype.hasOwnProperty,Xt=Object.prototype.propertyIsEnumerable,Kt=(e,i,n)=>i in e?Yt(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n;const er=e=>o.createElement("svg",((e,i)=>{for(var n in i||(i={}))Qt.call(i,n)&&Kt(e,n,i[n]);if(Jt)for(var n of Jt(i))Xt.call(i,n)&&Kt(e,n,i[n]);return e})({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"m10 12.586 4-4 5.707 5.707L22 12v6h-6l2.293-2.293L14 11.414l-4 4-7.707-7.707 1.414-1.414L10 12.586Z",fill:"#F44364"}));var ir=Object.defineProperty,nr=Object.getOwnPropertySymbols,tr=Object.prototype.hasOwnProperty,rr=Object.prototype.propertyIsEnumerable,lr=(e,i,n)=>i in e?ir(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n;const ar=e=>o.createElement("svg",((e,i)=>{for(var n in i||(i={}))tr.call(i,n)&&lr(e,n,i[n]);if(nr)for(var n of nr(i))rr.call(i,n)&&lr(e,n,i[n]);return e})({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"m10 12.414 4 4 5.707-5.707L22 13V7h-6l2.293 2.293L14 13.586l-4-4-7.707 7.707 1.414 1.414L10 12.414Z",fill:"#fff"}));var sr=n(70215),or=n.n(sr),cr={"dei-button":"dei-button___j8sPT","dei-button-middle":"dei-button-middle___KSv19","dei-button-large":"dei-button-large___BjyGb",primary:"primary___M4RdZ",default:"default___d9Xff",border:"border___QcMcN",disabled:"disabled___bsAvV"},dr=["size","onClick","children","className","disabled","type"],ur=function(e){var i=e.size,n=void 0===i?"large":i,t=e.onClick,r=e.children,l=e.className,a=e.disabled,s=e.type,c=void 0===s?"primary":s,d=or()(e,dr),u=(0,o.useMemo)((function(){return N()(cr["dei-button"],cr["dei-button-".concat(n)],cr[c],l,m()({},cr.disabled,a))}),[n,l,a,c]);return(0,R.jsx)("button",f()(f()({onClick:t,className:u,disabled:a},d),{},{children:r}))},vr=n(13805),mr="field___lFCUO",xr="label___Ut9cW",fr="value___TeWjD",hr=function(e){var i=e.liqPriceDisplay,n=e.entryPriceDisplay,t=e.hasExistingPosition,r=e.fundingFee,l=e.availableLiquidity,a=e.positionFee,s=function(e){return e&&Number(e)>0?"$".concat(e):"-"};return(0,R.jsxs)("div",{children:[(0,R.jsxs)("div",{className:mr,children:[(0,R.jsx)("div",{className:xr,children:"Entry Price"}),(0,R.jsx)(zt,{hasExistingPosition:t,priceDisplay:n})]}),(0,R.jsxs)("div",{className:mr,children:[(0,R.jsx)("div",{className:xr,children:"Liq. Price"}),(0,R.jsx)(zt,{hasExistingPosition:t,priceDisplay:i})]}),(0,R.jsxs)("div",{className:mr,children:[(0,R.jsx)("div",{className:xr,children:"Open Fee"}),(0,R.jsx)("div",{className:fr,children:s(a)})]}),(0,R.jsxs)("div",{className:mr,children:[(0,R.jsx)("div",{className:xr,children:"Fund Fee"}),(0,R.jsx)("div",{className:fr,children:r})]}),(0,R.jsxs)("div",{className:mr,children:[(0,R.jsx)("div",{className:xr,children:"Available Liquidity"}),(0,R.jsx)("div",{className:fr,children:s(l)})]})]})},_r={tabList:"tabList___yWdXa",tabLong:"tabLong___tGsCL",tabShort:"tabShort___bAVl0",selected:"selected___YaUw9",label:"label___V2PWs",tradeBar:"tradeBar___CpLnN",tradePanel:"tradePanel___AMHi2",options:"options___ewpuO",option:"option___NDplS",optionActive:"optionActive___Kv41n",row:"row___dT_JX",size:"size___EuhIT",value:"value___BtMri",field:"field___ob36v",panel:"panel___lJHih",cut:"cut___YHMHw",advanced:"advanced___UjvFf"},pr=function(e){var i=e.indexPrice,n=e.tradeShowArgs,t=e.orderOption,l=e.swapOption,v=e.onChangeSwapOption,x=e.onChangOrderOption,h=(0,s.Ge)(),_=h.active,p=h.account,g=(0,J.x)().chainId,j=(0,c.sJ)((0,u.N6)(g)),b=(0,o.useState)(!1),P=a()(b,2),y=P[0],L=P[1],w=(0,o.useState)(i),C=a()(w,2),S=C[0],I=C[1],O=(0,o.useState)(!1),k=a()(O,2),F=k[0],E=k[1],M=t===X.YO,D=l===X.FB,A=(0,o.useState)(!1),T=a()(A,2),z=T[0],H=T[1],Z=(0,o.useState)(!0),V=a()(Z,2),B=V[0],$=V[1],q=(0,o.useState)(""),G=a()(q,2),U=G[0],W=G[1],Q=(0,o.useState)(""),ee=a()(Q,2),ie=ee[0],ne=ee[1],te=de.I.useContainer().setWalletVisible,re=(0,c.sJ)(u.hm),le=(0,o.useState)(),ae=a()(le,2),se=ae[0],oe=ae[1],ue=de.I.useContainer().setPendingTxns,ve=null==n?void 0:n.openFeeRate,me=null==n?void 0:n.executionFee,xe=null==n?void 0:n.market,fe=null==xe?void 0:xe._valid.maxLev,he=M?i:S,pe=de.I.useContainer(),ge=pe.tableFlag,je=pe.setTableFlag;(0,o.useEffect)((function(){!se&&n&&oe({takeProfit:null==n?void 0:n.takeProfit,stopLoss:null==n?void 0:n.stopLoss,slippage:null==n?void 0:n.slippage})}),[null==n?void 0:n.takeProfit,null==n?void 0:n.stopLoss,null==n?void 0:n.slippage]);var be=(0,gt.Z)(Object.create(null)),Pe=a()(be,2),Ne=(Pe[0],Pe[1]),ye=Ne.set,Le=(0,Ne.get)(p);(0,o.useEffect)((function(){!Le&&p&&null!=n&&n.market&&n.market.allowance(p).then((function(e){ye(p,e&&e.gt&&e.gt(0))}))}),[null==n?void 0:n.market,p,Le]);var we=function(e){t!==e&&(e!==X.VZ||S&&"0"!==S||I(i),oe(f()(f()({},se),{},{stopLoss:"",takeProfit:""})),x(e))},Ce=function(e){e!==l&&(oe(f()(f()({},se),{},{stopLoss:"",takeProfit:""})),I(""),v(e))},Se=(0,o.useMemo)((function(){if(j&&re&&re.length>0){var e="".concat(D?"Long":"Short");return re.find((function(i){return i.pair===j.name&&i.account===p&&i.side===e}))}return null}),[re,D,j]);(0,o.useEffect)((function(){$(!0),W("")}),[M,D]);var Ie=(0,o.useMemo)((function(){return Boolean(Se&&Se.size&&(0,Y.O)(Se.size).gt(0))}),[Se]),Oe=(0,d.ZP)((function(){return p&&null!=j&&j.address?[p,null==j?void 0:j.address]:null}),(function(){var e;return null==n||null===(e=n.reader)||void 0===e?void 0:e.availableLiquidity(p,j.address,D)})).data,ke=(0,o.useMemo)((function(){return null==n?void 0:n.market.formatNum(Oe,2)}),[Oe,null==n?void 0:n.market.getTokenDigits()]),Fe=(0,d.ZP)((function(){return null!=n&&n.market?n:null}),(function(){return ce.a.getFundFeeRete(n,D)})).data,Ee=(0,o.useMemo)((function(){return null!=j&&j.name?j.name.split("/")[0]:""}),[j]),Me=(0,K.Ju)([g,"depx-swap-leverage-option"],"10"),De=a()(Me,2),Ae=De[0],Te=De[1];var ze=(0,o.useMemo)((function(){return ce.a.getSize((0,Y.O)(U),(0,Y.O)(ve||"0"),Number(Ae))}),[U,Ae,ve]);(0,jt.Z)((function(){var e=(0,Y.O)(he),i=(0,Y.O)(ve||"0");if(B){if(!U)return void ne("");if(!ve||0===Number(he))return;var n=ce.a.getNextAmount((0,Y.O)(U),e,i,Number(Ae)).toFixed(18,1);ne(n)}else if(ie&&Ae&&0!==Number(he)){var t=ce.a.getNextPay((0,Y.O)(ie),e,i||(0,Y.O)(0),Number(Ae)).toFixed(8,1);W(t)}else W("")}),400,[n,ie,B,Ae,ve,U]);var He=(0,o.useMemo)((function(){var e,i=(0,Y.O)(ve||0),t=ce.a.getOpenFee(ze,i),r=(0,Y.O)(he),l=(0,Y.O)(U),a=(0,Y.O)(M?0:me),s=(0,Y.O)(null!==(e=null==n?void 0:n.cleanFee)&&void 0!==e?e:"0"),o=ce.a.getEntryPriceDisplay(r,ze,D,Se);if(U&&Ae&&he){var c=ce.a.getConfirmStat({size:ze,leverageOption:Number(Ae),executionFee:a,entryPrice:o.mergePositionPrice,existingPosition:Se,positionFeeRate:(0,Y.O)(ve||0),hasExistingPosition:Ie,pay:l,openFee:t,cleanFee:s}),d=c.getCollateralDisplay(),u=(0,Y.O)((null==fe?void 0:fe.toNumber())||100),v=c.getLigPriceDisplay(o.mergePositionPrice,u,D,i),m=c.getNextSizeDisplay(),x=c.getLeverageDisplay();return{entryPriceDisplay:o,openFee:t.toFixed(2,1),liqPriceDisplay:v,collateralDisplay:d,leverageDisplay:x,positionSizeDisplay:m}}return{entryPriceDisplay:o,openFee:t.toFixed(2,1)}}),[U,ze,fe,Se,he,ie,me,D,M,Ae,ve]),Ze=He.openFee,Ve=He.liqPriceDisplay,Be=He.collateralDisplay,$e=He.leverageDisplay,Re=He.positionSizeDisplay,qe=He.entryPriceDisplay,Ge=function(){if(y)return[(0,R.jsx)(_e._H,{id:"Approving..."}),!0];if(F)return["".concat(D?"Long":"Short"," ").concat(Ee),!0];if(!_)return[(0,R.jsx)(_e._H,{id:"Connect Wallet"}),!1];if(!Le)return[(0,R.jsx)(_e._H,{id:"Approve"}),!1];if(!(0,vr.EC)(g))return[(0,R.jsx)(_e._H,{id:"Incorrect Network"}),!0];var e=function(){if(!(M||S&&"0"!==S))return(0,R.jsx)(_e._H,{id:"Enter A Price"});if(!he)return(0,R.jsx)(_e._H,{id:"Enter A Price"});var e=(0,Y.O)(he);if(e.eq(0))return(0,R.jsx)(_e._H,{id:"Enter A Price"});if(!M){if(D&&e.gt((0,Y.O)(i)))return(0,R.jsx)(_e._H,{id:"Price Above Current Price"});if(!D&&e.lt((0,Y.O)(i)))return(0,R.jsx)(_e._H,{id:"Price Below Current Price"})}if(!ie||(0,Y.O)(ie).eq(0))return(0,R.jsx)(_e._H,{id:"Enter An Amount"});var t=(0,Y.O)(U);if(t.eq(0))return(0,R.jsx)(_e._H,{id:"Enter An Amount"});if(t.gt((0,Y.O)((null==n?void 0:n.avlb)||U)))return(0,R.jsx)(_e._H,{id:"Insufficient USDC Balance"});if(t.lt(10))return(0,R.jsx)(_e._H,{id:"MinPayUSD",values:{min:10}});if(t.gt(pn))return(0,R.jsx)(_e._H,{id:"MaxPayUSD",values:{max:pn}});var r=(0,Y.O)(Oe);if(r.gt(0)&&ze.gt(r))return(0,R.jsx)(_e._H,{id:"MAXExceeded",values:{toSymbol:Ee,pos:D?"long":"short"}});var l=(null==fe?void 0:fe.toNumber())||100;if(Number(Ae)>l)return(0,R.jsx)(_e._H,{id:"MAXLeverage",values:{max:l}});if(Number(Ae)<2)return(0,R.jsx)(_e._H,{id:"MinLeverage",values:{min:2}});if(null!=se&&se.stopLoss){var a=(0,Y.O)(se.stopLoss);if(D&&a.gte(e))return(0,R.jsx)(_e._H,{id:"Stop Loss Above Current Price"});if(!D&&a.lte(e))return(0,R.jsx)(_e._H,{id:"Stop Loss Below Current Price"});if(D&&null!=Ve&&Ve.mergePositionPrice&&a.lte(Ve.mergePositionPrice))return(0,R.jsx)(_e._H,{id:"Stop Loss Below Liq. Price"});if(!D&&null!=Ve&&Ve.mergePositionPrice&&a.gte(Ve.mergePositionPrice))return(0,R.jsx)(_e._H,{id:"Stop Loss Above Liq. Price"})}if(null!=se&&se.takeProfit){var s=(0,Y.O)(se.takeProfit);if(D&&s.lte(e))return(0,R.jsx)(_e._H,{id:"Take Profit Below Current Price"});if(!D&&s.gte(e))return(0,R.jsx)(_e._H,{id:"Take Profit Above Current Price"});if(D&&null!=Ve&&Ve.mergePositionPrice&&s.lte(Ve.mergePositionPrice))return(0,R.jsx)(_e._H,{id:"Take Profit Below Liq. Price"});if(!D&&null!=Ve&&Ve.mergePositionPrice&&s.gte(Ve.mergePositionPrice))return(0,R.jsx)(_e._H,{id:"Take Profit Above Liq. Price"})}if(null!=se&&se.slippage){if(Number(se.slippage)>5)return(0,R.jsx)(_e._H,{id:"Slippage should be less than ".concat(5,"%")});if(Number(se.slippage)<.01)return(0,R.jsx)(_e._H,{id:"Slippage should be more than ".concat(.01,"%")})}return""}();return e?[e,!0]:Ee?M?["".concat(D?"Long":"Short"," ").concat(Ee),!1]:[(0,R.jsx)(_e._H,{id:"Create Limit Order"}),!1]:[(0,R.jsx)(_e._H,{id:"Create"}),!1]}(),Ue=a()(Ge,2),We=Ue[0],Ye=Ue[1],Je=(0,o.useMemo)((function(){return[null!=se&&se.takeProfit?ce.a.getEstimatedPNL({isLong:D,entryPrice:(0,Y.O)(he),price:(0,Y.O)(null==se?void 0:se.takeProfit),size:ze}).toFixed(2,1):"",null!=se&&se.stopLoss?ce.a.getEstimatedPNL({isLong:D,entryPrice:(0,Y.O)(he),price:(0,Y.O)(null==se?void 0:se.stopLoss),size:ze}).toFixed(2,1):""]}),[null==se?void 0:se.takeProfit,null==se?void 0:se.stopLoss,D,ze,he]),Qe=a()(Je,2),Xe=Qe[0],Ke=Qe[1],ei=(0,o.useMemo)((function(){return Fe?"".concat(ce.a.getFundFeeRateDisplay(Fe,D),"%/1 h"):"-"}),[Fe,D]);return(0,R.jsxs)("div",{className:_r.tradeBar,children:[(0,R.jsxs)("div",{className:_r.tradePanel,children:[(0,R.jsx)(Vt,{size:null==ze?void 0:ze.toFixed(2,1),entryPriceDisplay:qe,slippage:(null==se?void 0:se.slippage)||"0",tradeShowArgs:n,positionFee:Ze,liqPriceDisplay:Ve,collateralDisplay:Be,leverageDisplay:$e,positionSizeDisplay:Re,fundingFee:ei,isPendingConfirmation:F,existingPosition:Se,hasExistingPosition:Ie,toSymbol:Ee,fromValue:U,onClickSubmit:function(){_?F||p&&he&&(E(!0),function(e,i,n,t,r){if(n.market){var l={isLimit:n.isLimit,payDelta:n.market.getNumDecimals(n.pay),sizeDelta:n.market.getNumDecimals(n.size),price:n.market.getPriceDecimals(n.price),tpPrice:n.market.getPriceDecimals(n.takeProfit||"0"),slPrice:n.market.getPriceDecimals(n.stopLoss||"0"),slippage:n.market.getSlippageDecimals(n.market.formatPercentage(n.slippage)),isLong:n.isLong,isExec:!1,isKeepLev:!1,account:i};return console.log("[confirmSwap]  ",l),n.market.setChainId(e),n.market.setPendingTxns(t),n.market.increaseTrade(l,r)}return Promise.reject()}(g,p,f()(f()(f()({},n),se),{},{pay:U,isLimit:!M,size:ze.toFixed(18,1),price:he,isLong:D}),ue,(function(){E(!1)})).then((function(e){e||E(!1),je(!ge),H(!1)})).catch((function(e){console.error(e),E(!1)}))):te(!0)},isMarketOrder:M,isLong:D,chainId:g,visible:z,toValue:ie,onClose:function(){H(!1)}}),(0,R.jsxs)("div",{className:_r.tabList,children:[(0,R.jsxs)("div",{className:N()(_r.tabLong,m()({},_r.selected,D)),onClick:function(){Ce(X.FB)},children:[(0,R.jsx)(ar,{}),(0,R.jsx)("div",{className:_r.label,children:"Long"})]}),(0,R.jsxs)("div",{className:N()(_r.tabShort,m()({},_r.selected,!D)),onClick:function(){Ce(X.Qo)},children:[(0,R.jsx)(er,{}),(0,R.jsx)("div",{className:_r.label,children:"Short"})]})]}),(0,R.jsxs)("div",{className:_r.options,children:[(0,R.jsx)("div",{onClick:function(){we(X.YO)},className:N()(_r.option,m()({},_r.optionActive,M)),children:"Market"}),(0,R.jsx)("div",{onClick:function(){we(X.VZ)},className:N()(_r.option,m()({},_r.optionActive,!M)),children:"Limit"})]}),(0,R.jsx)(hi.tV,{disabled:M,onChange:I,value:he,decimals:2}),(0,R.jsx)(hi.bW,{symbol:Ee,value:ie,decimals:2,onChange:function(e){$(!1),ne(e)}}),(0,R.jsxs)("div",{className:_r.row,children:[ze&&(0,R.jsxs)("div",{className:"".concat(_r.field," ").concat(_r.size),children:[(0,R.jsx)("div",{className:_r.label,children:"Size:"}),(0,R.jsxs)("div",{className:_r.value,title:ze.toFixed(2,1),children:["$",ze.toFixed(2,1)]})]}),(0,R.jsxs)("div",{className:_r.field,children:[(0,R.jsx)("div",{className:_r.label,children:"Balance:"}),(0,R.jsx)("div",{className:_r.value,children:null!=n&&n.avlb?"".concat((0,Y.O)((null==n?void 0:n.avlb)||0).toFixed(4,1)," USDC"):"-"})]})]}),(0,R.jsx)(hi.gp,{onClickMaxBtn:function(){$(!0),W((null==n?void 0:n.avlb)||"0")},value:U,decimals:18,onChange:function(e){$(!0),W(e)}}),(0,R.jsx)(Wt,{value:Ae,onChange:function(e){return Te(e)}}),(0,R.jsx)(ur,{className:_r.submitBtn,disabled:Ye,onClick:function(){if(_)if(Le)H(!0);else{L(!0);var e=n.market.getNumDecimals(Math.max(1e5,1e3*(Number(U)||1)));null==n||n.market.approve(p,e,!0).then((function(e){var i=e;if(i.hash){var n={hash:i.hash,message:"USDC Approved!",callback:function(){ye(p,!0),L(!1)}};ue((function(e){return[].concat(r()(e),[n])}))}else L(!1)})).catch((function(e){console.error(e),L(!1)}))}else te(!0)},children:We})]}),(0,R.jsxs)("div",{className:_r.panel,children:[(0,R.jsx)(ki,{tkpPNL:Xe,stopLossPNL:Ke,onChange:oe,value:se,ifAll:!0}),(0,R.jsx)("div",{className:_r.cut}),(0,R.jsx)(hr,{hasExistingPosition:Ie,positionFee:Ze,fundingFee:ei,entryPriceDisplay:qe,availableLiquidity:ke,liqPriceDisplay:Ve})]})]})},gr=function(){var e=(0,J.x)().chainId,i=(0,s.Ge)(),n=i.account,t=i.library,l=de.I.useContainer().setPendingTxns,v=(0,o.useState)(X.YO),m=a()(v,2),x=m[0],f=m[1],h=(0,o.useState)(X.FB),_=a()(h,2),p=_[0],j=_[1],P=(0,c.FV)((0,u.N6)(e)),N=a()(P,2),y=N[0],L=N[1],w=function(){var e=(0,c.sJ)(ue.t),i=(0,c.FV)(ue.h),n=a()(i,2),t=n[0],r=n[1],l=(0,o.useState)(!0),s=a()(l,2),u=s[0],v=s[1],m=(0,d.ZP)(u?{url:ve.T5.TICKER_PRICE,markets:e}:null,(function(e){return x.apply(this,arguments)}),{refreshInterval:600});function x(){return x=b()(g()().mark((function e(i){var n,t,l,a;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.markets,t=n.map(ie.do),e.next=4,xe.getIndexPrices(t);case 4:if((l=e.sent)&&(0,me.Z)(l)){e.next=7;break}return e.abrupt("return");case 7:a=null==l?void 0:l.reduce((function(e,i){return e[i.symbol]||(e[i.symbol]=null==i?void 0:i.price),e}),{}),r(a);case 9:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}return m.data,(0,o.useEffect)((function(){v(!0)}),[]),{indexPricesMap:t}}(),C=w.indexPricesMap,S=(0,c.FV)(u.yS),I=a()(S,2),O=I[0],k=I[1],F=(0,d.ZP)("".concat(e),(function(){return(0,oe.t)(e,t)})).data;(0,o.useEffect)((function(){try{var e,i=(0,ie.do)(null==y?void 0:y.name);k(null===(e=C[i])||void 0===e?void 0:e.toFixed(2,1))}catch(e){console.error(e)}}),[y,C]),(0,o.useEffect)((function(){if(F&&F.length>0){if(!y)return void L(F[0]);F.find((function(e){return e.name===(null==y?void 0:y.name)&&e.address===y.address}))||L(F[0])}}),[F,y]);var E=(0,d.ZP)(null!=y&&y.address?[e,null==y?void 0:y.address,null==y?void 0:y.name,t,n]:null,(function(e){return ce.L.apply(void 0,[O,l].concat(r()(e)))})).data;return y?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("div",{className:fe,children:[(0,R.jsx)(se,{indexPrice:O,markets:F||[],onChangeMarketSelection:function(e){L(e)},swapOption:p}),(0,R.jsx)(pr,{indexPrice:O,tradeShowArgs:E,swapOption:p,orderOption:x,onChangOrderOption:f,onChangeSwapOption:j})]}),(0,R.jsx)(pt,{market:null==E?void 0:E.market,tradeShowArgs:E})]}):(0,R.jsx)(R.Fragment,{})},jr=function(){return(0,R.jsx)(c.Wh,{children:(0,R.jsx)(gr,{})})}},26977:function(e,i,n){n.d(i,{bW:function(){return u},gp:function(){return v},tV:function(){return d},mU:function(){return m},ZP:function(){return x}});var t=n(42122),r=n.n(t),l=n(94184),a=n.n(l),s={input:"input___FmRXa",wrapper:"wrapper___FSDBG",var:"var___VCDiS",flex:"flex___gOhnV",max:"max___hao26"},o=n(86074),c=function(e){var i=e.label,n=e.children,t=e.disabled,r=e.className,l=e.decimals,c=void 0===l?18:l,d=e.onChange,u=e.value,v=e.max,m=function(e){if(d){var i=new RegExp("^\\D*(\\d*(?:\\.\\d{0,".concat(c,"})?).*$"),"g"),n=e.replace(i,"$1");v&&+n>+v&&(n=v),d(n)}};return(0,o.jsxs)("div",{className:a()(s.input,r),children:[i&&(0,o.jsx)("div",{className:s.label,children:i}),(0,o.jsxs)("div",{className:s.wrapper,children:[(0,o.jsx)("input",{type:"text",value:u,disabled:t,onChange:function(e){m(e.target.value)},placeholder:"0.0"}),n]})]})},d=function(e){return(0,o.jsx)(c,r()(r()({label:"Price"},e),{},{children:(0,o.jsx)("div",{className:s.var,children:"USD"})}))},u=function(e){var i=e.symbol;return(0,o.jsx)(c,r()(r()({label:"Long"},e),{},{children:(0,o.jsx)("div",{className:s.var,children:i})}))},v=function(e){var i=e.onClickMaxBtn,n=e.symbol;return(0,o.jsx)(c,r()(r()({label:"Pay"},e),{},{children:(0,o.jsxs)("div",{className:s.flex,children:[(0,o.jsx)("div",{className:s.max,onClick:i,children:"MAX"}),(0,o.jsx)("div",{className:s.var,children:null!=n?n:"USDC"})]})}))},m=function(e){return(0,o.jsx)(c,r()(r()({label:"Receive"},e),{},{children:(0,o.jsx)("div",{className:s.flex,children:(0,o.jsx)("div",{className:s.var,children:e.symbol})})}))},x=c}}]);