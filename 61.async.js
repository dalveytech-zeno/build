"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[61],{47981:function(be,W,s){s.d(W,{rU:function(){return K}});var V=s(38416),C=s.n(V),R=s(13805),_,K=2,E=(_={},C()(_,R.vT,{GMX:{coingecko:"https://www.coingecko.com/en/coins/gmx",avalanche:"https://snowtrace.io/address/0x62edc0692bd897d2295872a9ffcac5425011c661"},GLP:{avalanche:"https://snowtrace.io/address/0x9e295B5B976a184B14aD8cd72413aD846C299660"},AVAX:{coingecko:"https://www.coingecko.com/en/coins/avalanche"},ETH:{coingecko:"https://www.coingecko.com/en/coins/weth",avalanche:"https://snowtrace.io/address/0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab"},BTC:{coingecko:"https://www.coingecko.com/en/coins/wrapped-bitcoin",avalanche:"https://snowtrace.io/address/0x50b7545627a5162f82a992c33b87adc75187b218"},"BTC.b":{coingecko:"https://www.coingecko.com/en/coins/wrapped-bitcoin",avalanche:"https://snowtrace.io/address/0x152b9d0FdC40C096757F570A51E494bd4b943E50"},MIM:{coingecko:"https://www.coingecko.com/en/coins/magic-internet-money",avalanche:"https://snowtrace.io/address/0x130966628846bfd36ff31a822705796e8cb8c18d"},"USDC.e":{coingecko:"https://www.coingecko.com/en/coins/usd-coin-avalanche-bridged-usdc-e",avalanche:"https://snowtrace.io/address/0xa7d7079b0fead91f3e65f86e8915cb59c1a4c664"},USDC:{coingecko:"https://www.coingecko.com/en/coins/usd-coin",avalanche:"https://snowtrace.io/address/0xb97ef9ef8734c71904d8002f8b6bc66dd9c48a6e"}}),C()(_,R.Fe,{GMX:{coingecko:"https://www.coingecko.com/en/coins/gmx",avalanche:"https://snowtrace.io/address/0x62edc0692bd897d2295872a9ffcac5425011c661"},GLP:{avalanche:"https://snowtrace.io/address/0x9e295B5B976a184B14aD8cd72413aD846C299660"},AVAX:{coingecko:"https://www.coingecko.com/en/coins/avalanche"},ETH:{coingecko:"https://www.coingecko.com/en/coins/weth",avalanche:"https://snowtrace.io/address/0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab"},BTC:{coingecko:"https://www.coingecko.com/en/coins/wrapped-bitcoin",avalanche:"https://snowtrace.io/address/0x50b7545627a5162f82a992c33b87adc75187b218"},"BTC.b":{coingecko:"https://www.coingecko.com/en/coins/wrapped-bitcoin",avalanche:"https://snowtrace.io/address/0x152b9d0FdC40C096757F570A51E494bd4b943E50"},MIM:{coingecko:"https://www.coingecko.com/en/coins/magic-internet-money",avalanche:"https://snowtrace.io/address/0x130966628846bfd36ff31a822705796e8cb8c18d"},"USDC.e":{coingecko:"https://www.coingecko.com/en/coins/usd-coin-avalanche-bridged-usdc-e",avalanche:"https://snowtrace.io/address/0xa7d7079b0fead91f3e65f86e8915cb59c1a4c664"},USDC:{coingecko:"https://www.coingecko.com/en/coins/usd-coin",avalanche:"https://snowtrace.io/address/0xb97ef9ef8734c71904d8002f8b6bc66dd9c48a6e"}}),C()(_,R.qF,{GMX:{coingecko:"https://www.coingecko.com/en/coins/gmx",arbitrum:"https://arbiscan.io/address/0xfc5a1a6eb076a2c7ad06ed22c90d7e710e35ad0a"},GLP:{arbitrum:"https://testnet.arbiscan.io/token/0xb4f81Fa74e06b5f762A104e47276BA9b2929cb27"}}),C()(_,R.PO,{GMX:{coingecko:"https://www.coingecko.com/en/coins/gmx",arbitrum:"https://arbiscan.io/address/0xfc5a1a6eb076a2c7ad06ed22c90d7e710e35ad0a"},GLP:{arbitrum:"https://arbiscan.io/token/0x1aDDD80E6039594eE970E5872D247bf0414C8903",reserves:"https://portfolio.nansen.ai/dashboard/gmx?chain=ARBITRUM"},ETH:{coingecko:"https://www.coingecko.com/en/coins/ethereum"},BTC:{coingecko:"https://www.coingecko.com/en/coins/wrapped-bitcoin",arbitrum:"https://arbiscan.io/address/0x2f2a2543b76a4166549f7aab2e75bef0aefc5b0f"},LINK:{coingecko:"https://www.coingecko.com/en/coins/chainlink",arbitrum:"https://arbiscan.io/address/0xf97f4df75117a78c1a5a0dbb814af92458539fb4"},UNI:{coingecko:"https://www.coingecko.com/en/coins/uniswap",arbitrum:"https://arbiscan.io/address/0xfa7f8980b0f1e64a2062791cc3b0871572f1f7f0"},USDC:{coingecko:"https://www.coingecko.com/en/coins/usd-coin",arbitrum:"https://arbiscan.io/address/0xff970a61a04b1ca14834a43f5de4533ebddb5cc8"},USDT:{coingecko:"https://www.coingecko.com/en/coins/tether",arbitrum:"https://arbiscan.io/address/0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"},DAI:{coingecko:"https://www.coingecko.com/en/coins/dai",arbitrum:"https://arbiscan.io/address/0xda10009cbd5d07dd0cecc66161fc93d7c9000da1"},MIM:{coingecko:"https://www.coingecko.com/en/coins/magic-internet-money",arbitrum:"https://arbiscan.io/address/0xfea7a6a0b346362bf88a9e4a88416b77a57d6c2a"},FRAX:{coingecko:"https://www.coingecko.com/en/coins/frax",arbitrum:"https://arbiscan.io/address/0x17fc002b466eec40dae837fc4be5c67993ddbd6f"}}),C()(_,R.Qz,{GMX:{coingecko:"https://www.coingecko.com/en/coins/gmx",avalanche:"https://snowtrace.io/address/0x62edc0692bd897d2295872a9ffcac5425011c661"},GLP:{avalanche:"https://snowtrace.io/address/0x9e295B5B976a184B14aD8cd72413aD846C299660",reserves:"https://portfolio.nansen.ai/dashboard/gmx?chain=AVAX"},AVAX:{coingecko:"https://www.coingecko.com/en/coins/avalanche"},ETH:{coingecko:"https://www.coingecko.com/en/coins/weth",avalanche:"https://snowtrace.io/address/0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab"},WBTC:{coingecko:"https://www.coingecko.com/en/coins/wrapped-bitcoin",avalanche:"https://snowtrace.io/address/0x50b7545627a5162f82a992c33b87adc75187b218"},BTC:{coingecko:"https://www.coingecko.com/en/coins/bitcoin-avalanche-bridged-btc-b",avalanche:"https://snowtrace.io/address/0x152b9d0FdC40C096757F570A51E494bd4b943E50"},MIM:{coingecko:"https://www.coingecko.com/en/coins/magic-internet-money",avalanche:"https://snowtrace.io/address/0x130966628846bfd36ff31a822705796e8cb8c18d"},USDC:{coingecko:"https://www.coingecko.com/en/coins/usd-coin",avalanche:"https://snowtrace.io/address/0xb97ef9ef8734c71904d8002f8b6bc66dd9c48a6e"},"USDC.e":{coingecko:"https://www.coingecko.com/en/coins/usd-coin-avalanche-bridged-usdc-e",avalanche:"https://snowtrace.io/address/0xa7d7079b0fead91f3e65f86e8915cb59c1a4c664"}}),_),X={ETH:"#6062a6",BTC:"#F7931A",WBTC:"#F7931A",USDC:"#2775CA","USDC.e":"#2A5ADA",USDT:"#67B18A",MIM:"#9695F8",FRAX:"#000",DAI:"#FAC044",UNI:"#E9167C",AVAX:"#E84142",LINK:"#3256D6"},U={},we={},ae={},$={};function M(f){return ae[f]}function F(f){return $[f]}function Fe(f,x){if(!U[f])throw new Error("Incorrect chainId ".concat(f));return x in U[f]}function te(f,x){if(!U[f])throw new Error("Incorrect chainId ".concat(f));if(!U[f][x])throw new Error('Incorrect address "'.concat(x,'" for chainId ').concat(f));return U[f][x]}function pe(f,x){var ne=we[f][x];if(!ne)throw new Error('Incorrect symbol "'.concat(x,'" for chainId ').concat(f));return ne}},37432:function(be,W,s){s.d(W,{x:function(){return _}});var V=s(34713),C=s(13805),R=s(22837);function _(){var K=(0,V.Ge)(),E=K.chainId;if(!E){var X=localStorage.getItem(R.HC);X&&(E=parseInt(X),E||localStorage.removeItem(R.HC))}return(!E||!C.FQ.includes(E))&&(E=C.rC),{chainId:E}}},73061:function(be,W,s){s.d(W,{pQ:function(){return je},sh:function(){return Te},VZ:function(){return Ke},FB:function(){return We},YO:function(){return Ve},cZ:function(){return ke},bD:function(){return Ae},Qo:function(){return ze},ET:function(){return He}});var V=s(861),C=s(17061),R=s(17156),_=s(27424),K=s(34713),E=s(20238),X=s(59734),U={},we={},ae=s(38416),$=s.n(ae),M=s(13805),F,Fe="https://stats.gmx.io/api",te=(F={default:"https://gmx-server-mainnet.uw.r.appspot.com"},$()(F,M.RR,"https://gambit-server-staging.uc.r.appspot.com"),$()(F,M.qF,"https://gambit-server-devnet.uc.r.appspot.com"),$()(F,M.PO,"https://gmx-server-mainnet.uw.r.appspot.com"),$()(F,M.Qz,"https://gmx-avax-server.uc.r.appspot.com"),F);function pe(e){if(!e)throw new Error("chainId is not provided");if(document.location.hostname.includes("deploy-preview")){var r=localStorage.getItem("SERVER_BASE_URL");if(r)return r}return te[e]||te.default}function f(e,r){return"".concat(pe(e)).concat(r)}var x=s(27960),ne=s(47981),rr=s(1403),ar=s(37432),j=s(24069),Ae=0,Ne=0,Se=1e6,ke=100*1e4,Te="Increase",Ue="Decrease",tr="Stop",$e="1.3",nr=1,cr=30,or=(0,j.Jl)(993,27),ir=5,Ie=10,sr=750,dr=18,Ge="Swap",We="Long",ze="Short",O=1e4,Pe=30,ur="2000000000000000",Ve="Market",Ke="Limit",Xe=(0,j.Jl)(5,Pe),lr=(0,j.Jl)(1,30),fr=50,vr=(0,j.Jl)(200*1e3*1e3,18),gr=25,je={"5m":60*5,"15m":60*15,"1h":60*60,"4h":60*60*4,"1d":60*60*24},ce=E.dE,hr=function(r){return function(a){return r===0?a:r>0?a.mul(expandDecimals(1,r)):a.div(expandDecimals(1,-r))}};function mr(e){var r=e.size,a=e.sizeDelta,o=e.increaseSize,n=e.collateral,c=e.collateralDelta,t=e.increaseCollateral,u=e.entryFundingRate,d=e.cumulativeFundingRate,p=e.hasProfit,v=e.delta,b=e.includeDelta;if(!(!r&&!a)&&!(!n&&!c)){var A=r||bigNumberify(0);if(a)if(o)A=r.add(a);else{if(a.gte(r))return;A=r.sub(a)}var i=n||bigNumberify(0);if(c)if(t)i=n.add(c);else{if(c.gte(n))return;i=n.sub(c)}if(v&&b)if(p)i=i.add(v);else{if(v.gt(i))return;i=i.sub(v)}if(!i.eq(0)){if(i=a?i.mul(O-Ie).div(O):i,u&&d){var P=r.mul(d.sub(u)).div(Se);i=i.sub(P)}return A.mul(O).div(i)}}}function He(e,r){return r?(0,M.jY)(e)+"address/"+r:(0,M.jY)(e)}function br(e){var r=e.delta,a=e.deltaPercentage,o=e.hasProfit,n,c;return r.gt(0)?(n=o?"+":"-",c=o?"+":"-"):(n="",c=""),n+="$".concat(formatAmount(r,Pe,2,!0)),c+="".concat(formatAmount(a,2,2),"%"),{deltaStr:n,deltaPercentageStr:c}}function wr(e,r,a,o){return ethers.utils.solidityKeccak256(["address","address","address","bool"],[e,r,a,o])}function pr(e,r,a){return e.mul(expandDecimals(1,a)).div(expandDecimals(1,r))}function Ar(e,r,a){var o=r.size,n=r.collateral,c=r.isLong,t=r.averagePrice,u=r.lastIncreasedTime,d=e;a||(a=o),d||(d=bigNumberify(0));var p=t.gt(d)?t.sub(d):d.sub(t),v=a.mul(p).div(t),b=v,A=u+Ae<Date.now()/1e3,i=c?d.gt(t):d.lt(t);!A&&i&&v.mul(O).lte(o.mul(Ne))&&(v=bigNumberify(0));var P=v.mul(O).div(n),k=b.mul(O).div(n);return{delta:v,pendingDelta:b,pendingDeltaPercentage:k,hasProfit:i,deltaPercentage:P}}function Qe(e){if(!e)return bigNumberify(0);var r=e.mul(O-Ie).div(O);return e.sub(r)}function _e(e){var r=e.liquidationAmount,a=e.size,o=e.collateral,n=e.averagePrice,c=e.isLong;if(!(!a||a.eq(0))){if(r.gt(o)){var t=r.sub(o),u=t.mul(n).div(a);return c?n.add(u):n.sub(u)}var d=o.sub(r),p=d.mul(n).div(a);return c?n.sub(p):n.add(p)}}function oe(e,r,a,o,n,c){if(!e||e.length===0)return[];for(var t=_slicedToArray(e,2),u=t[0],d=t[1],p=u.length/n,v=[],b=0;b<p;b++){var A=d.slice(c*b,c*(b+1)).concat(u.slice(n*b,n*(b+1)));if(!(A[0]===ce&&A[1]===ce)){var i=o(A);i.index=a[b],i.account=r,v.push(i)}}return v}function Ye(e,r,a,o){if(!r||!r.length)return[];var n=function(t){var u=t[6].toString()==="1",d=t[7].toString()==="1";return{path:[t[0],t[1],t[2]].filter(function(p){return p!==ce}),amountIn:t[3],minOut:t[4],triggerRatio:t[5],triggerAboveThreshold:u,type:Ge,shouldUnwrap:d}};return oe(r,a,o,n,5,3).filter(function(c){return c.path.every(function(t){return isValidToken(e,t)})})}function Je(e,r,a,o){var n=function(t){var u=t[5].toString()==="1";return{purchaseToken:t[0],collateralToken:t[1],indexToken:t[2],purchaseTokenAmount:t[3],sizeDelta:t[4],isLong:u,triggerPrice:t[6],triggerAboveThreshold:t[7].toString()==="1",type:Te}};return oe(r,a,o,n,5,3).filter(function(c){return isValidToken(e,c.purchaseToken)&&isValidToken(e,c.collateralToken)&&isValidToken(e,c.indexToken)})}function Ze(e,r,a,o){var n=function(t){var u=t[4].toString()==="1";return{collateralToken:t[0],indexToken:t[1],collateralDelta:t[2],sizeDelta:t[3],isLong:u,triggerPrice:t[5],triggerAboveThreshold:t[6].toString()==="1",type:Ue}};return oe(r,a,o,n,5,2).filter(function(c){return isValidToken(e,c.collateralToken)&&isValidToken(e,c.indexToken)})}function Sr(e,r){var a=useWeb3React(),o=a.library,n=a.account,c=!0,t=r||n,u=useChainId(),d=u.chainId,p=c&&t&&e,v=getAddress(d,"OrderBook"),b=getAddress(d,"OrderBook"),A=p?[c,d,v,t]:!1,i=useSWR(A||[],{dedupingInterval:5e3,fetcher:function(){var se=_asyncToGenerator(_regeneratorRuntime().mark(function B(qe,H,de,Q){var ue,Ee,De,Ce,Y,Re,le,xe,J,Oe,fe,Z,q,ye,ee,ve,Be,ge,Le,he,Me;return _regeneratorRuntime().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return ue=getProvider(o,H),Ee=new ethers.Contract(de,OrderBook.abi,ue),De=new ethers.Contract(b,OrderBookReader.abi,ue),Ce=function(){var l="".concat(getServerBaseUrl(H),"/orders_indices?account=").concat(Q);return fetch(l).then(function(){var g=_asyncToGenerator(_regeneratorRuntime().mark(function h(w){var S,m,D,I,re;return _regeneratorRuntime().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,w.json();case 2:for(S=G.sent,m={},D=0,I=Object.keys(S);D<I.length;D++)re=I[D],m[re.toLowerCase()]=S[re].map(function(me){return parseInt(me.value)}).sort(function(me,er){return me-er});return G.abrupt("return",m);case 6:case"end":return G.stop()}},h)}));return function(h){return g.apply(this,arguments)}}()).catch(function(){return{swap:[],increase:[],decrease:[]}})},Y=function(){var L=_asyncToGenerator(_regeneratorRuntime().mark(function l(g){var h,w;return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return h=g.toLowerCase()+"OrdersIndex",m.next=3,Ee[h](Q).then(function(D){return bigNumberify(D._hex).toNumber()});case 3:return w=m.sent,m.abrupt("return",w);case 5:case"end":return m.stop()}},l)}));return function(g){return L.apply(this,arguments)}}(),Re=function(){var L=_asyncToGenerator(_regeneratorRuntime().mark(function l(){var g,h,w,S,m;return _regeneratorRuntime().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,Promise.all([Y("swap"),Y("increase"),Y("decrease")]);case 2:return g=I.sent,h=_slicedToArray(g,3),w=h[0],S=h[1],m=h[2],I.abrupt("return",{swap:w,increase:S,decrease:m});case 8:case"end":return I.stop()}},l)}));return function(){return L.apply(this,arguments)}}(),le=function(l,g){var h=10,w=[];g=g||Math.max(l-h,0);for(var S=l-1;S>=g;S--)w.push(S);return w},xe=function(l,g){return l.length===0?le(g):[].concat(_toConsumableArray(l),_toConsumableArray(le(g,l[l.length-1]+1).sort(function(h,w){return w-h})))},J=function(){var L=_asyncToGenerator(_regeneratorRuntime().mark(function l(g,h,w,S){var m,D,I;return _regeneratorRuntime().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return m=xe(h,w),N.next=3,De[g](de,Q,m);case 3:return D=N.sent,I=S(H,D,Q,m),N.abrupt("return",I);case 6:case"end":return N.stop()}},l)}));return function(g,h,w,S){return L.apply(this,arguments)}}(),T.prev=9,T.next=12,Promise.all([Ce(),Re()]);case 12:return Oe=T.sent,fe=_slicedToArray(Oe,2),Z=fe[0],q=fe[1],T.next=18,Promise.all([J("getSwapOrders",Z.swap,q.swap,Ye),J("getIncreaseOrders",Z.increase,q.increase,Je),J("getDecreaseOrders",Z.decrease,q.decrease,Ze)]);case 18:return ye=T.sent,ee=_slicedToArray(ye,3),ve=ee[0],Be=ve===void 0?[]:ve,ge=ee[1],Le=ge===void 0?[]:ge,he=ee[2],Me=he===void 0?[]:he,T.abrupt("return",[].concat(_toConsumableArray(Be),_toConsumableArray(Le),_toConsumableArray(Me)));case 29:T.prev=29,T.t0=T.catch(9),console.error(T.t0);case 32:case"end":return T.stop()}},B,null,[[9,29]])}));function y(B,qe,H,de){return se.apply(this,arguments)}return y}()}),P=i.data,k=P===void 0?[]:P,ie=i.mutate,z=i.error;return[k,ie,z]}function kr(e){var r=e.isLong,a=e.size,o=e.collateral,n=e.averagePrice,c=e.entryFundingRate,t=e.cumulativeFundingRate,u=e.sizeDelta,d=e.collateralDelta,p=e.increaseCollateral,v=e.increaseSize,b=e.delta,A=e.hasProfit,i=e.includeDelta;if(!(!a||!o||!n)){var P=a||bigNumberify(0),k=o;if(u){if(v)P=a.add(u);else{if(u.gte(a))return;P=a.sub(u)}if(i&&!A){var ie=u.mul(b).div(a);k=k.sub(ie)}}if(d)if(p)k=k.add(d);else{if(d.gte(k))return;k=k.sub(d)}var z=Qe(a).add(Xe);if(c&&t){var se=a.mul(t.sub(c)).div(Se);z=z.add(se)}var y=_e({liquidationAmount:z,size:P,collateral:k,averagePrice:n,isLong:r}),B=_e({liquidationAmount:P.mul(O).div(ke),size:P,collateral:k,averagePrice:n,isLong:r});return y?B?r?y.gt(B)?y:B:y.lt(B)?y:B:y:B}}function Tr(){var e=getServerUrl(ARBITRUM,"/ui_version"),r=useSWR([e],{fetcher:function(){return fetch.apply(void 0,arguments).then(function(t){return t.text()})}}),a=r.data,o=r.mutate,n=!1;return a&&parseFloat(a)>parseFloat($e)&&(n=!0),n=!1,{data:n,mutate:o}}}}]);
