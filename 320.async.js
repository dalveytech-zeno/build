(self.webpackChunk=self.webpackChunk||[]).push([[320],{87943:function(e,t,n){"use strict";n.d(t,{v:function(){return _},T:function(){return N}});var r=n(17061),i=n.n(r),a=n(17156),u=n.n(a),s=n(27424),o=n.n(s),l=n(62435),p=n(74855),c=n.n(p),y=n(3410),d=n(61120),m=n.n(d),f=n(69499),v=n(18237),g=n.n(v),b=n(24749),T=null;function k(){var e=(0,l.useState)(Boolean(T)),t=o()(e,2),n=t[0],r=t[1],a=(0,l.useState)(null),s=o()(a,2),p=s[0],c=s[1];function y(){return(y=u()(i()().mark((function e(){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T){e.next=4;break}console.log("IPFS already started"),e.next=15;break;case 4:return e.prev=4,e.next=7,(0,b.Ue)();case 7:T=e.sent,e.next=15;break;case 10:e.prev=10,e.t0=e.catch(4),console.error("IPFS init error:",e.t0),T=null,c(e.t0);case 15:r(Boolean(T));case 16:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}(0,l.useEffect)((function(){return function(){y.apply(this,arguments)}(),function(){T&&T.stop&&(T.stop().catch((function(e){return console.error(e)})),T=null,r(!1))}}),[]);var d=function(){var e=u()(i()().mark((function e(t){var n,r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,T.add(t);case 4:return n=e.sent,r=n.cid,e.abrupt("return",r.toString());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=u()(i()().mark((function e(t){var n,r,a,u,s,o,l,p;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T){e.next=2;break}return e.abrupt("return");case 2:n=new TextDecoder,r="",a=!1,u=!1,e.prev=6,o=g()(T.cat(t));case 8:return e.next=10,o.next();case 10:if(!(a=!(l=e.sent).done)){e.next=16;break}p=l.value,r+=n.decode(p,{stream:!0});case 13:a=!1,e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),u=!0,s=e.t0;case 22:if(e.prev=22,e.prev=23,!a||null==o.return){e.next=27;break}return e.next=27,o.return();case 27:if(e.prev=27,!u){e.next=30;break}throw s;case 30:return e.finish(27);case 31:return e.finish(22);case 32:return e.abrupt("return",r);case 33:case"end":return e.stop()}}),e,null,[[6,18,22,32],[23,,27,31]])})));return function(t){return e.apply(this,arguments)}}();return{ipfs:T,isIpfsReady:n,ipfsInitError:p,getFileFromIPFSByCid:m,saveFileToIPFS:d}}var h=n(71874),x={root:"root___TBxd2",btns:"btns___kyVLh",btn:"btn___yWR14",tweetBtn:"tweetBtn___HU3_w"},I=n(86074),N=function(e){var t=e.title,n=e.width,r=void 0===n?560:n,a=e.downloadName,s=void 0===a?"download":a,p=e.type,d=void 0===p?"jpeg":p,v=e.children,g=e.content,b=e.coin,T=(0,l.useState)(!1),N=o()(T,2),A=N[0],M=N[1],O=(0,l.useRef)(null),L=k().saveFileToIPFS,w="Trade ".concat(b||"BTC"," and other top cryptocurrencies with up to 100x leverage directly from your wallet. https://dei.io."),R="Trade ".concat(b||"BTC"," and other top cryptocurrencies with up to 100x leverage directly from your wallet. @dei.io"),P=function(){var e=u()(i()().mark((function e(){var t;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,m()(O.current);case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=u()(i()().mark((function e(t){var n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=document.createElement("a")).download="".concat(s,".").concat(d),n.href=t,n.click();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=u()(i()().mark((function e(){var t;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:F(t.toDataURL());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=u()(i()().mark((function e(){var t,n,r,a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,new Promise((function(e,n){return t.toBlob((function(t){return e(t)}))}));case 7:if(n=e.sent){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,L(n);case 12:r=e.sent,a="".concat("https://twitter.com/intent/tweet","?text=").concat(R,"&url=").concat("http://dei.io/share","?cid=").concat(r),window.open(a,"_blank");case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{className:x.sharePosterContainerRoot,onClick:function(){return M(!0)},children:v}),(0,I.jsxs)(f.Z,{title:t,width:r,visible:A,onClose:function(){return M(!1)},children:[(0,I.jsx)("div",{className:x.root,children:(0,I.jsx)("div",{ref:O,children:g})}),(0,I.jsxs)("div",{className:x.btns,children:[(0,I.jsx)(c(),{text:w,onCopy:function(){return h.U.success("success")},children:(0,I.jsx)("div",{className:x.btn,children:(0,I.jsx)(y._H,{id:"Copy"})})}),(0,I.jsx)("div",{className:x.btn,onClick:j,children:(0,I.jsx)(y._H,{id:"Download"})}),(0,I.jsx)("div",{className:"tweet-link ".concat(x.btn," ").concat(x.tweetBtn),onClick:D,children:(0,I.jsx)(y._H,{id:"Twitter"})})]})]})]})},A=n(27484),M=n.n(A);Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var O="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIwIiBoZWlnaHQ9IjMyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIwOS42ODggMTkzLjEyNWMwIDQ1LjczNi0zNy4wNzcgODIuODEzLTgyLjgxMyA4Mi44MTN2LTI0Ljg0NGMzMi4wMTUgMCA1Ny45NjktMjUuOTU0IDU3Ljk2OS01Ny45NjlzLTI1Ljk1NC01Ny45NjktNTcuOTY5LTU3Ljk2OS01Ny45NjkgMjUuOTU0LTU3Ljk2OSA1Ny45NjlINDQuMDYyYzAtNDUuNzM2IDM3LjA3Ny04Mi44MTMgODIuODEzLTgyLjgxMyA0NS43MzYgMCA4Mi44MTMgMzcuMDc3IDgyLjgxMyA4Mi44MTNaIiBmaWxsPSJ1cmwoI2EpIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yNTAuMjA5IDIwOC4wMzFjLTMuMzg5IDI4LjM0NS0xNi4zMjQgNTMuNzU3LTM1LjQ5OCA3Mi45MzFsLTE4LjE1My0xOC4xNTNjMTQuNTEzLTE0LjUxMyAyNC41MjEtMzMuNTMyIDI3Ljc0NS01NC43NzhoMjUuOTA2Wm0uODg0LTE0LjM2NWE5Ny41NjMgOTcuNTYzIDAgMCAwIDAtMS4wODJ2MS4wODJaTTExMS45NjggNjkuNzkyYy0yOC4zNDQgMy4zOS01My43NTYgMTYuMzI1LTcyLjkyOSAzNS40OThsMTguMTUzIDE4LjE1M2MxNC41MTItMTQuNTEzIDMzLjUzLTI0LjUyIDU0Ljc3Ni0yNy43NDVWNjkuNzkyWiIgZmlsbD0idXJsKCNiKSIvPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjUxLjE0NyAxOTMuMTI1YzAtNjguNjA0LTU1LjYxNC0xMjQuMjE5LTEyNC4yMTktMTI0LjIxOWgtLjA1M3YyNS42NzJoLjA1M2M1NC40MjYgMCA5OC41NDcgNDQuMTIxIDk4LjU0NyA5OC41NDdoMjUuNjcyWiIgZmlsbD0idXJsKCNjKSIvPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTI2Ljg3NSAyNy41YzkxLjQ3MiAwIDE2NS42MjUgNzQuMTUzIDE2NS42MjUgMTY1LjYyNWgtMjQuODQ0YzAtNzcuNzUxLTYzLjAzLTE0MC43ODEtMTQwLjc4MS0xNDAuNzgxVjI3LjVaIiBmaWxsPSJ1cmwoI2QpIi8+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4MT0iNDQuMDYzIiB5MT0iMTEwLjMxMyIgeDI9IjI0Ni44MDkiIHkyPSIxNjYuNTIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLWNvbG9yPSIjM0NFQUFBIi8+PHN0b3Agb2Zmc2V0PSIuNzcxIiBzdG9wLWNvbG9yPSIjNUM3MkZGIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImIiIHgxPSIzOS4wMzkiIHkxPSI2OS43OTIiIHgyPSIyOTguNDY3IiB5Mj0iMTQyLjAxNCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiMzQ0VBQUEiLz48c3RvcCBvZmZzZXQ9Ii43NzEiIHN0b3AtY29sb3I9IiM1QzcyRkYiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYyIgeDE9IjEyNi44NzUiIHkxPSI2OC45MDYiIHgyPSIyNzguOTkxIiB5Mj0iMTExLjA5NiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiMzQ0VBQUEiLz48c3RvcCBvZmZzZXQ9Ii43NzEiIHN0b3AtY29sb3I9IiM1QzcyRkYiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iZCIgeDE9IjEyNi44NzUiIHkxPSIyNy41IiB4Mj0iMzI5LjYyMSIgeTI9IjgzLjcwNyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiMzQ0VBQUEiLz48c3RvcCBvZmZzZXQ9Ii43NzEiIHN0b3AtY29sb3I9IiM1QzcyRkYiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48L3N2Zz4=",L="container___McnZW",w="header___S0978",R="hostText___zbA_i",P="startTime___H_JeH",F="referralCode___G4oUW",j="leftQrcode___OsXFz",D="rightInfo___CjlYw",B="rightInfoTitle___zetfL",C="highlight___RKLAK",E="mainLogo___men_w",S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return M()(e).format("YYYY/MM/DD HH:mm:ss")},_=function(e){var t=e.children,n=e.startTimestamp,r=void 0===n?0:n;return(0,I.jsxs)("div",{className:L,children:[(0,I.jsxs)("div",{className:w,children:[(0,I.jsx)("img",{src:O,alt:"logo",width:20,height:20}),(0,I.jsx)("span",{className:R,children:"Dei.io"}),r?(0,I.jsxs)("span",{className:P,children:["Share Time ",S(r)]}):null]}),t,(0,I.jsxs)("div",{className:F,children:[(0,I.jsx)("img",{src:"data:image/png;base64,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",className:j,width:40,height:40,alt:"website qrcode"}),(0,I.jsxs)("div",{className:D,children:[(0,I.jsxs)("div",{className:B,children:[(0,I.jsxs)("span",{children:[(0,I.jsx)("span",{className:C,children:"De"}),"centralized"]}),(0,I.jsx)("span",{children:"Index Perpetual Exchange"})]}),(0,I.jsx)("span",{children:"https://Dei.io"})]})]}),(0,I.jsx)("div",{className:E,children:(0,I.jsx)("img",{src:O,width:140,height:140})})]})}},9679:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(42122),i=n.n(r),a=n(92419),u=n(86074),s=function(e){return(0,u.jsx)(a.Z,i()(i()({},e),{},{getTooltipContainer:function(){return document.getElementById("root")}}))}},65334:function(e,t,n){"use strict";n.d(t,{Ju:function(){return u},aY:function(){return a},sQ:function(){return s},xW:function(){return o}});n(38416),n(42122),n(27424);var r=n(90044),i=(n(62435),n(13907)),a="depx-market-selection";function u(e,t,n){var r=JSON.stringify(e);return(0,i.Z)(r,t,n)}function s(e,t){var n=window.localStorage.getItem(t);if(n)try{var i=JSON.parse(n);return(0,r.Z)(i,e)}catch(e){console.error(e)}}var o=function(e,t,n){var r=window.localStorage.getItem(t);try{(r=r?JSON.parse(r):Object.create(null))[e]=n,window.localStorage.setItem(t,JSON.stringify(r))}catch(e){console.error(e)}}},28722:function(e,t,n){"use strict";n.d(t,{Dw:function(){return m},Jx:function(){return c},x7:function(){return d}});var r,i=n(17061),a=n.n(i),u=n(17156),s=n.n(u),o=n(38416),l=n.n(o),p=n(13805);var c="https://api.thegraph.com/subgraphs/name/dalveytechaaron/fuji",y=(r={},l()(r,p.Qz,c),l()(r,p.bx,c),r),d=function(e){return y[e]||c},m=function(){var e=s()(a()().mark((function e(t,n){var r,i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{headers:{"Content-Type":"application/json",Accept:"application/json"},method:"POST",body:JSON.stringify({query:n}),mode:"cors"}).catch((function(e){console.log("err",e)}));case 2:return r=e.sent,e.next=5,null==r?void 0:r.json();case 5:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},36493:function(e,t,n){"use strict";n.d(t,{Ij:function(){return a},do:function(){return r},tq:function(){return i}});n(20238).dE;var r=function(e){var t="BTCUSDT";if(!e)return t;if("Test Market"===e)return t;var n=e.split("/");return 2!==n.length?t:"".concat(n[0],"USDT")};var i=function(){return/Android|web0S|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},a=function(){var e=window.navigator.userAgent.toLowerCase(),t={isMacOS:!1,isIOS:!1,isWindows:!1,isAndroid:!1};return/(macintosh|macintel|macppc|mac68k|macos)/i.test(e)?t.isMacOS=!0:/(iphone|ipad|ipod)/i.test(e)?t.isIOS=!0:/(win32|win64|windows|wince)/i.test(e)?t.isWindows=!0:/android/.test(e)&&(t.isAndroid=!0),t}},2076:function(e,t,n){"use strict";n.d(t,{yS:function(){return d},WW:function(){return g},N6:function(){return y},MM:function(){return x},fS:function(){return f},dz:function(){return T},hm:function(){return m},Fp:function(){return h},mY:function(){return b},in:function(){return v},K9:function(){return k}});var r=n(42122),i=n.n(r),a=n(4480),u=function(e){return null!=e&&e.length?"("+((null==e?void 0:e.length)>=99?"99+":e.length)+")":""},s=n(9319),o=n(65334),l=n(36493),p=n(61987),c=(0,a.cn)({key:"marketSelection",default:void 0}),y=(0,a.CG)({key:"marketSelectionSelector",get:function(e){return function(t){var n=t.get;return(0,o.sQ)(e,o.aY)||n(c)}},set:function(e){return function(t,n){(0,t.set)(c,n),(0,o.xW)(e,o.aY,n)}}}),d=(0,a.cn)({key:"curIndexPriceAtom",default:0}),m=(0,a.cn)({key:"Position",default:[]}),f=(0,a.cn)({key:"Orders",default:[]}),v=(0,a.cn)({key:"Trades",default:[]}),g=(0,a.cn)({key:"isHideOtherPairsAtom",default:!1}),b=(0,a.nZ)({key:"positionSelector",get:function(e){var t=e.get,n=t(p.h),r=t(c);return t(m).filter((function(e){return!t(g)||e.pair===(null==r?void 0:r.name)})).map((function(e){var t,r=i()(i()({},e),{},{indexPrice:null==n||null===(t=n[(0,l.do)(e.pair)])||void 0===t?void 0:t.toString()});return(0,s.Ih)(r,null==e?void 0:e.feeRate,null==e?void 0:e.fundFeeRate),r}))}}),T=(0,a.nZ)({key:"ordersSelector",get:function(e){var t=e.get,n=t(p.h);return t(f).filter((function(e){var n;return!t(g)||e.pair===(null===(n=marketSelection)||void 0===n?void 0:n.name)})).map((function(e){var t;return i()(i()({},e),{},{indexPrice:n?null===(t=n[(0,l.do)(e.pair)])||void 0===t?void 0:t.toString():"0"})}))}}),k=(0,a.nZ)({key:"tradeSelector",get:function(e){var t=e.get;return t(v).filter((function(e){var n;return!t(g)||e.pair===(null===(n=marketSelection)||void 0===n?void 0:n.name)}))}}),h=(0,a.nZ)({key:"positionCountSelector",get:function(e){var t=e.get;return u(t(m))}}),x=(0,a.nZ)({key:"orderCount",get:function(e){var t=e.get;return u(t(f))}})},61987:function(e,t,n){"use strict";n.d(t,{h:function(){return u},t:function(){return a}});var r=n(4480),i=n(61895),a=(0,r.cn)({key:"marketsAtom",default:["ETH/USD","BTC/USD"]}),u=(0,r.cn)({key:"indexPricesMapAtom",default:{"ETH/USD":(0,i.O)(1688),"BTC/USD":(0,i.O)(1699)}})},9319:function(e,t,n){"use strict";n.d(t,{Ih:function(){return m},QB:function(){return d},ui:function(){return c}});var r=n(17061),i=n.n(r),a=n(42122),u=n.n(a),s=n(17156),o=n.n(s),l=n(37195),p=n(61895),c=function(){var e=o()(i()().mark((function e(t){var n,r,a,s,o,p,c,d,m,f,v,g,b,T,k;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.accountAddress&&""!=t.accountAddress){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,t.reader.getPositions(t.accountAddress,t.market._address);case 4:a=e.sent,s=t.openFeeRate,o=t.executionFee,p=[],a=null===(n=a)||void 0===n||null===(r=n.filter((function(e){return+e.size>0})))||void 0===r?void 0:r.sort((function(e,t){var n,r;return+(null==t||null===(n=t.lastTime)||void 0===n?void 0:n.toString())-+(null==e||null===(r=e.lastTime)||void 0===r?void 0:r.toString())})),c=0;case 10:if(!(c<a.length)){e.next=22;break}return e.next=13,l.a.getFundFee(t,null===(d=a[c])||void 0===d?void 0:d.isLong);case 13:return b=e.sent,e.next=16,l.a.getFundFeeRete(t,null===(m=a)||void 0===m||null===(f=m[c])||void 0===f?void 0:f.isLong);case 16:T=e.sent,k=l.a.getFundFeeRateLimit(T,null===(v=a)||void 0===v||null===(g=v[c])||void 0===g?void 0:g.isLong),p.push(y(t,u()(u()({},a[c]),{},{fundingFee:b,fundFeeRate:k}),t.accountAddress,s,o));case 19:c++,e.next=10;break;case 22:return e.abrupt("return",p);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function y(e,t,n,r,i){var a=e.market;t.fundFeeRate;try{var u,s={account:n,isLong:t.isLong,size:a.formatNum(t.size),collateral:"0",averagePrice:a.formatPrice(t.averagePrice),fundingFee:(null==t?void 0:t.fundingFee)||"0",realisedPnl:a.formatNum(t.realisedPnl),hasProfit:t.hasProfit,lastTime:t.lastTime,pair:e.marketName,side:t.isLong?"Long":"Short",leverage:"",netValue:"0",PNL:"0",PNLRate:"0",liqPrice:"0",initialCollateral:a.formatNum(t.collateral),fundFeeDay:"0",openCloseFees:"0",PNLAfterFees:"0",orderIDs:null==t?void 0:t.orderIDs,feeRate:r,executionFee:i};s.collateral=(0,p.O)(s.initialCollateral).minus(s.fundingFee).toString(),s.leverage="0"===s.collateral?"0":(0,p.O)(s.size).dividedBy(s.collateral).toString();var o=null==e?void 0:e.openFeeRate,l=null==a||null===(u=a._valid)||void 0===u?void 0:u.maxLev,c=(0,p.O)((null==l?void 0:l.toNumber())||100),y=(0,p.O)(null==e?void 0:e.cleanFee);return s.liqPrice=d(s,r,c,(0,p.O)(o),y),s}catch(e){console.log("convertRow",e)}return{}}function d(e,t,n,r,i,a){var u,s=e.fundingFee,o=e.isLong,c=e.collateral,y=e.size,d=(0,p.O)(y).multipliedBy(t);return e.positionFee=d.toString(),null===(u=l.a.getNextLiqPrice({size:(0,p.O)(y),collateral:(0,p.O)(c),isLong:o,fundingFee:(0,p.O)(s),positionFeeRate:r,entryPrice:(0,p.O)(null==e?void 0:e.averagePrice),maxLeverage:n,cleanFee:i},a))||void 0===u?void 0:u.toString()}function m(e,t,n){var r=(0,p.O)(e.initialCollateral),i=((0,p.O)(e.collateral),(0,p.O)(e.indexPrice)),a=(0,p.O)(e.averagePrice),u=(0,p.O)(e.size),s=(0,p.O)(e.isLong?1:-1).multipliedBy(i.minus(a)).multipliedBy(u).dividedBy(a);e.PNL=s.toString(),function(e,t,n){var r,i,a,u,s=(0,p.O)(e.size),o=(0,p.O)(t),l=s.multipliedBy(o).multipliedBy(2);e.openCloseFee=null===(r=s.multipliedBy(o).multipliedBy(1))||void 0===r?void 0:r.toString(),e.fundFeeDay=s.multipliedBy(n).multipliedBy(24).toString(),e.PNLAfterFees=null===(i=(0,p.O)(null==e?void 0:e.PNL).minus(l).minus((0,p.O)(null==e?void 0:e.fundingFee)))||void 0===i?void 0:i.toString(),e.pnlAfterFeesRate=null===(a=(0,p.O)(null==e?void 0:e.PNLAfterFees).div((0,p.O)(null==e?void 0:e.initialCollateral)))||void 0===a||null===(u=a.multipliedBy(100))||void 0===u?void 0:u.toString()}(e,t,n);var o=r.plus(s).minus(null==e?void 0:e.fundingFee).minus(null==e?void 0:e.openCloseFee);return e.PNLRate=s.div(r).multipliedBy(100).toString(),e.netValue=o.toString(),s.toString()}},37195:function(e,t,n){"use strict";n.d(t,{a:function(){return j},L:function(){return R}});var r=n(17061),i=n.n(r),a=n(42122),u=n.n(a),s=n(17156),o=n.n(s),l=n(61895),p=n(56690),c=n.n(p),y=n(89728),d=n.n(y),m=n(61655),f=n.n(m),v=n(26389),g=n.n(v),b=JSON.parse('{"Mt":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"_market","type":"address"},{"internalType":"address","name":"_account","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"availableLiquidity","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"address","name":"_market","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"getFundingFee","outputs":[{"internalType":"int256","name":"","type":"int256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_market","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"getFundingRate","outputs":[{"internalType":"int256","name":"","type":"int256"},{"internalType":"int256","name":"","type":"int256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_marketAddr","type":"address"}],"name":"getMarket","outputs":[{"components":[{"internalType":"uint256","name":"minSlippage","type":"uint256"},{"internalType":"uint256","name":"maxSlippage","type":"uint256"},{"internalType":"uint256","name":"slippageDigits","type":"uint256"},{"internalType":"uint256","name":"minLev","type":"uint256"},{"internalType":"uint256","name":"maxLev","type":"uint256"},{"internalType":"uint256","name":"minCollateral","type":"uint256"},{"internalType":"uint256","name":"maxTradeAmount","type":"uint256"},{"internalType":"bool","name":"allowOpen","type":"bool"},{"internalType":"bool","name":"allowClose","type":"bool"}],"internalType":"struct IMarketReader.ValidOuts","name":"validOuts","type":"tuple"},{"components":[{"internalType":"uint256","name":"tokenDigits","type":"uint256"},{"internalType":"uint256","name":"closeFeeRate","type":"uint256"},{"internalType":"uint256","name":"openFeeRate","type":"uint256"},{"internalType":"uint256","name":"liquidationFeeUsd","type":"uint256"},{"internalType":"uint256","name":"spread","type":"uint256"},{"internalType":"address","name":"indexToken","type":"address"},{"internalType":"address","name":"collateralToken","type":"address"},{"internalType":"address","name":"vault","type":"address"},{"internalType":"address","name":"marketAddressesProvider","type":"address"},{"internalType":"address","name":"orderBookLong","type":"address"},{"internalType":"address","name":"orderBookShort","type":"address"},{"internalType":"address","name":"positionBook","type":"address"}],"internalType":"struct IMarketReader.MarketOuts","name":"mktOuts","type":"tuple"},{"components":[{"internalType":"uint256","name":"closeFeeRate","type":"uint256"},{"internalType":"uint256","name":"openFeeRate","type":"uint256"},{"internalType":"uint256","name":"execFee","type":"uint256"},{"internalType":"uint256","name":"liquidateFee","type":"uint256"},{"internalType":"uint256","name":"digits","type":"uint256"}],"internalType":"struct IMarketReader.FeeOuts","name":"feeOuts","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"address","name":"_market","type":"address"}],"name":"getPositions","outputs":[{"components":[{"internalType":"uint256","name":"size","type":"uint256"},{"internalType":"uint256","name":"collateral","type":"uint256"},{"internalType":"uint256","name":"averagePrice","type":"uint256"},{"internalType":"int256","name":"entryFundingRate","type":"int256"},{"internalType":"uint256","name":"realisedPnl","type":"uint256"},{"internalType":"bool","name":"hasProfit","type":"bool"},{"internalType":"uint256","name":"lastTime","type":"uint256"},{"internalType":"bool","name":"isLong","type":"bool"},{"internalType":"uint256[]","name":"orderIDs","type":"uint256[]"}],"internalType":"struct IMarketReader.PositionOuts[]","name":"_positions","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_mkt","type":"address"},{"internalType":"address","name":"_user","type":"address"}],"name":"getUserFee","outputs":[{"components":[{"internalType":"uint256","name":"openFee","type":"uint256"},{"internalType":"uint256","name":"closeFee","type":"uint256"},{"internalType":"int256","name":"fundFee","type":"int256"},{"internalType":"uint256","name":"liquidateFee","type":"uint256"},{"internalType":"uint256","name":"execFee","type":"uint256"}],"internalType":"struct IMarketReader.UserFeeOuts","name":"_outs","type":"tuple"}],"stateMutability":"view","type":"function"}]}'),T=n(76935),k=n(66115),h=n.n(k),x=n(38416),I=n.n(x),N=JSON.parse('{"Mt":[{"inputs":[{"internalType":"string","name":"_name","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ROLE_FACTORY","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ROLE_POS_KEEPER","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bool","name":"_isIncrease","type":"bool"},{"internalType":"uint256","name":"_orderID","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"cancelOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool[]","name":"_isIncreaseList","type":"bool[]"},{"internalType":"uint256[]","name":"_orderIDList","type":"uint256[]"},{"internalType":"bool[]","name":"_isLongList","type":"bool[]"}],"name":"cancelOrderList","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"collateralToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bool","name":"","type":"bool"}],"name":"decreaseCollateral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_isLimit","type":"bool"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"bool","name":"_isKeepLev","type":"bool"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bool","name":"_isExec","type":"bool"}],"name":"decreaseTrade","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_isLimit","type":"bool"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"bool","name":"_isKeepLev","type":"bool"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bool","name":"_triggerAbove","type":"bool"}],"name":"decreaseTrade2","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_orderKey","type":"bytes32"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bool","name":"_isIncrease","type":"bool"}],"name":"execOrderKey","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"feeRouter","outputs":[{"internalType":"contract IFeeRouter","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_collateralDelta","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"increaseCollateral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"components":[{"internalType":"uint8","name":"version","type":"uint8"},{"internalType":"uint32","name":"updatedAtBlock","type":"uint32"},{"internalType":"uint8","name":"triggerAbove","type":"uint8"},{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"collateral","type":"uint256"},{"internalType":"uint256","name":"size","type":"uint256"},{"internalType":"uint128","name":"price","type":"uint128"},{"internalType":"uint128","name":"priceExtra","type":"uint128"},{"internalType":"uint256","name":"orderID","type":"uint256"},{"internalType":"uint256","name":"extra0","type":"uint256"},{"internalType":"uint256","name":"extra1","type":"uint256"}],"internalType":"struct Order.Props","name":"order","type":"tuple"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"increasePositionFromOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_isLimit","type":"bool"},{"internalType":"uint256","name":"_payDelta","type":"uint256"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_tpPrice","type":"uint256"},{"internalType":"uint256","name":"_slPrice","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bool","name":"_isExec","type":"bool"}],"name":"increaseTrade","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_isLimit","type":"bool"},{"internalType":"uint256","name":"_payDelta","type":"uint256"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_tpPrice","type":"uint256"},{"internalType":"uint256","name":"_slPrice","type":"uint256"},{"internalType":"uint256","name":"_slippage","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"bool","name":"_triggerAbove","type":"bool"}],"name":"increaseTrade2","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"indexToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_positionBook","type":"address"},{"internalType":"contract IOrderBook","name":"_orderBookLong","type":"address"},{"internalType":"contract IOrderBook","name":"_orderBookShort","type":"address"},{"internalType":"address","name":"_addressProvider","type":"address"},{"internalType":"address","name":"_indexToken","type":"address"},{"internalType":"address","name":"_feeRouter","type":"address"},{"internalType":"address","name":"_feeVault","type":"address"},{"internalType":"address","name":"_marketRouter","type":"address"},{"internalType":"address","name":"_vault","type":"address"},{"internalType":"address","name":"_vaultRouter","type":"address"},{"internalType":"address","name":"_collateralToken","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_key","type":"bytes32"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"isLiquidate","outputs":[{"internalType":"uint256","name":"_state","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"bool","name":"","type":"bool"}],"name":"liquidatePosition","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32[]","name":"keys","type":"bytes32[]"},{"internalType":"bool","name":"isLong","type":"bool"}],"name":"liquidatePositionByKey","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"market2","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"marketAddressesProvider","outputs":[{"internalType":"contract IMarketAddressesProvider","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"orderBookLong","outputs":[{"internalType":"contract IOrderBook","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"orderBookShort","outputs":[{"internalType":"contract IOrderBook","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"positionBook","outputs":[{"internalType":"contract IPositionBook","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_delete","type":"bool"}],"name":"setDeleteOrdersWhenPositionClosed","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_m","type":"address"}],"name":"setMarket2","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_p","type":"bool"}],"name":"setOpenDebug","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_spread","type":"uint256"}],"name":"setSpread","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"spread","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_orderID","type":"uint256"},{"internalType":"uint256","name":"_triggerPrice","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"updateDecreaseOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_orderID","type":"uint256"},{"internalType":"uint256","name":"_triggerPrice","type":"uint256"},{"internalType":"uint256","name":"_tpPrice","type":"uint256"},{"internalType":"uint256","name":"_slPrice","type":"uint256"},{"internalType":"bool","name":"_isLong","type":"bool"}],"name":"updateIncreaseOrder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"vault","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]}'),A=n(24069),M=n(25122),O="0.003",L=function(e){f()(k,e);var t,n,r,a,u,s,l,p,y,m,v,b,T=g()(k);function k(e,t,n,r,i,a){var u;return c()(this,k),u=T.call(this,e,t,N.Mt,n),I()(h()(u),"_args",void 0),I()(h()(u),"_valid",void 0),I()(h()(u),"_fee",void 0),I()(h()(u),"_ctoken",void 0),u._args=r,u._valid=i,u._fee=a,u._ctoken=new M.a(u._library,t,r.collateralToken,void 0),u}return d()(k,[{key:"getClassName",value:function(){return"Market"}},{key:"getCollateralToken",value:function(){return this._ctoken}},{key:"getOpenFeeRate",value:function(){var e;return null!==(e=this.formatFeeOrRate(this._fee.openFeeRate))&&void 0!==e?e:O}},{key:"getCloseFeeRate",value:function(){var e;return null!==(e=this.formatFeeOrRate(this._fee.closeFeeRate))&&void 0!==e?e:O}},{key:"getExecFee",value:function(){return this.formatNum(this._fee.execFee)}},{key:"getCleanFee",value:function(){var e;return this.formatNum(null===(e=this._fee)||void 0===e?void 0:e.liquidateFee)}},{key:"getSlippageDecimals",value:function(e){var t=4;return this._valid.slippageDigits.isZero()||(t=this._valid.slippageDigits.toNumber()),(0,A.H2)(e,t)}},{key:"getFeeDecimals",value:function(e){return(0,A.H2)(e,8)}},{key:"getNumDecimals",value:function(e){var t=18;return this._args.tokenDigits.isZero()||(t=this._args.tokenDigits.toNumber()),(0,A.H2)(e,t)}},{key:"getPriceDecimals",value:function(e){return(0,A.H2)(e,30)}},{key:"formatPrice",value:function(e){return(0,A.dN)(e,30)}},{key:"getTokenDigits",value:function(){return this._args.tokenDigits.toNumber()}},{key:"formatNum",value:function(e,t,n,r){return(0,A.dN)(e,this._args.tokenDigits.toNumber(),t,n,r)}},{key:"formatFeeOrRate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return(0,A.dN)(e,t)}},{key:"formatPercentage",value:function(e){return(0,A.H2)(e,2)}},{key:"allowance",value:(b=o()(i()().mark((function e(t){var n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCollateralToken().allowance(t,this._address);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"approve",value:(v=o()(i()().mark((function e(t,n,r){var a,u;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new M.a(this._library,this._chainId,this._args.collateralToken,void 0),e.next=3,a.allowance(t,this._address);case 3:if(!e.sent.lt(n)&&!r){e.next=9;break}return u=(0,A._b)(1e3),e.next=8,a.approve(this._address,n.mul(u));case 8:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return v.apply(this,arguments)})},{key:"increaseTrade",value:(m=o()(i()().mark((function e(t,n){var r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.approve(t.account,t.payDelta);case 2:if(!e.sent){e.next=8;break}return e.next=6,this.send("increaseTrade",[t.isLimit,t.payDelta,t.sizeDelta,t.price,t.tpPrice,t.slPrice,t.slippage,t.isLong,!1],n);case 6:return r=e.sent,e.abrupt("return",r);case 8:return e.abrupt("return",Promise.resolve(""));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return m.apply(this,arguments)})},{key:"decreaseTrade",value:(y=o()(i()().mark((function e(t){var n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("decreaseTrade",[t.isLimit,t.sizeDelta,t.isKeepLev,t.price,t.slippage,t.isLong,!1]);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"increaseCollateral",value:(p=o()(i()().mark((function e(t,n){var r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("increaseCollateral",[t,n]);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return p.apply(this,arguments)})},{key:"decreaseCollateral",value:(l=o()(i()().mark((function e(t,n){var r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("decreaseCollateral",[(0,A._b)(t),n]);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"updateIncreaseOrder",value:(s=o()(i()().mark((function e(t,n,r,a,u){var s;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("updateIncreaseOrder",[t,n,r,a,u]);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r,i){return s.apply(this,arguments)})},{key:"updateDecreaseOrder",value:(u=o()(i()().mark((function e(t,n,r){var a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("updateDecreaseOrder",[t,n,r]);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return u.apply(this,arguments)})},{key:"cancelOrder",value:(a=o()(i()().mark((function e(t,n,r){var a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("cancelOrder",[t,n,r]);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"cancelOrderList",value:(r=o()(i()().mark((function e(t,n,r){var a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("cancelOrderList",[t,n,r]);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"getCtokenDecimals",value:(n=o()(i()().mark((function e(){var t,n,r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this._ctoken)||void 0===t||null===(n=t._contract)||void 0===n?void 0:n.decimals();case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"formatCToken",value:(t=o()(i()().mark((function e(t){var n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCtokenDecimals();case 2:return n=e.sent,e.abrupt("return",(0,A.dN)(t,n));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),k}(T.k),w=function(e){f()(l,e);var t,n,r,a,u,s=g()(l);function l(e,t){return c()(this,l),s.call(this,e,t,b.Mt)}return d()(l,[{key:"getClassName",value:function(){return"MarketReader"}},{key:"getMarket",value:(u=o()(i()().mark((function e(t){var n,r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getMarket",t);case 2:return n=e.sent,r=new L(this._library,this._chainId,t,n.mktOuts,n.validOuts,n.feeOuts),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"getFundingRate",value:(a=o()(i()().mark((function e(t,n){var r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getFundingRate",t,n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"getFundingFee",value:(r=o()(i()().mark((function e(t,n,r){var a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getFundingFee",t,n,r);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"getPositions",value:(n=o()(i()().mark((function e(t,n){var r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getPositions",t,n);case 2:return null==(r=e.sent)||r.forEach((function(e){e.realisedPnl.mul(e.hasProfit?1:-1)})),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"availableLiquidity",value:(t=o()(i()().mark((function e(t,n,r){var a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("availableLiquidity",n,t,r);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})}]),l}(T.k),R=function(){var e=o()(i()().mark((function e(t,n,r,a,s,o,l){var p,c,y;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=new w(o,r),e.next=3,p.getMarket(a);case 3:return(c=e.sent).setChainId(r),c.setPendingTxns(n),y=u()(u()({},{accountAddress:"",isLimit:!1,isLong:!0,price:"0",amount:"0",size:"0",avlb:"0",pay:"0",leverage:"10",entryPrice:"0",liqPrice:"0",positionFee:"0",executionFee:"0",fundFeeRate:"0",availableLiquidity:"0",slippage:"0.3",openFeeRate:"0",closeFeeRate:"0",Positions:[],Orders:[],Trades:[]}),{},{accountAddress:l,reader:p,market:c,library:o,marketName:s}),e.next=9,P(y,t);case 9:return y=e.sent,e.abrupt("return",y);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,u,s){return e.apply(this,arguments)}}();function P(e,t){return F.apply(this,arguments)}function F(){return(F=o()(i()().mark((function e(t,n){var r,a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.entryPrice=n,!t.market){e.next=10;break}try{t.openFeeRate=t.market.getOpenFeeRate(),t.closeFeeRate=t.market.getCloseFeeRate(),t.executionFee=t.market.getExecFee(),t.cleanFee=null==t||null===(r=t.market)||void 0===r?void 0:r.getCleanFee()}catch(e){console.log("getDefaultSwap",e)}if(!t.accountAddress){e.next=10;break}return e.next=6,t.market.getCollateralToken().balanceOf(t.accountAddress);case 6:return a=e.sent,e.next=9,t.market.formatCToken(a);case 9:t.avlb=e.sent;case 10:return console.log("_initMarketArgs",t),e.abrupt("return",t);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j={getEstimatedPNL:function(e){var t=e.isLong,n=e.entryPrice,r=e.price,i=e.size,a=t?1:-1;return(0,l.O)(a).multipliedBy(r.minus(n)).multipliedBy(i).dividedBy(n)},getEntryPriceDisplay:function(e,t,n,r){var i=(0,l.O)((null==r?void 0:r.averagePrice)||0),a=e;if(r){var u=t.plus(r.size||0);a=e.multipliedBy(u).dividedBy(u[n?"plus":"minus"]((0,l.O)((null==r?void 0:r.PNL)||0)))}return{rise:a.minus(i).toNumber(),mergePositionPrice:a,existingPositionPrice:i}},getFeeRate:function(e,t){return(0,l.O)(1).dividedBy(t).plus(e)},getExecFee:function(e){return(0,l.O)(e)},getFundFee:function(e,t){return o()(i()().mark((function n(){var r,a,u;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null==e||null===(r=e.reader)||void 0===r?void 0:r.getFundingFee(null==e?void 0:e.accountAddress,null==e||null===(a=e.market)||void 0===a?void 0:a._address,t);case 2:return u=n.sent,n.abrupt("return",e.market.formatNum(u));case 4:case"end":return n.stop()}}),n)})))()},getFundFeeRete:function(e,t){return o()(i()().mark((function n(){var r,a;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.reader.getFundingRate(e.market._address,t);case 2:return r=n.sent,a=e.market.formatFeeOrRate(null==r?void 0:r[0]),n.abrupt("return",a);case 5:case"end":return n.stop()}}),n)})))()},getFundFeeRateLimit:function(e,t){var n;if(!e)return"0";var r=(0,l.O)("0.0000208333"),i=r;return(0,l.O)(e).abs().minus(r).gt(0)&&(i=i.multipliedBy(t?1:-1)),null===(n=i)||void 0===n?void 0:n.toString()},getFundFeeRateDisplay:function(e,t){if(!e)return"-";var n=(0,l.O)("0.0000208333"),r=(0,l.O)(e),i=n.multipliedBy(100);return r.abs().minus(n).gt(0)&&(i=r.multipliedBy(100).multipliedBy(t?1:-1)),i.toFixed(4,1)},getConfirmStat:function(e){var t=e.pay,n=e.openFee,r=e.executionFee,i=e.size,a=e.leverageOption,u=e.existingPosition,s=e.hasExistingPosition,o=e.cleanFee;return{getCollateralDisplay:function(){var e=t.minus(n).minus(r),i=e;return s&&u&&(i=(0,l.O)(u.initialCollateral).minus((0,l.O)(u.fundingFee||0)).plus(t).minus(n).minus(r)),{rise:i.minus(e).toNumber(),mergePositionPrice:i,existingPositionPrice:(0,l.O)(null==u?void 0:u.collateral)}},getLigPriceDisplay:function(e,t,n,r){var i=(0,l.O)((null==u?void 0:u.liqPrice)||"0"),a=j.getNextLiqPrice({size:this.getNextSizeDisplay().mergePositionPrice,collateral:this.getCollateralDisplay().mergePositionPrice,isLong:n,fundingFee:(0,l.O)((null==u?void 0:u.fundingFee)||0),positionFeeRate:r,entryPrice:e,maxLeverage:t,cleanFee:o},"Swap liq.Price");return{rise:a.minus(i).toNumber(),existingPositionPrice:i,mergePositionPrice:a}},getLeverageDisplay:function(){var e=(0,l.O)(a);if(!s)return{rise:0,existingPositionPrice:e,mergePositionPrice:e};var t=this.getCollateralDisplay(),n=this.getNextSizeDisplay().mergePositionPrice.dividedBy(t.mergePositionPrice);return{rise:n.minus(e).toNumber(),existingPositionPrice:(0,l.O)((null==u?void 0:u.leverage)||"0"),mergePositionPrice:n}},getNextSizeDisplay:function(){var e=(0,l.O)(s&&(null==u?void 0:u.size)||0),t=i.plus(e),n=u?e:t;return{existingPositionPrice:n,mergePositionPrice:t,rise:t.minus(n).toNumber()}}}},getNextLiqPrice:function(e,t){var n=e.size,r=e.entryPrice,i=e.isLong,a=e.positionFeeRate,u=e.fundingFee,s=e.maxLeverage,o=e.collateral,p=e.amount,c=e.cleanFee;if(n.eq(0))return(0,l.O)(0);null==s&&(s=(0,l.O)(200)),null==p&&(p=(0,l.O)(0));var y=n.dividedBy(s||30),d="".concat(n.toNumber(),"/").concat(s||30,"}");c.gt(y)&&(y=c,d="5");var m=n.multipliedBy(a||0),f="".concat(n.toNumber()," * ").concat(null==a?void 0:a.toNumber()),v=n.minus(o).plus(u).plus(m).plus(y),g="".concat(n.toNumber()," - ").concat(o.toNumber()," + ").concat(u.toNumber(),"+ ").concat(f," + ").concat(d);i||(v=n.plus(o).minus(u).minus(m).minus(y),g="".concat(n.toNumber()," + ").concat(o.toNumber()," - ").concat(u.toNumber()," - ").concat(f," - ").concat(d)),null!=p&&v[i?"minus":"plus"](p);var b=v.dividedBy(n).multipliedBy(r);return t&&console.log(t,"(".concat(g,")/").concat(n.toNumber(),"*").concat(r.toNumber())),b},getNextPay:function(e,t,n,r){return(0,l.O)(e).multipliedBy(j.getFeeRate(n,r)).multipliedBy((0,l.O)(t))},getNextAmount:function(e,t,n,r){return e.gt(0)?e.dividedBy(j.getFeeRate(n,r)).dividedBy(t):(0,l.O)(0)},getSize:function(e,t,n){return e.gt(0)?(0,l.O)(e).dividedBy(j.getFeeRate(t,n)):(0,l.O)(0)},getOpenFee:function(e,t){return e.multipliedBy(t)}}},30026:function(e,t,n){"use strict";n.d(t,{r:function(){return l}});var r=n(62435),i=Object.defineProperty,a=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const l=e=>r.createElement("svg",((e,t)=>{for(var n in t||(t={}))u.call(t,n)&&o(e,n,t[n]);if(a)for(var n of a(t))s.call(t,n)&&o(e,n,t[n]);return e})({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm.7-9V4.6H7.3V6h1.4Zm0 6V7.467H7.3V12h1.4Z",fill:"#797B96"}))},7420:function(){},95856:function(){},35883:function(){},52596:function(){},63897:function(){},62678:function(){},25819:function(){},81265:function(){},35539:function(){}}]);