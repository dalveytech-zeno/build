"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[893],{9138:function(Te,ne,o){var ie=o(38416),C=o.n(ie),H=o(63910),f,K="https://stats.gmx.io/api",U=(f={default:"https://gmx-server-mainnet.uw.r.appspot.com"},C()(f,H.RR,"https://gambit-server-staging.uc.r.appspot.com"),C()(f,H.qF,"https://gambit-server-devnet.uc.r.appspot.com"),C()(f,H.PO,"https://gmx-server-mainnet.uw.r.appspot.com"),C()(f,H.Qz,"https://gmx-avax-server.uc.r.appspot.com"),f);function y(se){if(!se)throw new Error("chainId is not provided");if(document.location.hostname.includes("deploy-preview")){var ee=localStorage.getItem("SERVER_BASE_URL");if(ee)return ee}return U[se]||U.default}function q(se,ee){return"".concat(y(se)).concat(ee)}},47981:function(Te,ne,o){o.d(ne,{rU:function(){return se}});for(var ie=o(38416),C=o.n(ie),H=o(20238),f=o(63910),K=o(49524),U,y,q,se=6,ee=function(V){return(0,K.u)(f.Fe,V)},Ae=(U={},C()(U,f.vT,[{name:"Wrapped Binance Coin",symbol:"WBNB",decimals:18,address:"0xd722eA9CBC41Eb530eEcc0689aaDD88f618e9d88",isWrapped:!0,baseSymbol:"BNB",imageUrl:"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png",isShortable:!0},{name:"Bitcoin (BTCB)",symbol:"BTC",decimals:8,isShortable:!0,address:"0xd06E2628a7845e85F42751c89beDE17DaB8411c8",imageUrl:"https://assets.coingecko.com/coins/images/26115/thumb/btcb.png?1655921693"},{name:"Ethereum",symbol:"ETH",decimals:18,isShortable:!0,address:"0xe94212E917bAb65D47489ABeE5c891adF3345bF4",imageUrl:"https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880"},{name:"Binance Coin",symbol:"BNB",decimals:18,isShortable:!0,address:H.dE,isNative:!0,imageUrl:"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png"},{name:"USDC",symbol:"USDC",decimals:18,address:"0x811Cc43d8129Ff2235Ef1b63E92bbbE2eAeF1714",isStable:!0,isShortable:!0,imageUrl:"https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png?1547042389"},{name:"DLP",symbol:"DLP",decimals:18,address:"0x0DE6925163084609E1ABD4aDFE460f1c328EDa0B",isStable:!0,isShortable:!0,imageUrl:"https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png?1547042389"}]),C()(U,f.Vr,[{name:"Bitcoin (BTCB)",symbol:"BTC",decimals:8,address:"0xb19C12715134bee7c4b1Ca593ee9E430dABe7b56",imageUrl:"https://assets.coingecko.com/coins/images/26115/thumb/btcb.png?1655921693"},{name:"Ethereum",symbol:"ETH",decimals:18,address:"0x1958f7C067226c7C8Ac310Dc994D0cebAbfb2B02",imageUrl:"https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880"},{name:"Binance Coin",symbol:"BNB",decimals:18,address:H.dE,isNative:!0,imageUrl:"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png"},{name:"Wrapped Binance Coin",symbol:"WBNB",decimals:18,address:"0x612777Eea37a44F7a95E3B101C39e1E2695fa6C2",isWrapped:!0,baseSymbol:"BNB",imageUrl:"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png"}]),C()(U,f.Fe,[{name:"Bitcoin (BTCB)",symbol:"BTC",decimals:18,address:ee("BTC"),imageUrl:"https://assets.coingecko.com/coins/images/26115/thumb/btcb.png?1655921693",isShortable:!0},{name:"Ethereum",symbol:"ETH",decimals:18,address:ee("ETH"),imageUrl:"https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880",isShortable:!0},{name:"Binance Coin",symbol:"BNB",decimals:18,address:H.dE,isNative:!0,imageUrl:"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png",isShortable:!0},{name:"Wrapped Ethereum Coin",symbol:"WETH",decimals:18,address:ee("ETH"),isWrapped:!0,baseSymbol:"WETH",imageUrl:"https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880",isShortable:!0}]),U),I=(y={},C()(y,f.PO,{GMX:{name:"GMX",symbol:"GMX",decimals:18,address:(0,K.u)(f.PO,"GMX"),imageUrl:"https://assets.coingecko.com/coins/images/18323/small/arbit.png?1631532468"},GLP:{name:"GMX LP",symbol:"GLP",decimals:18,address:(0,K.u)(f.PO,"StakedGlpTracker"),imageUrl:"https://github.com/gmx-io/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true"}}),C()(y,f.Qz,{GMX:{name:"GMX",symbol:"GMX",decimals:18,address:(0,K.u)(f.Qz,"GMX"),imageUrl:"https://assets.coingecko.com/coins/images/18323/small/arbit.png?1631532468"},GLP:{name:"GMX LP",symbol:"GLP",decimals:18,address:(0,K.u)(f.Qz,"StakedGlpTracker"),imageUrl:"https://github.com/gmx-io/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true"}}),C()(y,f.vT,{}),C()(y,f.Fe,{}),y),L=(q={},C()(q,f.vT,{GMX:{coingecko:"https://www.coingecko.com/en/coins/gmx",avalanche:"https://snowtrace.io/address/0x62edc0692bd897d2295872a9ffcac5425011c661"},GLP:{avalanche:"https://snowtrace.io/address/0x9e295B5B976a184B14aD8cd72413aD846C299660"},AVAX:{coingecko:"https://www.coingecko.com/en/coins/avalanche"},ETH:{coingecko:"https://www.coingecko.com/en/coins/weth",avalanche:"https://snowtrace.io/address/0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab"},BTC:{coingecko:"https://www.coingecko.com/en/coins/wrapped-bitcoin",avalanche:"https://snowtrace.io/address/0x50b7545627a5162f82a992c33b87adc75187b218"},"BTC.b":{coingecko:"https://www.coingecko.com/en/coins/wrapped-bitcoin",avalanche:"https://snowtrace.io/address/0x152b9d0FdC40C096757F570A51E494bd4b943E50"},MIM:{coingecko:"https://www.coingecko.com/en/coins/magic-internet-money",avalanche:"https://snowtrace.io/address/0x130966628846bfd36ff31a822705796e8cb8c18d"},"USDC.e":{coingecko:"https://www.coingecko.com/en/coins/usd-coin-avalanche-bridged-usdc-e",avalanche:"https://snowtrace.io/address/0xa7d7079b0fead91f3e65f86e8915cb59c1a4c664"},USDC:{coingecko:"https://www.coingecko.com/en/coins/usd-coin",avalanche:"https://snowtrace.io/address/0xb97ef9ef8734c71904d8002f8b6bc66dd9c48a6e"}}),C()(q,f.Fe,{GMX:{coingecko:"https://www.coingecko.com/en/coins/gmx",avalanche:"https://snowtrace.io/address/0x62edc0692bd897d2295872a9ffcac5425011c661"},GLP:{avalanche:"https://snowtrace.io/address/0x9e295B5B976a184B14aD8cd72413aD846C299660"},AVAX:{coingecko:"https://www.coingecko.com/en/coins/avalanche"},ETH:{coingecko:"https://www.coingecko.com/en/coins/weth",avalanche:"https://snowtrace.io/address/0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab"},BTC:{coingecko:"https://www.coingecko.com/en/coins/wrapped-bitcoin",avalanche:"https://snowtrace.io/address/0x50b7545627a5162f82a992c33b87adc75187b218"},"BTC.b":{coingecko:"https://www.coingecko.com/en/coins/wrapped-bitcoin",avalanche:"https://snowtrace.io/address/0x152b9d0FdC40C096757F570A51E494bd4b943E50"},MIM:{coingecko:"https://www.coingecko.com/en/coins/magic-internet-money",avalanche:"https://snowtrace.io/address/0x130966628846bfd36ff31a822705796e8cb8c18d"},"USDC.e":{coingecko:"https://www.coingecko.com/en/coins/usd-coin-avalanche-bridged-usdc-e",avalanche:"https://snowtrace.io/address/0xa7d7079b0fead91f3e65f86e8915cb59c1a4c664"},USDC:{coingecko:"https://www.coingecko.com/en/coins/usd-coin",avalanche:"https://snowtrace.io/address/0xb97ef9ef8734c71904d8002f8b6bc66dd9c48a6e"}}),C()(q,f.qF,{GMX:{coingecko:"https://www.coingecko.com/en/coins/gmx",arbitrum:"https://arbiscan.io/address/0xfc5a1a6eb076a2c7ad06ed22c90d7e710e35ad0a"},GLP:{arbitrum:"https://testnet.arbiscan.io/token/0xb4f81Fa74e06b5f762A104e47276BA9b2929cb27"}}),C()(q,f.PO,{GMX:{coingecko:"https://www.coingecko.com/en/coins/gmx",arbitrum:"https://arbiscan.io/address/0xfc5a1a6eb076a2c7ad06ed22c90d7e710e35ad0a"},GLP:{arbitrum:"https://arbiscan.io/token/0x1aDDD80E6039594eE970E5872D247bf0414C8903",reserves:"https://portfolio.nansen.ai/dashboard/gmx?chain=ARBITRUM"},ETH:{coingecko:"https://www.coingecko.com/en/coins/ethereum"},BTC:{coingecko:"https://www.coingecko.com/en/coins/wrapped-bitcoin",arbitrum:"https://arbiscan.io/address/0x2f2a2543b76a4166549f7aab2e75bef0aefc5b0f"},LINK:{coingecko:"https://www.coingecko.com/en/coins/chainlink",arbitrum:"https://arbiscan.io/address/0xf97f4df75117a78c1a5a0dbb814af92458539fb4"},UNI:{coingecko:"https://www.coingecko.com/en/coins/uniswap",arbitrum:"https://arbiscan.io/address/0xfa7f8980b0f1e64a2062791cc3b0871572f1f7f0"},USDC:{coingecko:"https://www.coingecko.com/en/coins/usd-coin",arbitrum:"https://arbiscan.io/address/0xff970a61a04b1ca14834a43f5de4533ebddb5cc8"},USDT:{coingecko:"https://www.coingecko.com/en/coins/tether",arbitrum:"https://arbiscan.io/address/0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"},DAI:{coingecko:"https://www.coingecko.com/en/coins/dai",arbitrum:"https://arbiscan.io/address/0xda10009cbd5d07dd0cecc66161fc93d7c9000da1"},MIM:{coingecko:"https://www.coingecko.com/en/coins/magic-internet-money",arbitrum:"https://arbiscan.io/address/0xfea7a6a0b346362bf88a9e4a88416b77a57d6c2a"},FRAX:{coingecko:"https://www.coingecko.com/en/coins/frax",arbitrum:"https://arbiscan.io/address/0x17fc002b466eec40dae837fc4be5c67993ddbd6f"}}),C()(q,f.Qz,{GMX:{coingecko:"https://www.coingecko.com/en/coins/gmx",avalanche:"https://snowtrace.io/address/0x62edc0692bd897d2295872a9ffcac5425011c661"},GLP:{avalanche:"https://snowtrace.io/address/0x9e295B5B976a184B14aD8cd72413aD846C299660",reserves:"https://portfolio.nansen.ai/dashboard/gmx?chain=AVAX"},AVAX:{coingecko:"https://www.coingecko.com/en/coins/avalanche"},ETH:{coingecko:"https://www.coingecko.com/en/coins/weth",avalanche:"https://snowtrace.io/address/0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab"},WBTC:{coingecko:"https://www.coingecko.com/en/coins/wrapped-bitcoin",avalanche:"https://snowtrace.io/address/0x50b7545627a5162f82a992c33b87adc75187b218"},BTC:{coingecko:"https://www.coingecko.com/en/coins/bitcoin-avalanche-bridged-btc-b",avalanche:"https://snowtrace.io/address/0x152b9d0FdC40C096757F570A51E494bd4b943E50"},MIM:{coingecko:"https://www.coingecko.com/en/coins/magic-internet-money",avalanche:"https://snowtrace.io/address/0x130966628846bfd36ff31a822705796e8cb8c18d"},USDC:{coingecko:"https://www.coingecko.com/en/coins/usd-coin",avalanche:"https://snowtrace.io/address/0xb97ef9ef8734c71904d8002f8b6bc66dd9c48a6e"},"USDC.e":{coingecko:"https://www.coingecko.com/en/coins/usd-coin-avalanche-bridged-usdc-e",avalanche:"https://snowtrace.io/address/0xa7d7079b0fead91f3e65f86e8915cb59c1a4c664"}}),q),le={ETH:"#6062a6",BTC:"#F7931A",WBTC:"#F7931A",USDC:"#2775CA","USDC.e":"#2A5ADA",USDT:"#67B18A",MIM:"#9695F8",FRAX:"#000",DAI:"#FAC044",UNI:"#E9167C",AVAX:"#E84142",LINK:"#3256D6"},i={},d={},c={},A={},E=[f.Fe,f.RR,f.Vr,f.PO,f.qF,f.Qz,f.vT],h=0;h<E.length;h++){var D=E[h];i[D]={},d[D]={};for(var O=Ae[D],N=0;N<(O==null?void 0:O.length);N++){var S=O[N];i[D][S.address]=S,d[D][S.symbol]=S}}function r(T){return c[T]}function ce(T){return A[T]}function j(T){return Ae[T]}function z(T,V){if(!i[T])throw new Error("Incorrect chainId ".concat(T));return V in i[T]}function he(T,V){if(!i[T])throw new Error("Incorrect chainId ".concat(T));if(!i[T][V])throw new Error('Incorrect address "'.concat(V,'" for chainId ').concat(T));return i[T][V]}function de(T,V){var Ne=d[T][V];if(!Ne)throw new Error('Incorrect symbol "'.concat(V,'" for chainId ').concat(T));return Ne}function Be(T){return Ae[T].filter(function(V){return V.symbol!=="USDG"})}function je(T){return Be(T).filter(function(V){return!V.isWrapped&&!V.isTempHidden})}},37432:function(Te,ne,o){o.d(ne,{x:function(){return f}});var ie=o(34713),C=o(63910),H=o(22837);function f(){var K=(0,ie.Ge)(),U=K.chainId;if(!U){var y=localStorage.getItem(H.HC);y&&(U=parseInt(y),U||localStorage.removeItem(H.HC))}return(!U||!C.FQ.includes(U))&&(U=C.rC),{chainId:U}}},39265:function(Te,ne,o){o.d(ne,{pQ:function(){return sr},sh:function(){return r},VZ:function(){return tr},FB:function(){return er},YO:function(){return ar},cZ:function(){return S},bD:function(){return D},Qo:function(){return rr},ET:function(){return or}});var ie=o(861),C=o(27424),H=o(17061),f=o(17156),K=o(34713),U=o(20238),y=o(59734),q={},se={},ee={},Ae=o(9138),I=o(63910),L=o(49524),le=o(47981),i=o(27350),d=o(1403),c=o(1031),A=o(72603),E=o(37432),h=o(24069),D=0,O=0,N=1e6,S=100*1e4,r="Increase",ce="Decrease",j="Stop",z="1.3",he=1,de=30,Be=(0,h.Jl)(993,27),je=5,T=10,V=750,Ne=18,qe="Swap",er="Long",rr="Short",B=1e4,ze=30,br="2000000000000000",ar="Market",tr="Limit",nr=(0,h.Jl)(5,ze),Me=(0,h.Jl)(1,30),ir=50,ye=(0,L.u)(I.Kj,"USDC"),hr=(0,h.Jl)(200*1e3*1e3,18),pr=25,sr={"5m":60*5,"15m":60*15,"1h":60*60,"4h":60*60*4,"1d":60*60*24},Ce=U.dE,cr=function(a){return function(t){return a===0?t:a>0?t.mul(expandDecimals(1,a)):t.div(expandDecimals(1,-a))}};function Sr(e){var a=e.size,t=e.sizeDelta,g=e.increaseSize,s=e.collateral,u=e.collateralDelta,n=e.increaseCollateral,b=e.entryFundingRate,p=e.cumulativeFundingRate,w=e.hasProfit,P=e.delta,l=e.includeDelta;if(!(!a&&!t)&&!(!s&&!u)){var m=a||bigNumberify(0);if(t)if(g)m=a.add(t);else{if(t.gte(a))return;m=a.sub(t)}var v=s||bigNumberify(0);if(u)if(n)v=s.add(u);else{if(u.gte(s))return;v=s.sub(u)}if(P&&l)if(w)v=v.add(P);else{if(P.gt(v))return;v=v.sub(P)}if(!v.eq(0)){if(v=t?v.mul(B-T).div(B):v,b&&p){var R=a.mul(p.sub(b)).div(N);v=v.sub(R)}return m.mul(B).div(v)}}}function or(e,a){return a?(0,I.jY)(e)+"address/"+a:(0,I.jY)(e)}function Er(e){var a=e.delta,t=e.deltaPercentage,g=e.hasProfit,s,u;return a.gt(0)?(s=g?"+":"-",u=g?"+":"-"):(s="",u=""),s+="$".concat(formatAmount(a,ze,2,!0)),u+="".concat(formatAmount(t,2,2),"%"),{deltaStr:s,deltaPercentageStr:u}}function Pr(e,a,t,g){return ethers.utils.solidityKeccak256(["address","address","address","bool"],[e,a,t,g])}function ur(e,a,t){return e.mul(expandDecimals(1,t)).div(expandDecimals(1,a))}function Ar(e,a,t){var g=a.size,s=a.collateral,u=a.isLong,n=a.averagePrice,b=a.lastIncreasedTime,p=e;t||(t=g),p||(p=bigNumberify(0));var w=n.gt(p)?n.sub(p):p.sub(n),P=t.mul(w).div(n),l=P,m=b+D<Date.now()/1e3,v=u?p.gt(n):p.lt(n);!m&&v&&P.mul(B).lte(g.mul(O))&&(P=bigNumberify(0));var R=P.mul(B).div(s),x=l.mul(B).div(s);return{delta:P,pendingDelta:l,pendingDeltaPercentage:x,hasProfit:v,deltaPercentage:R}}function Dr(e,a,t,g,s){var u=a===Ce?s:a,n=t===Ce?s:t;return e+":"+u+":"+n+":"+g}function lr(e,a,t){if(!(!e||!e.weight||!a))return a.eq(0)?bigNumberify(0):e.weight.mul(a).div(t)}function Ze(e,a,t,g,s,u,n){if(!e||!e.usdgAmount||!u||!n)return 0;var b=bigNumberify(t),p=bigNumberify(g),w=e.usdgAmount,P=w.add(a);s||(P=a.gt(w)?bigNumberify(0):w.sub(a));var l=lr(e,u,n);if(!l||l.eq(0))return b.toNumber();var m=w.gt(l)?w.sub(l):l.sub(w),v=P.gt(l)?P.sub(l):l.sub(P);if(v.lt(m)){var R=p.mul(m).div(l);return R.gt(b)?0:b.sub(R).toNumber()}var x=m.add(v).div(2);x.gt(l)&&(x=l);var Q=p.mul(x).div(l);return b.add(Q).toNumber()}function Oe(e){return e?he:de}function wr(e,a,t,g,s,u,n,b,p,w){var P={amount:bigNumberify(0)};if(!a||!t||!g||!s)return P;if(t===g)return{amount:a};var l=getTokenInfo(s,t),m=getTokenInfo(s,g);if(l.isNative&&m.isWrapped)return{amount:a};if(l.isWrapped&&m.isNative)return{amount:a};var v;l&&(v=w?l.contractMinPrice:l.minPrice);var R;if(m&&(R=w?m.contractMaxPrice:m.maxPrice),!v||!R)return P;var x=cr(m.decimals-l.decimals),Q=bigNumberify(0);if(n&&!n.isZero()&&(Q=a.mul(Me).div(n)),g===ye){var re=Oe(Boolean(l.isStable));if(n&&!n.isZero()){var ge=Q;return{amount:x(ge.mul(B-re).div(B)),feeBasisPoints:re}}var X=a.mul(v).div(Me);return{amount:x(X.mul(B-re).div(B)),feeBasisPoints:re}}if(t===ye){var Z,fe=(Z=m.redemptionAmount)===null||Z===void 0?void 0:Z.mul(u||R).div(expandDecimals(1,m.decimals));if(fe&&fe.gt(Be)){var oe=Oe(Boolean(m.isStable)),De=n&&!n.isZero()?Q:a.mul(m.redemptionAmount).div(expandDecimals(1,m.decimals));return{amount:x(De.mul(B-oe).div(B)),feeBasisPoints:oe}}var M=a,ae=getMostAbundantStableToken(e,s);if(!(ae!=null&&ae.availableAmount)||ae.availableAmount.lt(M)){var Le=n&&!n.isZero()?Q:a.mul(m.redemptionAmount).div(expandDecimals(1,m.decimals)),Re=Oe(Boolean(m.isStable));return{amount:x(Le.mul(B-Re).div(B)),feeBasisPoints:Re}}var pe=Oe(!0),me=Oe(!1);if(n&&!n.isZero()){var Fe=Q.mul(B-pe-me).div(B);return{amount:x(Fe),path:[ye,ae.address,m.address],feeBasisPoints:pe+me}}var te=a.mul(Me).div(ae.maxPrice);return te=te.mul(B-pe).div(B),te=te.mul(ae.minPrice).div(u||R),te=te.mul(B-me).div(B),{amount:x(te),path:[ye,ae.address,m.address],feeBasisPoints:pe+me}}var Ge=n&&!n.isZero()?Q:a.mul(v).div(u||R),ve=a.mul(v).div(Me);ve=ur(ve,l.decimals,Ne);var Ie=l.isStable&&m.isStable?he:de,we=l.isStable&&m.isStable?je:ir,Se=Ze(l,ve,Ie,we,!0,b,p),Ee=Ze(m,ve,Ie,we,!1,b,p),Ue=Se>Ee?Se:Ee;return{amount:x(Ge.mul(B-Ue).div(B)),feeBasisPoints:Ue}}function xr(e){return e===ethers.constants.AddressZero}function Tr(e){return e===ethers.constants.HashZero}function Br(e,a,t,g){var s=getContract(t,"PositionRouter"),u=getContract(t,"NATIVE_TOKEN"),n=useSWR([a,t,s,"minExecutionFee"],{fetcher:contractFetcher(e,PositionRouter)}),b=n.data,p=useSWR(["gasPrice",t],{fetcher:function(){return new Promise(function(){var re=_asyncToGenerator(_regeneratorRuntime().mark(function ge(X,Z){var fe,oe;return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(fe=getProvider(e,t),fe){M.next=4;break}return X(void 0),M.abrupt("return");case 4:return M.prev=4,M.next=7,fe.getGasPrice();case 7:oe=M.sent,X(oe),M.next=14;break;case 11:M.prev=11,M.t0=M.catch(4),console.error(M.t0);case 14:case"end":return M.stop()}},ge,null,[[4,11]])}));return function(ge,X){return re.apply(this,arguments)}}())}}),w=p.data,P;(t===ARBITRUM||t===ARBITRUM_TESTNET)&&(P=65e3),t===AVALANCHE?P=7e5:P=65e3;var l=b;if(w&&b){var m=w.mul(P);m.gt(b)&&(l=m)}var v=getUsd(l,u,!1,g),R=v==null?void 0:v.gt(expandDecimals(getHighExecutionFee(t),ze)),x=R?'The network cost to send transactions is high at the moment, please check the "Execution Fee" value before proceeding.':"";return{minExecutionFee:l,minExecutionFeeUSD:v,minExecutionFeeErrorMessage:x}}function dr(e){if(!e)return bigNumberify(0);var a=e.mul(B-T).div(B);return e.sub(a)}function ke(e){var a=e.liquidationAmount,t=e.size,g=e.collateral,s=e.averagePrice,u=e.isLong;if(!(!t||t.eq(0))){if(a.gt(g)){var n=a.sub(g),b=n.mul(s).div(t);return u?s.add(b):s.sub(b)}var p=g.sub(a),w=p.mul(s).div(t);return u?s.sub(w):s.add(w)}}function Ve(e,a,t,g,s,u){if(!e||e.length===0)return[];for(var n=_slicedToArray(e,2),b=n[0],p=n[1],w=b.length/s,P=[],l=0;l<w;l++){var m=p.slice(u*l,u*(l+1)).concat(b.slice(s*l,s*(l+1)));if(!(m[0]===Ce&&m[1]===Ce)){var v=g(m);v.index=t[l],v.account=a,P.push(v)}}return P}function mr(e,a,t,g){if(!a||!a.length)return[];var s=function(n){var b=n[6].toString()==="1",p=n[7].toString()==="1";return{path:[n[0],n[1],n[2]].filter(function(w){return w!==Ce}),amountIn:n[3],minOut:n[4],triggerRatio:n[5],triggerAboveThreshold:b,type:qe,shouldUnwrap:p}};return Ve(a,t,g,s,5,3).filter(function(u){return u.path.every(function(n){return isValidToken(e,n)})})}function vr(e,a,t,g){var s=function(n){var b=n[5].toString()==="1";return{purchaseToken:n[0],collateralToken:n[1],indexToken:n[2],purchaseTokenAmount:n[3],sizeDelta:n[4],isLong:b,triggerPrice:n[6],triggerAboveThreshold:n[7].toString()==="1",type:r}};return Ve(a,t,g,s,5,3).filter(function(u){return isValidToken(e,u.purchaseToken)&&isValidToken(e,u.collateralToken)&&isValidToken(e,u.indexToken)})}function gr(e,a,t,g){var s=function(n){var b=n[4].toString()==="1";return{collateralToken:n[0],indexToken:n[1],collateralDelta:n[2],sizeDelta:n[3],isLong:b,triggerPrice:n[5],triggerAboveThreshold:n[6].toString()==="1",type:ce}};return Ve(a,t,g,s,5,2).filter(function(u){return isValidToken(e,u.collateralToken)&&isValidToken(e,u.indexToken)})}function Cr(e,a){var t=useWeb3React(),g=t.library,s=t.account,u=!0,n=a||s,b=useChainId(),p=b.chainId,w=u&&n&&e,P=getContract(p,"OrderBook"),l=getContract(p,"OrderBook"),m=w?[u,p,P,n]:!1,v=useSWR(m||[],{dedupingInterval:5e3,fetcher:function(){var ge=_asyncToGenerator(_regeneratorRuntime().mark(function Z(fe,oe,De,M){var ae,Le,Re,pe,me,Fe,te,Ge,ve,Ie,we,Se,Ee,Ue,_e,Ke,Qe,Xe,Je,$e,Ye;return _regeneratorRuntime().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return ae=getProvider(g,oe),Le=new ethers.Contract(De,OrderBook.abi,ae),Re=new ethers.Contract(l,OrderBookReader.abi,ae),pe=function(){var F="".concat(getServerBaseUrl(oe),"/orders_indices?account=").concat(M);return fetch(F).then(function(){var G=_asyncToGenerator(_regeneratorRuntime().mark(function _($){var k,W,ue,Y,We;return _regeneratorRuntime().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.next=2,$.json();case 2:for(k=xe.sent,W={},ue=0,Y=Object.keys(k);ue<Y.length;ue++)We=Y[ue],W[We.toLowerCase()]=k[We].map(function(He){return parseInt(He.value)}).sort(function(He,fr){return He-fr});return xe.abrupt("return",W);case 6:case"end":return xe.stop()}},_)}));return function(_){return G.apply(this,arguments)}}()).catch(function(){return{swap:[],increase:[],decrease:[]}})},me=function(){var be=_asyncToGenerator(_regeneratorRuntime().mark(function F(G){var _,$;return _regeneratorRuntime().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return _=G.toLowerCase()+"OrdersIndex",W.next=3,Le[_](M).then(function(ue){return bigNumberify(ue._hex).toNumber()});case 3:return $=W.sent,W.abrupt("return",$);case 5:case"end":return W.stop()}},F)}));return function(G){return be.apply(this,arguments)}}(),Fe=function(){var be=_asyncToGenerator(_regeneratorRuntime().mark(function F(){var G,_,$,k,W;return _regeneratorRuntime().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,Promise.all([me("swap"),me("increase"),me("decrease")]);case 2:return G=Y.sent,_=_slicedToArray(G,3),$=_[0],k=_[1],W=_[2],Y.abrupt("return",{swap:$,increase:k,decrease:W});case 8:case"end":return Y.stop()}},F)}));return function(){return be.apply(this,arguments)}}(),te=function(F,G){var _=10,$=[];G=G||Math.max(F-_,0);for(var k=F-1;k>=G;k--)$.push(k);return $},Ge=function(F,G){return F.length===0?te(G):[].concat(_toConsumableArray(F),_toConsumableArray(te(G,F[F.length-1]+1).sort(function(_,$){return $-_})))},ve=function(){var be=_asyncToGenerator(_regeneratorRuntime().mark(function F(G,_,$,k){var W,ue,Y;return _regeneratorRuntime().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return W=Ge(_,$),Pe.next=3,Re[G](De,M,W);case 3:return ue=Pe.sent,Y=k(oe,ue,M,W),Pe.abrupt("return",Y);case 6:case"end":return Pe.stop()}},F)}));return function(G,_,$,k){return be.apply(this,arguments)}}(),J.prev=9,J.next=12,Promise.all([pe(),Fe()]);case 12:return Ie=J.sent,we=_slicedToArray(Ie,2),Se=we[0],Ee=we[1],J.next=18,Promise.all([ve("getSwapOrders",Se.swap,Ee.swap,mr),ve("getIncreaseOrders",Se.increase,Ee.increase,vr),ve("getDecreaseOrders",Se.decrease,Ee.decrease,gr)]);case 18:return Ue=J.sent,_e=_slicedToArray(Ue,3),Ke=_e[0],Qe=Ke===void 0?[]:Ke,Xe=_e[1],Je=Xe===void 0?[]:Xe,$e=_e[2],Ye=$e===void 0?[]:$e,J.abrupt("return",[].concat(_toConsumableArray(Qe),_toConsumableArray(Je),_toConsumableArray(Ye)));case 29:J.prev=29,J.t0=J.catch(9),console.error(J.t0);case 32:case"end":return J.stop()}},Z,null,[[9,29]])}));function X(Z,fe,oe,De){return ge.apply(this,arguments)}return X}()}),R=v.data,x=R===void 0?[]:R,Q=v.mutate,re=v.error;return[x,Q,re]}function Or(e){var a=e.isLong,t=e.size,g=e.collateral,s=e.averagePrice,u=e.entryFundingRate,n=e.cumulativeFundingRate,b=e.sizeDelta,p=e.collateralDelta,w=e.increaseCollateral,P=e.increaseSize,l=e.delta,m=e.hasProfit,v=e.includeDelta;if(!(!t||!g||!s)){var R=t||bigNumberify(0),x=g;if(b){if(P)R=t.add(b);else{if(b.gte(t))return;R=t.sub(b)}if(v&&!m){var Q=b.mul(l).div(t);x=x.sub(Q)}}if(p)if(w)x=x.add(p);else{if(p.gte(x))return;x=x.sub(p)}var re=dr(t).add(nr);if(u&&n){var ge=t.mul(n.sub(u)).div(N);re=re.add(ge)}var X=ke({liquidationAmount:re,size:R,collateral:x,averagePrice:s,isLong:a}),Z=ke({liquidationAmount:R.mul(B).div(S),size:R,collateral:x,averagePrice:s,isLong:a});return X?Z?a?X.gt(Z)?X:Z:X.lt(Z)?X:Z:X:Z}}function Rr(){var e=getServerUrl(ARBITRUM,"/ui_version"),a=useSWR([e],{fetcher:function(){return fetch.apply(void 0,arguments).then(function(n){return n.text()})}}),t=a.data,g=a.mutate,s=!1;return t&&parseFloat(t)>parseFloat(z)&&(s=!0),s=!1,{data:s,mutate:g}}},1031:function(Te,ne,o){o.d(ne,{z3:function(){return ie.z3}});var ie=o(72603),C=o(59734),H={},f=o(9138),K=o(49524),U=o(47981),y=o(27350),q=o(39265);function se(I,L,le){if(L){var i=I.isNative?le:I.address,d=L[i];if(d){var c=bigNumberify(d);if(!c.eq(0)){var A=I.maxPrice.sub(I.minPrice),E=A.mul(BASIS_POINTS_DIVISOR).div(I.maxPrice.add(I.minPrice).div(2));if(E.gt(MAX_PRICE_DEVIATION_BASIS_POINTS-50)){c.gt(I.minPrimaryPrice)?I.maxPrice=c:I.minPrice=c;return}var h=E.div(2).toNumber();I.maxPrice=c.mul(BASIS_POINTS_DIVISOR+h).div(BASIS_POINTS_DIVISOR),I.minPrice=c.mul(BASIS_POINTS_DIVISOR-h).div(BASIS_POINTS_DIVISOR)}}}}function ee(I,L,le,i,d,c,A,E){c||(c=15);for(var h=2,D={},O=0;O<I.length;O++){var N=JSON.parse(JSON.stringify(I[O]));L&&(N.balance=L[O]),N.address===USDG_ADDRESS&&(N.minPrice=expandDecimals(1,USD_DECIMALS),N.maxPrice=expandDecimals(1,USD_DECIMALS)),D[N.address]=N}for(var S=0;S<le.length;S++){var r=JSON.parse(JSON.stringify(le[S]));if(i){if(r.poolAmount=i[S*c],r.reservedAmount=i[S*c+1],r.availableAmount=r.poolAmount.sub(r.reservedAmount),r.usdgAmount=i[S*c+2],r.redemptionAmount=i[S*c+3],r.weight=i[S*c+4],r.bufferAmount=i[S*c+5],r.maxUsdgAmount=i[S*c+6],r.globalShortSize=i[S*c+7],r.maxGlobalShortSize=i[S*c+8],r.maxGlobalLongSize=i[S*c+9],r.minPrice=i[S*c+10],r.maxPrice=i[S*c+11],r.guaranteedUsd=i[S*c+12],r.maxPrimaryPrice=i[S*c+13],r.minPrimaryPrice=i[S*c+14],r.contractMinPrice=r.minPrice,r.contractMaxPrice=r.maxPrice,r.maxAvailableShort=bigNumberify(0),r.hasMaxAvailableShort=!1,r.maxGlobalShortSize.gt(0)&&(r.hasMaxAvailableShort=!0,r.maxGlobalShortSize.gt(r.globalShortSize)&&(r.maxAvailableShort=r.maxGlobalShortSize.sub(r.globalShortSize))),r.maxUsdgAmount.eq(0)&&(r.maxUsdgAmount=DEFAULT_MAX_USDG_AMOUNT),r.availableUsd=r.isStable?r.poolAmount.mul(r.minPrice).div(expandDecimals(1,r.decimals)):r.availableAmount.mul(r.minPrice).div(expandDecimals(1,r.decimals)),r.maxAvailableLong=bigNumberify(0),r.hasMaxAvailableLong=!1,r.maxGlobalLongSize.gt(0)){if(r.hasMaxAvailableLong=!0,r.maxGlobalLongSize.gt(r.guaranteedUsd)){var ce=r.maxGlobalLongSize.sub(r.guaranteedUsd);r.maxAvailableLong=ce.lt(r.availableUsd)?ce:r.availableUsd}}else r.maxAvailableLong=r.availableUsd;r.maxLongCapacity=r.maxGlobalLongSize.gt(0)&&r.maxGlobalLongSize.lt(r.availableUsd.add(r.guaranteedUsd))?r.maxGlobalLongSize:r.availableUsd.add(r.guaranteedUsd),r.managedUsd=r.availableUsd.add(r.guaranteedUsd),r.managedAmount=r.managedUsd.mul(expandDecimals(1,r.decimals)).div(r.minPrice),se(r,A,E)}d&&(r.fundingRate=d[S*h],r.cumulativeFundingRate=d[S*h+1]),D[r.address]&&(r.balance=D[r.address].balance),D[r.address]=r}return D}function Ae(I,L,le,i,d,c){var A=getTokens(L),E=getContract(L,"VaultReader"),h=getContract(L,"Vault"),D=getContract(L,"PositionRouter"),O=getContract(L,"NATIVE_TOKEN"),N=getWhitelistedTokens(L),S=N.map(function(de){return de.address}),r=useSWR(["useInfoTokens:".concat(le),L,E,"getVaultTokenInfoV4"],{fetcher:contractFetcher(I,VaultReader,[h,D,O,expandDecimals(1,18),S])}),ce=r.data,j=getServerUrl(L,"/prices"),z=useSWR([j],{fetcher:function(){return fetch.apply(void 0,arguments).then(function(Be){return Be.json()})},refreshInterval:500,refreshWhenHidden:!0}),he=z.data;return{infoTokens:ee(A,i,N,ce,d,c,he,O)}}},72603:function(Te,ne,o){o.d(ne,{z3:function(){return y}});var ie=o(20238),C=o(63910),H=o(47981),f=o(39265),K=ie.dE;function U(i,d){return d?getExplorerUrl(i)+"token/"+d:getExplorerUrl(i)}function y(i,d,c,A){return c&&d===A?i[K]:i[d||K]}function q(i,d,c,A,E){if(A&&A!==MARKET&&E)return E;if(c&&!(d&&!c.maxPrice)&&!(!d&&!c.minPrice))return d?c.maxPrice:c.minPrice}function se(i,d,c,A,E,h){if(i){if(d===USDG_ADDRESS)return i.mul(PRECISION).div(expandDecimals(1,18));var D=y(A,d),O=q(d,c,D,E,h);if(O)return i.mul(O).div(expandDecimals(1,D.decimals))}}function ee(i,d,c){var A=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(c){if(d===USDG_ADDRESS)return c.mul(expandDecimals(1,18)).div(PRECISION);var E=y(i,d);if(E){var h=A.overridePrice||(A.max?E.maxPrice:E.minPrice);if(!(!BigNumber.isBigNumber(h)||h.lte(0)))return c.mul(expandDecimals(1,E.decimals)).div(h)}}}function Ae(i,d,c,A,E,h,D,O){if(!(!i||!d||!h||!c||!A||!E||!O)){var N=getVisibleTokens(i),S=d.mul(c).div(PRECISION),r=N.map(function(j){var z=y(h,j.address),he=getFeeBasisPoints(z,S,MINT_BURN_FEE_BASIS_POINTS,TAX_BASIS_POINTS,!0,A,E),de=bigNumberify(0);return z.maxUsdgAmount&&z.maxUsdgAmount.gt(0)&&z.usdgAmount&&z.usdgAmount.gt(0)&&(de=z.maxUsdgAmount.sub(z.usdgAmount).mul(expandDecimals(1,USD_DECIMALS)).div(expandDecimals(1,USDG_DECIMALS))),{token:j,fees:he,amountLeftToDeposit:de}}),ce=r.filter(function(j){return j.token.address!==D&&j.hasOwnProperty("fees")&&O.lt(j.amountLeftToDeposit)}).sort(function(j,z){return j.fees-z.fees});return ce.length>0?ce[0]:r.sort(function(j,z){return Number(z.amountLeftToDeposit.sub(j.amountLeftToDeposit))})[0]}}function I(i,d){for(var c=getWhitelistedTokens(i),A,E=c.find(function(N){return N.isStable}),h=0;h<c.length;h++){var D=y(d,c[h].address);if(!(!D.isStable||!D.availableAmount)){var O=adjustForDecimals(D.availableAmount,D.decimals,USD_DECIMALS);(!A||O.gt(A))&&(A=O,E=D)}}return E}function L(i,d){return!d||i.address!==K||!i.balance?!1:!!(d.gte(i.balance)||i.balance.sub(d).lt(DUST_BNB))}var le=function(d,c){if(d){for(var A=[],E=0;E<d.length;E++){var h=d[E];h===K&&(h=c),A.push(h)}return A}}}}]);
