"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[490],{48268:function(e,n,t){t.d(n,{y:function(){return c}});var r=t(97857),a=t.n(r),s=t(62435),i=t(61895),o=t(86074),u=function(e){var n=e.defaultValue,t=void 0===n?"-":n,r=e.value,a=e.defaultValueIncludeSuffix,u=void 0!==a&&a,c=e.displayDecimals,l=e.label,p=void 0===l?"":l,d=e.thousandSeparator,y=void 0===d||d,m=e.prefix,f=void 0===m?"":m,v=e.suffix,b=void 0===v?"":v,h=(0,s.useMemo)((function(){return null==r?u?"".concat(f||"").concat(t).concat(b||""):t:(0,i.dp)(r).display({thousandSeparator:y,prefix:f,suffix:b})}),[r,t,c,y,f,b]);return(0,o.jsxs)(o.Fragment,{children:[p,h]})},c=function(e){var n=e.separator,t=void 0===n?"/":n,r=e.values;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u,a()({},r[0]||{})),t,(0,o.jsx)(u,a()({},r[1]||{}))]})};n.Z=u},87798:function(e,n,t){t.d(n,{P:function(){return r},v:function(){return a}});var r="wss://fstream.binance.com/stream",a="https://fapi.binance.com/fapi/v1/"},61895:function(e,n,t){t.d(n,{Q6:function(){return o},dp:function(){return u}});var r=t(2593),a=t(70794),s=t(24069),i=t(36493);function o(e){return e instanceof r.O$?(0,a.Z)((0,s.dN)(e,18,2)):(0,a.Z)("..."===e?0:e)}function u(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";if(null==e||isNaN(Number(e)))return{display:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null==e?void 0:e.defaultDisplay)||"-"},number:o(0),value:t};var r=o(e),a=r.toFixed(n,1);return(0,i.R$)().showFullDecimals&&(a=r.toString()),{display:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.thousandSeparator,t=void 0===n||n,r=e.prefix,s=void 0===r?"$":r,i=e.suffix,o=void 0===i?"":i,u=t?c(a):a;return"".concat(s||"").concat(u).concat(o||"")},number:r,value:a}}function c(e){return e?e.replace(/\d+/,(function(e){return e.replace(/(\d)(?=(\d{3})+$)/g,(function(e){return e+","}))})):""}},92499:function(e,n,t){t.d(n,{Z:function(){return L}});var r=t(9783),a=t.n(r),s=t(97857),i=t.n(s),o=t(5574),u=t.n(o),c=t(34713),l=t(62435),p=t(60088),d=t(4480),y=t(95591),m=t(15009),f=t.n(m),v=t(99289),b=t.n(v),h=t(12444),k=t.n(h),T=t(72004),g=t.n(T),x=t(31996),C=t.n(x),w=t(26037),M=t.n(w),S=JSON.parse('{"Mt":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"market","type":"address"},{"indexed":false,"internalType":"address","name":"marketValid","type":"address"},{"indexed":false,"internalType":"address","name":"orderBookLong","type":"address"},{"indexed":false,"internalType":"address","name":"orderBookShort","type":"address"}],"name":"Create","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"allMarketsLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"string","name":"_name","type":"string"},{"internalType":"address","name":"_marketAddress","type":"address"},{"internalType":"address","name":"_marketValid","type":"address"},{"internalType":"address","name":"_marketRouter","type":"address"},{"internalType":"address","name":"_orderBookLong","type":"address"},{"internalType":"address","name":"_orderBookShort","type":"address"},{"internalType":"address","name":"_indexToken","type":"address"},{"internalType":"address","name":"_feeRouter","type":"address"},{"internalType":"address","name":"_feeVault","type":"address"},{"internalType":"address","name":"_positionBook","type":"address"},{"internalType":"address","name":"_openStoreLong","type":"address"},{"internalType":"address","name":"_closeStoreLong","type":"address"},{"internalType":"address","name":"_openStoreShort","type":"address"},{"internalType":"address","name":"_closeStoreShort","type":"address"},{"internalType":"address","name":"_addressProvider","type":"address"},{"internalType":"uint256","name":"_minSlippage","type":"uint256"},{"internalType":"uint256","name":"_maxSlippage","type":"uint256"},{"internalType":"uint256","name":"_minLeverage","type":"uint256"},{"internalType":"uint256","name":"_maxLeverage","type":"uint256"},{"internalType":"uint256","name":"_maxTradeAmount","type":"uint256"},{"internalType":"uint256","name":"_minPay","type":"uint256"},{"internalType":"uint256","name":"_minCollateral","type":"uint256"},{"internalType":"bool","name":"_allowOpen","type":"bool"},{"internalType":"bool","name":"_allowClose","type":"bool"},{"internalType":"uint256","name":"_tokenDigits","type":"uint256"},{"internalType":"address","name":"_vault","type":"address"},{"internalType":"address","name":"_vaultRouter","type":"address"},{"internalType":"address","name":"_collateralToken","type":"address"}],"internalType":"struct MarketFactory.CreateInputs","name":"_inputs","type":"tuple"}],"name":"create","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_marketAddr","type":"address"}],"name":"getMarket","outputs":[{"components":[{"internalType":"string","name":"name","type":"string"},{"internalType":"address","name":"addr","type":"address"}],"internalType":"struct IMarketFactory.Props","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMarkets","outputs":[{"components":[{"internalType":"string","name":"name","type":"string"},{"internalType":"address","name":"addr","type":"address"}],"internalType":"struct IMarketFactory.Props[]","name":"_markets","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMarketsV2","outputs":[{"components":[{"internalType":"string","name":"name","type":"string"},{"internalType":"address","name":"addr","type":"address"},{"internalType":"bool","name":"allowOpen","type":"bool"},{"internalType":"bool","name":"allowClose","type":"bool"}],"internalType":"struct IMarketFactory.Outs[]","name":"_outs","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"markets","outputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"address","name":"addr","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_marketAddr","type":"address"},{"internalType":"address","name":"_newMarketAddr","type":"address"}],"name":"update","outputs":[],"stateMutability":"nonpayable","type":"function"}]}'),_=function(e){C()(r,e);var n,t=M()(r);function r(e,n,a){return k()(this,r),t.call(this,e,n,S.Mt,a)}return g()(r,[{key:"getMarkets",value:(n=b()(f()().mark((function e(){var n;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getMarkets");case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getClassName",value:function(){return"MarketFactory"}}]),r}(t(76935).k),R=t(27960),N={name:"BTC/USDT",address:"0xbEcC4Cd3bC7E912bCeA6EFE3F8379a7018455F99"},B=function(){var e=b()(f()().mark((function e(n,t){var r,a,s;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,R.K)(n,"MarketFactory"),a=new _(t,n,r),e.next=4,a.getMarkets();case 4:if(e.t0=e.sent.map((function(e){return i()(i()({},e),{},{address:e.addr})})),e.t0){e.next=7;break}e.t0=[];case 7:return 0==(s=e.t0).length&&(console.warn("failed to get markets"),s.push(N)),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),F=t(37432),A=t(36493),I=t(4872),O=t(45066),L=function(){var e=(0,F.x)().chainId,n=(0,c.Ge)().library,t=(0,y.ZP)("".concat(e),(function(){return B(e,n)})).data,r=(0,d.FV)(I.O7),s=u()(r,2)[1],o=(0,d.FV)(I.tr),m=u()(o,2)[1],f=(0,d.FV)(I.bI),v=u()(f,2),b=v[0],h=v[1],k=t&&(null==t?void 0:t.length)>0?"subscribeTickerBatch":null;(0,p.Z)(k,(function(){var e=t.map((function(e){return(0,A.do)(null==e?void 0:e.name).toLowerCase()}));return(0,O.C)(e,(function(e){s((function(n){return i()(i()({},n),{},a()({},e.symbol,e))}))}))})),(0,l.useEffect)((function(){return m(t)}),[t]),(0,l.useEffect)((function(){t&&t.length&&(b||h(t[0]))}),[t,b])}},20243:function(e,n,t){t.d(n,{N:function(){return p},U:function(){return r}});var r,a=t(97857),s=t.n(a),i=t(12444),o=t.n(i),u=t(72004),c=t.n(u),l=t(87798);!function(e){e.ConnectFailed="ConnectFailed",e.NoSupportCountry="NoSupportCountry"}(r||(r={}));var p=new(function(){function e(n){o()(this,e),this.url=n,this.socket=null,this.isOpened=!1,this.messageQueue=[],this.reconnectInterval=5e3,this.reconnectTimer=null,this.pingInterval=5e3,this.pingTimer=null,this.idCounter=1,this.reconnectCount=0,this.useResfulApi=!1,this.subscriptions={},this.initWebSocket()}return c()(e,[{key:"initWebSocket",value:function(){var e=this;this.socket=new WebSocket(this.url),this.socket.onopen=function(){e.isOpened=!0,e.sendCachedMessages(),e.heartBeat(),e.stopReconnect()},this.socket.onmessage=function(n){return e.onMessage(n)},this.socket.onclose=function(){e.isOpened=!1,e.stopHeartBeat(),e.reconnect()},this.socket.onerror=function(){e.isOpened=!1,e.stopHeartBeat()}}},{key:"send",value:function(e){this.isOpened?this.socket.send(JSON.stringify(e)):this.messageQueue.push(e)}},{key:"sendCachedMessages",value:function(){for(;this.messageQueue.length>0;)this.send(this.messageQueue.shift())}},{key:"heartBeat",value:function(){}},{key:"stopHeartBeat",value:function(){clearInterval(this.pingTimer),this.pingTimer=null}},{key:"reconnect",value:function(){console.log("websocket reconnecting..."),clearInterval(this.reconnectTimer);var e=this;this.isOpened=!1,this.reconnectTimer=setTimeout((function(){if(e.reconnectCount>=1)return console.error("WebSocket connection failed after multiple attempts."),e.onMessage({data:JSON.stringify({error:r.ConnectFailed})}),e.stopReconnect(),void(e.useResfulApi=!0);e.reconnectCount++,e.initWebSocket()}),e.reconnectInterval)}},{key:"stopReconnect",value:function(){clearTimeout(this.reconnectTimer),this.reconnectTimer=null,this.reconnectCount=0}},{key:"subscribe",value:function(e,n,t){var r=this.idCounter++,a=s()(s()({},e),{},{id:r});return this.subscriptions.id={callback:n,predicate:t},this.send(a),r}},{key:"onMessage",value:function(e){try{var n=JSON.parse(e.data);Object.values(this.subscriptions).forEach((function(e){var t=e.callback,r=e.predicate;void 0!==(null==n?void 0:n.error)?t(n.error,null):r(n)&&t(null,n)}))}catch(n){console.error("Received non-JSON message:",e.data)}}},{key:"unsubscribe",value:function(e){delete this.subscriptions[e]}},{key:"close",value:function(){this.socket.close(),this.stopHeartBeat()}}]),e}())(l.P)},28722:function(e,n,t){t.d(n,{Dw:function(){return b},Jx:function(){return m},eI:function(){return y},x7:function(){return v}});var r,a=t(15009),s=t.n(a),i=t(99289),o=t.n(i),u=t(9783),c=t.n(u),l=t(88610),p=t(46495),d=t(13805);function y(e){return new l.f({uri:e,cache:new p.h})}var m="https://api.thegraph.com/subgraphs/name/dalveytechaaron/fuji",f=(r={},c()(r,d.Qz,m),c()(r,d.bx,m),r),v=function(e){return f[e]||m},b=function(){var e=o()(s()().mark((function e(n,t){var r,a;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n,{headers:{"Content-Type":"application/json",Accept:"application/json"},method:"POST",body:JSON.stringify({query:t}),mode:"cors"}).catch((function(e){console.log("err",e)}));case 2:return r=e.sent,e.next=5,null==r?void 0:r.json();case 5:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},96714:function(e,n,t){t.d(n,{P:function(){return a},m:function(){return r}});var r=function(e){if(!e)return"";var n,t=new Date(1e3*e);if(!((n=t)instanceof Date)||isNaN(+n))return"";var r=(null==t?void 0:t.getMonth())+1;return(r=(null==t?void 0:t.getMonth())>9?""+r:"0"+r)+"/"+((null==t?void 0:t.getDate())>9?null==t?void 0:t.getDate():"0"+(null==t?void 0:t.getDate()))+" "+((null==t?void 0:t.getHours())>9?null==t?void 0:t.getHours():"0"+(null==t?void 0:t.getHours()))+":"+((null==t?void 0:t.getMinutes())>9?null==t?void 0:t.getMinutes():"0"+(null==t?void 0:t.getMinutes()))},a="-"},54958:function(e,n,t){var r,a=t(15009),s=t.n(a),i=t(99289),o=t.n(i),u=t(8433),c=t(87798),l=t(20243),p=u.Z.create({baseURL:c.v,timeout:5e3}),d={getKLines:function(e,n){return p.get("klines",{params:{symbol:e,interval:n}})},subscribeKLine:function(e,n){var t=e.symbol,r=e.period,a="".concat(t,"@kline_").concat(r),s=l.N.subscribe({method:"SUBSCRIBE",params:[a]},n,(function(e){return e.stream===a}));return function(){l.N.subscribe({method:"UNSUBSCRIBE",params:[a]},n,(function(e){return e.stream===a})),l.N.unsubscribe(s)}},getTickerPrice:function(e){return p.get("ticker/price",{params:{symbol:e}})},get24HChange:(r=o()(s()().mark((function e(n){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.get("ticker/24hr",{params:{symbol:n}}));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)}),subscribeTickerBatch:function(e,n){var t=l.N.subscribe({method:"SUBSCRIBE",params:e},n,(function(e){var n;return null==e||null===(n=e.stream)||void 0===n?void 0:n.includes("@ticker")}));return function(){l.N.subscribe({method:"UNSUBSCRIBE",params:e},n,(function(e){var n;return null==e||null===(n=e.stream)||void 0===n?void 0:n.includes("@ticker")})),l.N.unsubscribe(t)}}};n.Z=d},45066:function(e,n,t){t.d(n,{C:function(){return m},f:function(){return y}});var r=t(15009),a=t.n(r),s=t(5574),i=t.n(s),o=t(99289),u=t.n(o),c=t(54958),l=t(61895),p=t(20243),d=function(e){return{symbol:e.s.toLowerCase(),indexPrice:(0,l.Q6)(e.c),"24Height":(0,l.Q6)(e.h),"24Low":(0,l.Q6)(e.l),"24Change":(0,l.Q6)(e.p),"24ChangeRate":(0,l.Q6)(e.P)}};function y(e,n){var t=e.symbol,r=e.period;return c.Z.subscribeKLine({symbol:t,period:r},(function(e,t){var r;e?p.U.ConnectFailed:n({time:(r=t.data).k.t/1e3,open:r.k.o,close:r.k.c,height:r.k.h,low:r.k.l})}))}function m(e,n){var t=null,r=function(){var s=u()(a()().mark((function s(){var o,u,l,p,y;return a()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=e[0],a.prev=1,a.next=4,Promise.all([c.Z.getTickerPrice(o),c.Z.get24HChange(o)]);case 4:u=a.sent,l=i()(u,2),p=l[0].data,y=l[1].data,t=setTimeout((function(){return r()}),1e3),n(d({s:p.symbol.toLowerCase(),c:p.price,h:y.highPrice,l:y.lowPrice,p:y.priceChange,P:y.priceChangePercent})),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(1),console.error("get24HChange getTickerPrice fail",a.t0);case 15:case"end":return a.stop()}}),s,null,[[1,12]])})));return function(){return s.apply(this,arguments)}}(),s=e.map((function(e){return"".concat(e,"@ticker")})),o=c.Z.subscribeTickerBatch(s,(function(e,t){e?e===p.U.ConnectFailed&&r():n(d(t.data))}));return function(){o(),t&&(clearTimeout(t),t=null)}}},4872:function(e,n,t){t.d(n,{bI:function(){return u},O7:function(){return o},tr:function(){return i}});var r=t(4480),a=t(36493),s=(0,t(6983).J)({key:"depx-user-preference"}).persistAtom,i=(0,r.cn)({key:"marketsAtom",default:[]}),o=(0,r.cn)({key:"marketStoreAtom",default:{}}),u=(0,r.cn)({key:"marketSelectionAtom",default:"",effects_UNSTABLE:[s]});(0,r.nZ)({key:"symbolSelectionAtom",get:function(e){var n=(0,e.get)(u);return(0,a.do)(null==n?void 0:n.name).toLowerCase()}})}}]);