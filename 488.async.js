"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[488],{37432:function(K,P,n){n.d(P,{x:function(){return c}});var _=n(34713),o=n(13805),C=n(22837);function c(){var p=(0,_.Ge)(),y=p.chainId;if(!y){var f=localStorage.getItem(C.HC);f&&(y=parseInt(f),y||localStorage.removeItem(C.HC))}return(!y||!o.FQ.includes(y))&&(y=o.rC),{chainId:y}}},28722:function(K,P,n){n.d(P,{Dw:function(){return L},Jx:function(){return e},x7:function(){return M}});var _=n(17061),o=n.n(_),C=n(17156),c=n.n(C),p=n(38416),y=n.n(p),f=n(13805),l;function h(E){return new ApolloClient({uri:E,cache:new InMemoryCache})}var e="https://api.thegraph.com/subgraphs/name/dalveytechaaron/fuji",m=(l={},y()(l,f.Qz,e),y()(l,f.bx,e),l),M=function(w){return m[w]||e},L=function(){var E=c()(o()().mark(function w(O,x){var I,A;return o()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,fetch(O,{headers:{"Content-Type":"application/json",Accept:"application/json"},method:"POST",body:JSON.stringify({query:x}),mode:"cors"}).catch(function(D){console.log("err",D)});case 2:return I=v.sent,v.next=5,I==null?void 0:I.json();case 5:return A=v.sent,v.abrupt("return",(A==null?void 0:A.data)||{});case 7:case"end":return v.stop()}},w)}));return function(O,x){return E.apply(this,arguments)}}()},96714:function(K,P,n){n.d(P,{$d:function(){return p},mr:function(){return C},xP:function(){return c},zg:function(){return y}});var _=n(70794),o=n(24069),C=function(l){var h=function(O){return O instanceof Date&&!isNaN(+O)};if(!l)return"";var e=new Date(l*1e3);if(!h(e))return"";var m=(e==null?void 0:e.getMonth())+1;m=(e==null?void 0:e.getMonth())>9?""+m:"0"+m;var M=(e==null?void 0:e.getDate())>9?e==null?void 0:e.getDate():"0"+(e==null?void 0:e.getDate()),L=(e==null?void 0:e.getHours())>9?e==null?void 0:e.getHours():"0"+(e==null?void 0:e.getHours()),E=(e==null?void 0:e.getMinutes())>9?e==null?void 0:e.getMinutes():"0"+(e==null?void 0:e.getMinutes());return m+"/"+M+" "+L+":"+E},c=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"-";return isNaN(+l)||!isFinite(+l)?M:e+new _.O(l).toString()+m},p=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"--";return isNaN(+l)||!isFinite(+l)||+l==0?M:e+new _.O(l).toString()+m},y=function(l){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:18,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2;if(!l)return"-";var m=(0,o._b)(l);return(0,o.dN)(m,h,e)}},4175:function(K,P,n){n.d(P,{a:function(){return v}});var _=n(17061),o=n.n(_),C=n(17156),c=n.n(C),p=n(61895),y=n(8433),f="https://api.binance.com/api/v3/",l={KLINE:"klines",TICKER:"ticker/24hr",TICKER_PRICE:"ticker/price"},h=y.Z.create({baseURL:f,timeout:5e3}),e={getTickerPrice:function(a){return h.get(l.TICKER_PRICE,{params:{symbol:a}})},getTicker:function(a){return h.get(l.TICKER,{params:{symbol:a}})},getKLines:function(a,s){return h.get(l.KLINE,{params:{symbol:a,interval:s}})}},m=e,M=function(){var i=c()(o()().mark(function a(s){var u,t;return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return u={Change:(0,p.O)(0),ChangeRate:(0,p.O)(0),Hige:(0,p.O)(0),Low:(0,p.O)(0)},d.prev=1,d.next=4,m.getTicker(s.toUpperCase());case 4:t=d.sent,t.data&&(u.Hige=(0,p.O)(t.data.highPrice),u.Low=(0,p.O)(t.data.lowPrice),u.Change=(0,p.O)(t.data.priceChange),u.ChangeRate=(0,p.O)(t.data.priceChangePercent)),d.next=11;break;case 8:d.prev=8,d.t0=d.catch(1),console.log(d.t0);case 11:return d.abrupt("return",u);case 12:case"end":return d.stop()}},a,null,[[1,8]])}));return function(s){return i.apply(this,arguments)}}(),L=n(97218),E="https://api.binance.com/api/v3/",w=function(){var i=c()(o()().mark(function a(s){var u;return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,m.getTickerPrice(s.toUpperCase());case 3:if(u=r.sent,!u.data){r.next=6;break}return r.abrupt("return",(0,p.O)(u.data.price));case 6:return r.abrupt("return",u.data);case 9:r.prev=9,r.t0=r.catch(0),console.log(r.t0);case 12:return r.abrupt("return",(0,p.O)(0));case 13:case"end":return r.stop()}},a,null,[[0,9]])}));return function(s){return i.apply(this,arguments)}}(),O=null;function x(i){return!0}var I=n(27424),A=n.n(I),B=function(){var i=c()(o()().mark(function a(s,u){var t,r,d,U,g,k,S,N,F,H;return o()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return t=[],b.prev=1,b.next=4,m.getKLines(s.toUpperCase(),u);case 4:if(r=b.sent,r.data)for(d=0;d<r.data.length;d++)U=r.data[d],g=A()(U,5),k=g[0],S=g[1],N=g[2],F=g[3],H=g[4],t.push({time:k/1e3,open:S,high:N,low:F,close:H});b.next=11;break;case 8:b.prev=8,b.t0=b.catch(1),console.log(b.t0);case 11:return b.abrupt("return",t);case 12:case"end":return b.stop()}},a,null,[[1,8]])}));return function(s,u){return i.apply(this,arguments)}}(),v=function(){var a=function(){var t=c()(o()().mark(function r(d){var U;return o()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,w(d);case 2:return U=k.sent,k.abrupt("return",U);case 4:case"end":return k.stop()}},r)}));return function(d){return t.apply(this,arguments)}}(),s=function(){var t=c()(o()().mark(function r(d){return o()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,M(d);case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}},r)}));return function(d){return t.apply(this,arguments)}}(),u=function(r,d){return B(r,d)};return{getIndexPrice:a,get24H:s,getKLines:u}};function D(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];if(a.length==0)return toDecimal(0);var u=T(a),t=[];return a.forEach(function(r){R(r,u)&&t.push(r)}),t.length==a.length?u:T(t)}function T(i){if(i.length<2)throw"avgPrice It must be more than two prices";var a=toDecimal(0);i.forEach(function(u){a=a.plus(u)});var s=a.div(toDecimal(i.length));return s}function R(i,a){var s=toDecimal(.05),u=a.multipliedBy(s);return!(i>a.plus(u)||i<a.minus(u))}},61641:function(K,P,n){n.d(P,{t:function(){return B}});var _=n(17061),o=n.n(_),C=n(42122),c=n.n(C),p=n(17156),y=n.n(p),f=n(56690),l=n.n(f),h=n(89728),e=n.n(h),m=n(61655),M=n.n(m),L=n(26389),E=n.n(L),w=JSON.parse('{"Mt":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"market","type":"address"},{"indexed":false,"internalType":"address","name":"marketValid","type":"address"},{"indexed":false,"internalType":"address","name":"orderBookLong","type":"address"},{"indexed":false,"internalType":"address","name":"orderBookShort","type":"address"}],"name":"Create","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"allMarketsLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"string","name":"_name","type":"string"},{"internalType":"address","name":"_marketAddress","type":"address"},{"internalType":"address","name":"_marketValid","type":"address"},{"internalType":"address","name":"_marketRouter","type":"address"},{"internalType":"address","name":"_orderBookLong","type":"address"},{"internalType":"address","name":"_orderBookShort","type":"address"},{"internalType":"address","name":"_indexToken","type":"address"},{"internalType":"address","name":"_feeRouter","type":"address"},{"internalType":"address","name":"_feeVault","type":"address"},{"internalType":"address","name":"_positionBook","type":"address"},{"internalType":"address","name":"_openStoreLong","type":"address"},{"internalType":"address","name":"_closeStoreLong","type":"address"},{"internalType":"address","name":"_openStoreShort","type":"address"},{"internalType":"address","name":"_closeStoreShort","type":"address"},{"internalType":"address","name":"_addressProvider","type":"address"},{"internalType":"uint256","name":"_minSlippage","type":"uint256"},{"internalType":"uint256","name":"_maxSlippage","type":"uint256"},{"internalType":"uint256","name":"_minLeverage","type":"uint256"},{"internalType":"uint256","name":"_maxLeverage","type":"uint256"},{"internalType":"uint256","name":"_maxTradeAmount","type":"uint256"},{"internalType":"uint256","name":"_minPay","type":"uint256"},{"internalType":"uint256","name":"_minCollateral","type":"uint256"},{"internalType":"bool","name":"_allowOpen","type":"bool"},{"internalType":"bool","name":"_allowClose","type":"bool"},{"internalType":"uint256","name":"_tokenDigits","type":"uint256"},{"internalType":"address","name":"_vault","type":"address"},{"internalType":"address","name":"_vaultRouter","type":"address"},{"internalType":"address","name":"_collateralToken","type":"address"}],"internalType":"struct MarketFactory.CreateInputs","name":"_inputs","type":"tuple"}],"name":"create","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_marketAddr","type":"address"}],"name":"getMarket","outputs":[{"components":[{"internalType":"string","name":"name","type":"string"},{"internalType":"address","name":"addr","type":"address"}],"internalType":"struct IMarketFactory.Props","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMarkets","outputs":[{"components":[{"internalType":"string","name":"name","type":"string"},{"internalType":"address","name":"addr","type":"address"}],"internalType":"struct IMarketFactory.Props[]","name":"_markets","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMarketsV2","outputs":[{"components":[{"internalType":"string","name":"name","type":"string"},{"internalType":"address","name":"addr","type":"address"},{"internalType":"bool","name":"allowOpen","type":"bool"},{"internalType":"bool","name":"allowClose","type":"bool"}],"internalType":"struct IMarketFactory.Outs[]","name":"_outs","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"markets","outputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"address","name":"addr","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_marketAddr","type":"address"},{"internalType":"address","name":"_newMarketAddr","type":"address"}],"name":"update","outputs":[],"stateMutability":"nonpayable","type":"function"}]}'),O=n(76935),x=function(v){M()(T,v);var D=E()(T);function T(R,i,a){return l()(this,T),D.call(this,R,i,w.Mt,a)}return e()(T,[{key:"getMarkets",value:function(){var R=y()(o()().mark(function a(){var s;return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call("getMarkets");case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}},a,this)}));function i(){return R.apply(this,arguments)}return i}()},{key:"getClassName",value:function(){return"MarketFactory"}}]),T}(O.k),I=n(27960),A={name:"BTC/USDT",address:"0xbEcC4Cd3bC7E912bCeA6EFE3F8379a7018455F99"},B=function(){var v=y()(o()().mark(function D(T,R){var i,a,s;return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=(0,I.K)(T,"MarketFactory"),a=new x(R,T,i),t.next=4,a.getMarkets();case 4:if(t.t0=t.sent.map(function(r){return c()(c()({},r),{},{address:r.addr})}),t.t0){t.next=7;break}t.t0=[];case 7:return s=t.t0,s.length==0&&(console.warn("failed to get markets"),s.push(A)),t.abrupt("return",s);case 10:case"end":return t.stop()}},D)}));return function(T,R){return v.apply(this,arguments)}}()}}]);
