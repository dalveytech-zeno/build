"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[547],{28722:function(n,t,e){e.d(t,{Dw:function(){return y},Jx:function(){return m},eI:function(){return f},x7:function(){return x}});var r,o=e(15009),u=e.n(o),a=e(99289),i=e.n(a),c=e(9783),l=e.n(c),d=e(88610),s=e(46495),p=e(13805);function f(n){return new d.f({uri:n,cache:new s.h})}var m="https://api.thegraph.com/subgraphs/name/dalveytechaaron/fuji",v=(r={},l()(r,p.Qz,m),l()(r,p.bx,m),r),x=function(n){return v[n]||m},y=function(){var n=i()(u()().mark((function n(t,e){var r,o;return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(t,{headers:{"Content-Type":"application/json",Accept:"application/json"},method:"POST",body:JSON.stringify({query:e}),mode:"cors"}).catch((function(n){console.log("err",n)}));case 2:return r=n.sent,n.next=5,null==r?void 0:r.json();case 5:return o=n.sent,n.abrupt("return",(null==o?void 0:o.data)||{});case 7:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}()},85161:function(n,t,e){e.d(t,{gd:function(){return i},kT:function(){return c},q1:function(){return u},xH:function(){return a}});var r=e(27484),o=e.n(r),u=o()("2023-04-23 19:00").unix(),a=o()("2023-04-24 19:00").unix(),i=5e3,c=2},27697:function(n,t,e){e.d(t,{Ub:function(){return s},Xz:function(){return l},Yy:function(){return d},ff:function(){return p}});e(62435);var r=e(610),o=e.n(r),u=e(61895),a=e(85161),i=e(86074),c=function(n){return n&&n.length>13?"".concat(n.slice(0,5),"...").concat(n.slice(n.length-4)):n},l=function(n){var t={title:"Rank",dataIndex:"rank",key:"rank",render:function(n,t,e){return e+1}},e={title:"Account",dataIndex:"account",key:"account",render:function(n){var t;return(0,i.jsxs)("div",{className:"df",children:[(0,i.jsx)(o(),{size:24,address:n}),(0,i.jsx)("span",{style:{marginLeft:"8px"},children:null!==(t=c(n))&&void 0!==t?t:"-"})]})}},r={title:"Cum. Size",dataIndex:"cumSize",key:"cumSize",render:function(n){return(0,u.dp)(n,2).display({prefix:"$"})}},a={title:"Cum. Collateral",dataIndex:"cumCollateral",key:"cumCollateral",render:function(n){return(0,u.dp)(n,2).display({prefix:"$"})}},l={title:"PNL",dataIndex:"PNL",render:function(n){return(0,u.dp)(n).display({prefix:"$"})}},d={title:"Prize",dataIndex:"Prize",key:"Prize",align:"right",render:function(t,e,r){return(0,i.jsx)("span",{className:"cGreen tr",children:(0,u.dp)(1===n?s(r+1):p(r+1)).display({prefix:"$"})})}};return 1===n?[t,e,r,a,l,{title:"ROI",key:"ROI",render:function(n,t){return Number(n.cumCollateral)<500?"-":(0,u.dp)(null==n?void 0:n.ROI).display({prefix:"",suffix:"%"})}},d]:[t,e,r,a,l,{title:"Reward",dataIndex:"reward",render:function(n){return(0,u.dp)(n).display({prefix:"$"})}},{title:"Total Profit",dataIndex:"totalProfit",key:"totalProfit",render:function(n){return(0,u.dp)(n,2).display("$")}},d]},d=function(n,t,e,r){var o,i,c={title:"Trading Volume",tooltipContent:"The total volume accumulated between the activity.",text1:(0,u.dp)(null==t?void 0:t.totalVolume,2).display({prefix:"$"}),text2:"Your Volume ".concat((0,u.dp)(null==t||null===(o=t.user)||void 0===o?void 0:o.totalVolume,2).display({prefix:"$"}))},l={title:"BLP Supply",tooltipContent:"The total BLP supply accumulated between the activity.",text1:(0,u.dp)(null==e?void 0:e.totalSupply,2).display({prefix:"$"}),text2:"Your supply ".concat((0,u.dp)(null==e?void 0:e.yourStake,2).display({prefix:"$"}))},d={title:"Prize Pool",tooltipContent:"The estimated amount distirbuted to all top traders by competition end results.",text1:"".concat((0,u.dp)(a.gd,0).display("$")),text2:1===n?"Your Rank ".concat((null==r?void 0:r.tradeROIRank)||"-",", Prize ").concat((0,u.dp)(s(null==r?void 0:r.tradeROIRank)).display({prefix:"$"})):"Your Rank ".concat((null==r?void 0:r.profitRank)||"-",", Prize ").concat((0,u.dp)(p(null==r?void 0:r.profitRank)).display({prefix:"$"}))},f={title:"Trades",tooltipContent:"The total open and close accumulated between the activity.",text1:(null==t?void 0:t.trades)||"-",text2:"Your Trades ".concat((null==t||null===(i=t.user)||void 0===i?void 0:i.trades)||"-")};return 1===n?[c,l,d]:[c,f,d]};function s(n){return 1===n?1500:2===n?1e3:3===n?500:n<=50?42.53:0}function p(n){return n<=3?833.33:n<=10?214.28:n<=30?50:0}},79536:function(n,t,e){e.d(t,{m:function(){return c}});var r=e(5574),o=e.n(r),u=e(62435),a=e(86074),i=function(n){var t=Math.floor(n/86400),e=Math.floor(n%86400/3600),r=Math.floor(n%3600/60),o=n%60,u="";return t>0&&(u+=t+"d "),e>0&&(u+=e+"h "),r>0&&(u+=r+"m "),o>0&&(u+=o+"s "),u.trim()},c=function(n){var t=n.className,e=n.startTime,r=n.endedTime,c=(0,u.useState)("Start At "),l=o()(c,2),d=l[0],s=l[1],p=(0,u.useState)("-"),f=o()(p,2),m=f[0],v=f[1];return(0,u.useEffect)((function(){if(e&&r){var n=setInterval((function(){var n=Math.round(Date.now()/1e3);e>n?(s("Start After "),v(i(Number(e)-n))):r<n?(s("Ended"),v("")):(s("Ending in "),v(i(Number(r)-n)))}),1e3);return function(){return clearInterval(n)}}}),[e,r]),(0,a.jsxs)("span",{className:"c100 ".concat(t),children:[d,(0,a.jsx)("span",{className:"c200",children:m})]})}},55952:function(n,t,e){e.d(t,{I:function(){return y},r:function(){return h}});var r=e(97857),o=e.n(r),u=e(15009),a=e.n(u),i=e(99289),c=e.n(i),l=e(70794),d=e(24069),s=e(28722),p=function(){var n=c()(a()().mark((function n(t){var e,r,u,i,c,l,p,f,m;return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.account,r=t.limit,u=void 0===r?50:r,i=t.orderBy,c=void 0===i?"pnl":i,l=t.roundId,f="query CompetitionsQuery {\n      competitionSummaries(where: {roundId: ".concat(p=void 0===l?1:l,"}) {\n        lpSupply\n        endedAt\n        id\n        roundId\n        startAt\n        volume\n        trades\n      }\n      competitionDetails(first: ").concat(u,", orderBy: ").concat(c,", orderDirection: desc, where: {roundId: ").concat(p,'}) {\n        account\n        collateral\n        cumCollateral\n        cumSize\n        id\n        pnl\n        roundId\n        totalProfit\n      }\n      competitionUsers(where: {account: "').concat(null==e?void 0:e.toLowerCase(),'", roundId: ').concat(p,"}) {\n        account\n        id\n        lpSupply\n        volume\n        roundId\n        trades\n      }\n    }\n  "),n.next=4,(0,s.Dw)(s.Jx,f);case 4:if(m=n.sent,console.log("---getCompetitionSummaries---",m),!m){n.next=8;break}return n.abrupt("return",(y=void 0,h=void 0,k=void 0,w=void 0,y=(a=m).competitionSummaries,h=a.competitionDetails,k=a.competitionUsers,w=y[0],o()(o()({},w),{},{startAt:Number(null==w?void 0:w.startAt),endedAt:Number(null==w?void 0:w.endedAt),LP:(0,d.dN)(null==w?void 0:w.lpSupply,6),totalVolume:(0,d.dN)(null==w?void 0:w.volume,18),user:x(k[0]),list:h.map(v)})));case 8:case"end":return n.stop()}var a,y,h,k,w}),n)})));return function(t){return n.apply(this,arguments)}}(),f=function(){var n=c()(a()().mark((function n(t){var e,r,o,u,i;return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.account,r=t.roundId,o='\n    query CompetitionUsersQuery {\n      competitionUsers(where: {account: "'.concat(null==e?void 0:e.toLowerCase(),'", roundId: ').concat(r,"}) {\n        id\n        account\n        lpSupply\n        volume\n        roundId\n        trades\n      }\n    }\n  "),n.next=4,(0,s.Dw)(s.Jx,o);case 4:if(u=n.sent,!(i=u.competitionUsers)||!i.length){n.next=8;break}return n.abrupt("return",x(i[0]));case 8:return n.abrupt("return",null);case 9:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),m=function(){var n=c()(a()().mark((function n(t){var e,r,o,u,i,c,l,d,p,f;return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.orderBy,r=t.limit,o=t.offset,u=t.roundId,i="query userCompetitionQuery {\n      competitionSummaries(where: {roundId: ".concat(u,"}) {\n        endedAt\n        startAt\n      }\n      competitionDetails(orderBy: ").concat(e,", skip: ").concat(o,", orderDirection: desc, first: ").concat(r,", where: {roundId: ").concat(u,"}) {\n        account\n        id\n        pnl\n        totalProfit\n        cumCollateral\n        pnl\n      }\n   }\n  "),n.next=4,(0,s.Dw)(s.Jx,i);case 4:if(!(c=n.sent)){n.next=8;break}return p=c.competitionDetails,f=c.competitionSummaries,n.abrupt("return",{startAt:null===(l=f[0])||void 0===l?void 0:l.startAt,endedAt:null===(d=f[0])||void 0===d?void 0:d.endedAt,list:null==p?void 0:p.map(v)});case 8:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}();var v=function(n){return o()(o()({},n),{},{PNL:(0,d.dN)(n.pnl,18),cumCollateral:(0,d.dN)(n.cumCollateral,18),cumSize:(0,d.dN)(n.cumSize,18),totalProfit:(0,d.dN)(n.totalProfit,18),ROI:null!=n&&n.cumCollateral?new l.O(n.pnl).div(new l.O(n.cumCollateral)):0})},x=function(n){if(n)return o()(o()({},n),{},{LP:(0,d.dN)(null==n?void 0:n.lpSupply,6),totalVolume:(0,d.dN)(null==n?void 0:n.volume,18)})},y=function(){var n=c()(a()().mark((function n(t){var e;return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p(t);case 2:return e=n.sent,n.abrupt("return",e);case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),h=function(){var n=c()(a()().mark((function n(t){var e,r,u,i,l,d,s,p;return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.account,r=t.roundId,u=e.toLowerCase(),n.next=4,f({account:u,roundId:r});case 4:if(i=n.sent){n.next=7;break}return n.abrupt("return",null);case 7:return l=o()(o()({},i),{},{profitRank:0,tradeROIRank:0}),d=function(){var n=c()(a()().mark((function n(){var t,e,i,c,l,d=arguments;return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:"pnl",n.prev=1,e=1e3,i=0,n.next=6,m({limit:e,offset:i,orderBy:t,roundId:r});case 6:if(c=n.sent,!((l=null==c?void 0:c.list.findIndex((function(n){return n.account===u})))>=0)){n.next=10;break}return n.abrupt("return",o()(o()({},c),{},{user:null==c?void 0:c.list[l],rank:-1!==l?l+1:"-"}));case 10:n.next=15;break;case 12:return n.prev=12,n.t0=n.catch(1),n.abrupt("return",null);case 15:case"end":return n.stop()}}),n,null,[[1,12]])})));return function(){return n.apply(this,arguments)}}(),n.prev=9,n.next=12,d("pnl");case 12:return(s=n.sent)&&(l=o()(o()({},s),{},{profitRank:s.rank})),n.next=16,d("totalProfit");case 16:return(p=n.sent)&&(l.tradeROIRank=p.rank),n.abrupt("return",l);case 21:n.prev=21,n.t0=n.catch(9),console.log("getUserCompetitionInfo error:",n.t0);case 24:case"end":return n.stop()}}),n,null,[[9,21]])})));return function(t){return n.apply(this,arguments)}}()}}]);