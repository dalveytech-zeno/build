(self.webpackChunk=self.webpackChunk||[]).push([[997],{48268:function(e,n,t){"use strict";t.d(n,{y:function(){return c}});var r=t(97857),a=t.n(r),s=t(62435),i=t(61895),u=t(86074),o=function(e){var n=e.defaultValue,t=void 0===n?"-":n,r=e.value,a=e.defaultValueIncludeSuffix,o=void 0!==a&&a,c=e.displayDecimals,p=e.label,l=void 0===p?"":p,d=e.thousandSeparator,y=void 0===d||d,f=e.prefix,m=void 0===f?"":f,b=e.suffix,v=void 0===b?"":b,h=(0,s.useMemo)((function(){return null==r?o?"".concat(m||"").concat(t).concat(v||""):t:(0,i.dp)(r).display({thousandSeparator:y,prefix:m,suffix:v})}),[r,t,c,y,m,v]);return(0,u.jsxs)(u.Fragment,{children:[l,h]})},c=function(e){var n=e.separator,t=void 0===n?"/":n,r=e.values;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o,a()({},r[0]||{})),t,(0,u.jsx)(o,a()({},r[1]||{}))]})};n.Z=o},40819:function(e,n,t){"use strict";t.d(n,{a:function(){return O}});var r=t(9783),a=t.n(r),s=t(97857),i=t.n(s),u=t(5574),o=t.n(u),c=t(34713),p=t(62435),l=t(60088),d=t(4480),y=t(95591),f=t(15009),m=t.n(f),b=t(99289),v=t.n(b),h=t(12444),k=t.n(h),T=t(72004),g=t.n(T),x=t(31996),w=t.n(x),_=t(26037),M=t.n(_),C=JSON.parse('{"Mt":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"market","type":"address"},{"indexed":false,"internalType":"address","name":"marketValid","type":"address"},{"indexed":false,"internalType":"address","name":"orderBookLong","type":"address"},{"indexed":false,"internalType":"address","name":"orderBookShort","type":"address"}],"name":"Create","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"allMarketsLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"string","name":"_name","type":"string"},{"internalType":"address","name":"_marketAddress","type":"address"},{"internalType":"address","name":"_marketValid","type":"address"},{"internalType":"address","name":"_marketRouter","type":"address"},{"internalType":"address","name":"_orderBookLong","type":"address"},{"internalType":"address","name":"_orderBookShort","type":"address"},{"internalType":"address","name":"_indexToken","type":"address"},{"internalType":"address","name":"_feeRouter","type":"address"},{"internalType":"address","name":"_feeVault","type":"address"},{"internalType":"address","name":"_positionBook","type":"address"},{"internalType":"address","name":"_openStoreLong","type":"address"},{"internalType":"address","name":"_closeStoreLong","type":"address"},{"internalType":"address","name":"_openStoreShort","type":"address"},{"internalType":"address","name":"_closeStoreShort","type":"address"},{"internalType":"address","name":"_addressProvider","type":"address"},{"internalType":"uint256","name":"_minSlippage","type":"uint256"},{"internalType":"uint256","name":"_maxSlippage","type":"uint256"},{"internalType":"uint256","name":"_minLeverage","type":"uint256"},{"internalType":"uint256","name":"_maxLeverage","type":"uint256"},{"internalType":"uint256","name":"_maxTradeAmount","type":"uint256"},{"internalType":"uint256","name":"_minPay","type":"uint256"},{"internalType":"uint256","name":"_minCollateral","type":"uint256"},{"internalType":"bool","name":"_allowOpen","type":"bool"},{"internalType":"bool","name":"_allowClose","type":"bool"},{"internalType":"uint256","name":"_tokenDigits","type":"uint256"},{"internalType":"address","name":"_vault","type":"address"},{"internalType":"address","name":"_vaultRouter","type":"address"},{"internalType":"address","name":"_collateralToken","type":"address"}],"internalType":"struct MarketFactory.CreateInputs","name":"_inputs","type":"tuple"}],"name":"create","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_marketAddr","type":"address"}],"name":"getMarket","outputs":[{"components":[{"internalType":"string","name":"name","type":"string"},{"internalType":"address","name":"addr","type":"address"}],"internalType":"struct IMarketFactory.Props","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMarkets","outputs":[{"components":[{"internalType":"string","name":"name","type":"string"},{"internalType":"address","name":"addr","type":"address"}],"internalType":"struct IMarketFactory.Props[]","name":"_markets","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMarketsV2","outputs":[{"components":[{"internalType":"string","name":"name","type":"string"},{"internalType":"address","name":"addr","type":"address"},{"internalType":"bool","name":"allowOpen","type":"bool"},{"internalType":"bool","name":"allowClose","type":"bool"}],"internalType":"struct IMarketFactory.Outs[]","name":"_outs","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"markets","outputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"address","name":"addr","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_marketAddr","type":"address"},{"internalType":"address","name":"_newMarketAddr","type":"address"}],"name":"update","outputs":[],"stateMutability":"nonpayable","type":"function"}]}'),S=function(e){w()(r,e);var n,t=M()(r);function r(e,n,a){return k()(this,r),t.call(this,e,n,C.Mt,a)}return g()(r,[{key:"getMarkets",value:(n=v()(m()().mark((function e(){var n;return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("getMarkets");case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getClassName",value:function(){return"MarketFactory"}}]),r}(t(76935).k),L=t(27960),R={name:"BTC/USDT",address:"0xbEcC4Cd3bC7E912bCeA6EFE3F8379a7018455F99"},B=function(){var e=v()(m()().mark((function e(n,t){var r,a,s;return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,L.K)(n,"MarketFactory"),a=new S(t,n,r),e.next=4,a.getMarkets();case 4:if(e.t0=e.sent.map((function(e){return i()(i()({},e),{},{address:e.addr})})),e.t0){e.next=7;break}e.t0=[];case 7:return 0==(s=e.t0).length&&(console.warn("failed to get markets"),s.push(R)),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),I=t(37432),N=t(36493),A=t(74595),F=t(4872),P=t(88308),E=function(){var e=(0,I.x)().chainId,n=(0,c.Ge)().library,t=A.I.useContainer().platform,r=(0,y.ZP)("".concat(e),(function(){return B(e,n)})).data,s=(0,d.FV)(F.O7),u=o()(s,2)[1],f=(0,d.FV)(F.tr),m=o()(f,2)[1],b=(0,d.FV)(F.bI),v=o()(b,2),h=v[0],k=v[1],T=r&&(null==r?void 0:r.length)>0?"subscribeTickerBatch":null;(0,l.Z)([T,t],(function(e){var n=o()(e,2),t=n[0],s=n[1];if(!t)return function(){};var c=r.map((function(e){return(0,N.do)(null==e?void 0:e.name).toLowerCase()}));return(0,P.CY)(c,s,(function(e){u((function(n){return i()(i()({},n),{},a()({},e.symbol,e))}))}))})),(0,p.useEffect)((function(){return m(r)}),[r]),(0,p.useEffect)((function(){r&&r.length&&(h||k(r[0]))}),[r,h])},D=t(86074),O=function(){return E(),(0,D.jsx)("div",{})}},61895:function(e,n,t){"use strict";t.d(n,{Q6:function(){return u},dp:function(){return o}});var r=t(2593),a=t(70794),s=t(24069),i=t(36493);function u(e){return e instanceof r.O$?(0,a.Z)((0,s.dN)(e,18,2)):(0,a.Z)("..."===e?0:e)}function o(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";if(null==e||isNaN(Number(e)))return{display:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null==e?void 0:e.defaultDisplay)||"-"},number:u(0),value:t};var r=u(e),a=r.toFixed(n,1);return(0,i.R$)().showFullDecimals&&(a=r.toString()),{display:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.thousandSeparator,t=void 0===n||n,r=e.prefix,s=void 0===r?"$":r,i=e.suffix,u=void 0===i?"":i,o=t?c(a):a;return"".concat(s||"").concat(o).concat(u||"")},number:r,value:a}}function c(e){return e?e.replace(/\d+/,(function(e){return e.replace(/(\d)(?=(\d{3})+$)/g,(function(e){return e+","}))})):""}},28722:function(e,n,t){"use strict";t.d(n,{Dw:function(){return v},Jx:function(){return f},eI:function(){return y},x7:function(){return b}});var r,a=t(15009),s=t.n(a),i=t(99289),u=t.n(i),o=t(9783),c=t.n(o),p=t(88610),l=t(46495),d=t(13805);function y(e){return new p.f({uri:e,cache:new l.h})}var f="https://api.thegraph.com/subgraphs/name/dalveytechaaron/fuji",m=(r={},c()(r,d.Qz,f),c()(r,d.bx,f),r),b=function(e){return m[e]||f},v=function(){var e=u()(s()().mark((function e(n,t){var r,a;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n,{headers:{"Content-Type":"application/json",Accept:"application/json"},method:"POST",body:JSON.stringify({query:t}),mode:"cors"}).catch((function(e){console.log("err",e)}));case 2:return r=e.sent,e.next=5,null==r?void 0:r.json();case 5:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},96714:function(e,n,t){"use strict";t.d(n,{P:function(){return a},m:function(){return r}});var r=function(e){if(!e)return"";var n,t=new Date(1e3*e);if(!((n=t)instanceof Date)||isNaN(+n))return"";var r=(null==t?void 0:t.getMonth())+1;return(r=(null==t?void 0:t.getMonth())>9?""+r:"0"+r)+"/"+((null==t?void 0:t.getDate())>9?null==t?void 0:t.getDate():"0"+(null==t?void 0:t.getDate()))+" "+((null==t?void 0:t.getHours())>9?null==t?void 0:t.getHours():"0"+(null==t?void 0:t.getHours()))+":"+((null==t?void 0:t.getMinutes())>9?null==t?void 0:t.getMinutes():"0"+(null==t?void 0:t.getMinutes()))},a="-"},88308:function(e,n,t){"use strict";t.d(n,{w_:function(){return B},fK:function(){return N},CY:function(){return A}});var r=t(96695),a=t.n(r),s=t(15009),i=t.n(s),u=t(5574),o=t.n(u),c=t(99289),p=t.n(c),l=t(22537),d=t(61895),y=t(11853),f=t.n(y),m=t(36493);function b(e){var n=e.slice(-1),t=parseInt(e.slice(0,-1)),r=0;switch(n){case"m":r=60*t;break;case"h":r=60*t*60;break;case"d":r=24*t*60*60;break;default:throw new Error("Invalid time unit: ".concat(n))}return r}var v,h=function(e){var n=o()(e,5);return{time:n[0]/1e3,open:n[1],high:n[2],low:n[3],close:n[4]}},k=function(e){return e.replace("usdt","/USDT").toUpperCase()},T=new(f().pro.binanceus)({enableRateLimit:!0}),g={getKLines:function(){var e=p()(i()().mark((function e(n,t){var r,a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=k(n),e.next=3,T.fetchOHLCV(r,t);case 3:return a=e.sent,e.abrupt("return",a.map(h));case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),subscribeKLine:function(e,n,t){var r=k(e),a=!0;function s(){return(s=p()(i()().mark((function e(){var s,u,c,p,l;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=17;break}return s=Date.now()-1e3*b(n),e.prev=2,e.next=5,T.watchOHLCV(r,n,s,2);case 5:u=e.sent,c=o()(u,1),p=c[0],l=h(p),t(l),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:e.next=0;break;case 17:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}return function(){s.apply(this,arguments)}(),function(){return a=!1}},subscribeTickerBatch:function(e,n){var t=e.map((function(e){return k(e)})),r=!0;function a(){return(a=p()(i()().mark((function e(){var a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=13;break}return e.prev=1,e.next=4,T.watchTickers(t);case 4:a=e.sent,Object.values(a).forEach((function(e){n({symbol:(0,m.do)(e.symbol).toLowerCase(),indexPrice:(0,d.Q6)(e.last),"24Height":(0,d.Q6)(e.high),"24Low":(0,d.Q6)(e.low),"24Change":(0,d.Q6)(e.change),"24ChangeRate":(0,d.Q6)(e.percentage)})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){return r=!1}}},x=g,w=t(8433),_=t(87798),M=t(20243),C=w.Z.create({baseURL:_.II,timeout:5e3}),S={getKLines:function(e,n){return C.get("klines",{params:{symbol:e,interval:n}})},subscribeKLine:function(e,n){var t=e.symbol,r=e.period,a="".concat(t,"@kline_").concat(r),s=M.N.subscribe({method:"SUBSCRIBE",params:[a]},n,(function(e){return e.stream===a}));return function(){M.N.subscribe({method:"UNSUBSCRIBE",params:[a]},n,(function(e){return e.stream===a})),M.N.unsubscribe(s)}},getTickerPrice:function(e){return C.get("ticker/price",{params:{symbol:e}})},get24HChange:(v=p()(i()().mark((function e(n){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.get("ticker/24hr",{params:{symbol:n}}));case 1:case"end":return e.stop()}}),e)}))),function(e){return v.apply(this,arguments)}),subscribeTickerBatch:function(e,n,t){var r=M.N.subscribe({method:"SUBSCRIBE",params:e},n,(function(e){var n;return null==e||null===(n=e.stream)||void 0===n?void 0:n.includes("@ticker")}),t);return function(){M.N.subscribe({method:"UNSUBSCRIBE",params:e},n,(function(e){var n;return null==e||null===(n=e.stream)||void 0===n?void 0:n.includes("@ticker")})),M.N.unsubscribe(r)}}},L=S,R=function(e){return{symbol:e.s.toLowerCase(),indexPrice:(0,d.Q6)(e.c),"24Height":(0,d.Q6)(e.h),"24Low":(0,d.Q6)(e.l),"24Change":(0,d.Q6)(e.p),"24ChangeRate":(0,d.Q6)(e.P)}};function B(e,n){return I.apply(this,arguments)}function I(){return(I=p()(i()().mark((function e(n,t){var r,a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.getKLines(n,t);case 3:return r=e.sent,e.abrupt("return",r);case 7:if(e.prev=7,e.t0=e.catch(0),console.log("getKLines error",e.t0),"Network Error"!==e.t0.message){e.next=15;break}return e.next=13,x.getKLines(n,t);case 13:return a=e.sent,e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function N(e,n){var t=e.symbol,r=e.period;return L.subscribeKLine({symbol:t,period:r},(function(e,t){var r;e||n({time:(r=t.data).k.t/1e3,open:r.k.o,close:r.k.c,height:r.k.h,low:r.k.l})}))}function A(e,n,t){if(n===l.t4.BinanceUS)return x.subscribeTickerBatch(e,t);var r=function(){var e=p()(i()().mark((function e(n){var t,r,a,s,u;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([L.getTickerPrice(n),L.get24HChange(n)]).catch((function(e){return console.error("Failed to get ticker info for ".concat(n),e),[null,null]}));case 2:if(t=e.sent,r=o()(t,2),a=r[0].data,s=r[1].data,a&&s){e.next=8;break}return e.abrupt("return");case 8:return u=R({s:a.symbol,c:a.price,g:s.highPrice,l:s.lowPrice,p:s.priceChange,P:s.priceChangePercent}),e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),s=e.map((function(e){return"".concat(e,"@ticker")}));return L.subscribeTickerBatch(s,(function(e,n){e||t(R(null==n?void 0:n.data))}),p()(i()().mark((function n(){var s,u,o,c;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s=a()(e),n.prev=1,s.s();case 3:if((u=s.n()).done){n.next=11;break}return o=u.value,n.next=7,r(o);case 7:c=n.sent,t(c);case 9:n.next=3;break;case 11:n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),s.e(n.t0);case 16:return n.prev=16,s.f(),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[1,13,16,19]])}))))}},4872:function(e,n,t){"use strict";t.d(n,{bI:function(){return o},O7:function(){return u},tr:function(){return i}});var r=t(4480),a=t(36493),s=(0,t(6983).J)({key:"depx-user-preference"}).persistAtom,i=(0,r.cn)({key:"marketsAtom",default:[]}),u=(0,r.cn)({key:"marketStoreAtom",default:{}}),o=(0,r.cn)({key:"marketSelectionAtom",default:"",effects_UNSTABLE:[s]});(0,r.nZ)({key:"symbolSelectionAtom",get:function(e){var n=(0,e.get)(o);return(0,a.do)(null==n?void 0:n.name).toLowerCase()}})},80950:function(){},69948:function(){},96419:function(){},56353:function(){},35368:function(){},78339:function(){},55216:function(){},382:function(){},87387:function(){},82860:function(){},8623:function(){},7748:function(){},85568:function(){},69386:function(){},31616:function(){},56619:function(){},77108:function(){},69862:function(){},40964:function(){}}]);